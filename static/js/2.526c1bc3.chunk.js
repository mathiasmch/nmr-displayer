(this["webpackJsonpnmr-displayer"]=this["webpackJsonpnmr-displayer"]||[]).push([[2],{220:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var a=n(77),r=n(39),i=n(12),o=n(0),c=n.n(o),l=Object(o.createContext)();function s(e,t){switch(t.type){case"SHOW":var n,a=Object(i.a)({},e,{highlights:Object(i.a)({},e.highlights)}),o=Object(r.a)(t.payload);try{for(o.s();!(n=o.n()).done;){var c=n.value;c in a.highlights?a.highlights[c]++:a.highlights[c]=1}}catch(f){o.e(f)}finally{o.f()}return a.highlighted=Object.keys(a.highlights),a;case"HIDE":var l,s=Object(i.a)({},e,{highlights:Object(i.a)({},e.highlights)}),u=Object(r.a)(t.payload);try{for(u.s();!(l=u.n()).done;){var d=l.value;d in s.highlights&&(s.highlights[d]--,0===s.highlights[d]&&delete s.highlights[d])}}catch(f){u.e(f)}finally{u.f()}return s.highlighted=Object.keys(s.highlights),s;default:throw new Error("unknown action type: ".concat(t.type))}}var u={highlights:{},highlighted:[]};function d(e){var t=Object(o.useReducer)(s,u),n=Object(a.a)(t,2),r=n[0],i=n[1],d=Object(o.useMemo)((function(){return{highlight:r,dispatch:i}}),[r]);return c.a.createElement(l.Provider,{value:d},e.children)}function f(e){if(!Array.isArray(e))throw new Error("highlights must be an array");var t=Object(o.useMemo)((function(){var t,n=[],a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if("string"!==typeof i&&"number"!==typeof i)throw new Error("highlight key must be a string or number");""!==i&&n.push(String(i))}}catch(o){a.e(o)}finally{a.f()}return n}),[e]),n=Object(o.useContext)(l),a=Object(o.useMemo)((function(){return n.highlight.highlighted.some((function(e){return t.includes(e)}))}),[n.highlight.highlighted,t]),i=Object(o.useCallback)((function(){n.dispatch({type:"SHOW",payload:t})}),[n,t]),c=Object(o.useCallback)((function(){n.dispatch({type:"HIDE",payload:t})}),[n,t]);return{isActive:a,show:i,hide:c,onHover:{onMouseEnter:i,onMouseLeave:c}}}},297:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"id",(function(){return X})),n.d(a,"name",(function(){return U})),n.d(a,"apply",(function(){return G})),n.d(a,"isApplicable",(function(){return W})),n.d(a,"reduce",(function(){return Z}));var r={};n.r(r),n.d(r,"id",(function(){return $})),n.d(r,"name",(function(){return Q})),n.d(r,"baselineAlgorithms",(function(){return ee})),n.d(r,"apply",(function(){return te})),n.d(r,"isApplicable",(function(){return ne})),n.d(r,"reduce",(function(){return ae}));var i={};n.r(i),n.d(i,"id",(function(){return re})),n.d(i,"name",(function(){return ie})),n.d(i,"apply",(function(){return oe})),n.d(i,"isApplicable",(function(){return ce})),n.d(i,"reduce",(function(){return le}));var o={};n.r(o),n.d(o,"id",(function(){return ue})),n.d(o,"name",(function(){return de})),n.d(o,"apply",(function(){return fe})),n.d(o,"isApplicable",(function(){return pe})),n.d(o,"reduce",(function(){return be}));var c={};n.r(c),n.d(c,"id",(function(){return me})),n.d(c,"name",(function(){return ge})),n.d(c,"apply",(function(){return he})),n.d(c,"isApplicable",(function(){return ve})),n.d(c,"reduce",(function(){return Oe}));var l={};n.r(l),n.d(l,"id",(function(){return ye})),n.d(l,"name",(function(){return xe})),n.d(l,"apply",(function(){return je})),n.d(l,"isApplicable",(function(){return ke})),n.d(l,"reduce",(function(){return Ee}));var s={};n.r(s),n.d(s,"id",(function(){return Ce})),n.d(s,"name",(function(){return we})),n.d(s,"apply",(function(){return De})),n.d(s,"isApplicable",(function(){return Se})),n.d(s,"reduce",(function(){return Pe}));var u={};n.r(u),n.d(u,"id",(function(){return Te})),n.d(u,"name",(function(){return Ie})),n.d(u,"apply",(function(){return Ae})),n.d(u,"isApplicable",(function(){return Fe})),n.d(u,"reduce",(function(){return Le}));var d=n(193),f=n(12),p=n(77),b=n(190),m=n(0),g=n.n(m),h=n(208),v=n(405),O=n(406),y=n(703),x=n(704),j=(n(409),n(53)),k=n.n(j),E=n(39),C=n(79),w=n(37),D=n(38),S=n(234),P=["#FFB300","#803E75","#FF6800","#A6BDD7","#C10020","#CEA262","#817066","#007D34","#F6768E","#00538A","#FF7A5C","#53377A","#FF8E00","#B32851","#F4C800","#7F180D","#93AA00","#593315","#F13A13","#232C16"],T=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=P.filter((function(e){return!t.includes(e)}));if(n.length>0&&!e)return n[0];var a=-.25,r=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var i,o,c="#";for(o=0;o<3;o++)i=parseInt(r.substr(2*o,2),16),i=Math.round(Math.min(Math.max(0,i+i*a),255)).toString(16),c+="00".concat(i).substr(i.length);return c},I=n(695),A=n(385);var F={10:{2:44.75,3:33.5,4:66.625,6:59.083333333333336,8:68.5625,12:60.375,16:69.53125,24:61.020833333333336,32:70.015625,48:61.34375,64:70.2578125,96:61.505208333333336,128:70.37890625,192:61.5859375,256:70.439453125,384:61.626302083333336,512:70.4697265625,768:61.646484375,1024:70.48486328125,1536:61.656575520833336,2048:70.492431640625},11:{2:46,3:36.5,4:48,6:50.166666666666664,8:53.25,12:69.5,16:72.25,24:70.16666666666667,32:72.75,48:70.5,64:73,96:70.66666666666667,128:72.5,192:71.33333333333333,256:72.25,384:71.66666666666667,512:72.125,768:71.83333333333333,1024:72.0625,1536:71.91666666666667,2048:72.03125},12:{2:46,3:36.5,4:48,6:50.166666666666664,8:53.25,12:69.5,16:71.625,24:70.16666666666667,32:72.125,48:70.5,64:72.375,96:70.66666666666667,128:72.5,192:71.33333333333333,256:72.25,384:71.66666666666667,512:72.125,768:71.83333333333333,1024:72.0625,1536:71.91666666666667,2048:72.03125},13:{2:2.75,3:2.8333333333333335,4:2.875,6:2.9166666666666665,8:2.9375,12:2.9583333333333335,16:2.96875,24:2.9791666666666665,32:2.984375,48:2.9895833333333335,64:2.9921875,96:2.9947916666666665}};function L(e){var t,n={dimension:0,nucleus:[],isFid:!1,isFt:!1,isComplex:!1};(R(n,"title",e.TITLE),R(n,"solvent",e[".SOLVENTNAME"]),R(n,"pulse",e[".PULSESEQUENCE"]||e[".PULPROG"]||e.$PULPROG),R(n,"experiment",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===e&&(e={}),"string"===typeof e&&(e={pulse:e});var n=(Array.isArray(t.$SPECTYP)?t.$SPECTYP[0]:t.$SPECTYP||"").replace(/^<(.*)>$/,"$1").toLowerCase();if(n)return n;var a=e.pulse;return"string"!==typeof a?"":(a=a.toLowerCase()).includes("zg")?"1d":a.includes("hsqct")||a.includes("invi")&&(a.includes("ml")||a.includes("di"))?"hsqctocsy":a.includes("hsqc")||a.includes("invi")?"hsqc":a.includes("hmbc")||a.includes("inv4")&&a.includes("lp")?"hmbc":a.includes("cosy")?"cosy":a.includes("jres")?"jres":a.includes("tocsy")||a.includes("mlev")||a.includes("dipsi")?"tocsy":a.includes("noesy")?"noesy":a.includes("roesy")?"roesy":a.includes("dept")?"dept":a.includes("jmod")||a.includes("apt")?"aptjmod":""}(n,e)),R(n,"temperature",parseFloat(e.$TE||e[".TE"])),R(n,"frequency",e[".OBSERVEFREQUENCY"]?parseFloat(e[".OBSERVEFREQUENCY"]):parseFloat(e.$SFO1)),R(n,"type",e.DATATYPE),R(n,"probe",e.$PROBHD),R(n,"bf1",e.$BF1),R(n,"sfo1",e.$SFO1),R(n,"spectralWidth",e.$SW),R(n,"number of points",e.$TD),void 0!==e.$FNTYPE&&R(n,"acquisitionMode",parseInt(e.$FNTYPE,10)),R(n,"expno",parseInt(e.$EXPNO,10)),n.type&&(n.type.toUpperCase().indexOf("FID")>=0?n.isFid=!0:n.type.toUpperCase().indexOf("SPECTRUM")>=0&&(n.isFt=!0)),n.isFid)&&R(n,"digitalFilter",function(e,t,n){var a;if(e>0)a=Number(e);else if(t>14)a=0;else{if(!F[t])throw new Error("dspfvs not in lookup table");var r=F[t];if(!r[n])throw new Error("decim not in lookup table");a=r[n]}return a}(e.$GRPDLY,e.$DSPFVS,e.$DECIM));if(e.$NUC1){var a=e.$NUC1;Array.isArray(a)||(a=[a]);var r=(a=a.map((function(e){return e.replace(/[^A-Za-z0-9]/g,"").replace("NA","")}))).length;(a=a.filter((function(e){return e}))).length===r&&(n.nucleus=a)}if(n.nucleus&&0!==n.nucleus.length||(e[".NUCLEUS"]?n.nucleus=e[".NUCLEUS"].split(",").map((function(e){return e.trim()})):e[".OBSERVENUCLEUS"]?n.nucleus=[e[".OBSERVENUCLEUS"].replace(/[^A-Za-z0-9]/g,"")]:n.nucleus="string"!==typeof(t=n.experiment)?[]:(t=t.toLowerCase()).includes("jres")?["1H","Hz"]:t.includes("hmbc")||t.includes("hsqc")?["1H","13C"]:t.includes("cosy")||t.includes("tocsy")?["1H","1H"]:[]),e["2D_X_NUCLEUS"]&&e["2D_Y_NUCLEUS"]&&(n.nucleus=[e["2D_X_NUCLEUS"].replace(/[^A-Za-z0-9]/g,""),e["2D_Y_NUCLEUS"].replace(/[^A-Za-z0-9]/g,"")]),n.dimension=n.nucleus.length,e.SYMBOL){var i=e.SYMBOL.split(/[, ]+/);i.includes("R")&&i.includes("I")&&(n.isComplex=!0)}return e.$DATE&&(n.date=new Date(1e3*e.$DATE).toISOString()),n}function R(e,t,n){void 0!==n&&("string"===typeof n?(n.startsWith("<")&&n.endsWith(">")&&(n=n.substring(1,n.length-2)),e[t]=n.trim()):e[t]=n)}var N=n(80),_=n(225),M=n(386),z=n(197),Y=n(298),V=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var a=0;a<e.length;a++){var r=e.charAt(a),i=r.charCodeAt(0);if(255!==t[i])throw new TypeError("".concat(r," is ambiguous"));t[i]=a}var o=e.length,c=e.charAt(0),l=Math.log(256)/Math.log(o);return{encode:function(t){if(0===t.length)return"";for(var n=0,a=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var s=(i-r)*l+1>>>0,u=new Uint8Array(s);r!==i;){for(var d=t[r],f=0,p=s-1;(0!==d||f<a)&&-1!==p;p--,f++)d+=256*u[p]>>>0,u[p]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");a=f,r++}for(var b=s-a;b!==s&&0===u[b];)b++;for(var m=c.repeat(n);b<s;++b)m+=e.charAt(u[b]);return m}}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),B=new Uint8Array(8);function H(){for(var e=0;e<8;e++)B[e]=Math.floor(256*Math.random());return V.encode(B).substring(0,8)}var X="absolute",U="absolute";function G(e){if(!W(e))throw new Error("absolute not applicable on this data");e.data.re=z.a.absolute(e.data),e.data.im=new Float64Array(0),e.info.isComplex=!1}function W(e){return!(!e.info.isComplex||e.info.isFid)}function Z(){return{once:!1,reduce:null}}var K=n(697),J=n(422),q=n(384),$="baselineCorrection",Q="baseline correction",ee={airpls:"airPLS",polynomial:"Polynomial"};function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ne(e))throw new Error("baselineCorrection not applicable on this data");var n,a=t.algorithm,r=t.zones,i=e.data,o=i.x,c=i.re;switch(a){case"airpls":n=Object(K.a)(o,c,t).corrected;break;case"polynomial":var l=Object(M.a)({x:o,y:c},{numberOfPoints:4096,zones:r});if(0===r.length){var s=Object(J.a)(l.x,l.y,t),u=s.regression;n=new Float64Array(o.length);for(var d=0;d<c.length;d++)n[d]=c[d]-u.predict(o[d])}else{var f=new q.a(o,c,t.degree);n=new Float64Array(o.length);for(var p=0;p<c.length;p++)n[p]=c[p]-f.predict(o[p])}break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}Object.assign(e.data,{re:n})}function ne(e){return!e.info.isFid}function ae(){return{once:!1,reduce:null}}var re="digitalFilter",ie="Digital Filter";function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ce(e))throw new Error("Digital Filter is not applicable on this data");var n=t.digitalFilterValue,a=void 0===n?0:n,r=new Float64Array(e.data.re),i=new Float64Array(e.data.im),o=Math.floor(a),c=o-a,l=0;o+=0;var s=new Float64Array(r.length),u=new Float64Array(i.length);s.set(r.slice(o)),s.set(r.slice(l,o),r.length-o),u.set(i.slice(o)),u.set(i.slice(l,o),i.length-o),e.data.re=s,e.data.im=u,0!==c&&(c*=2*Math.PI,Object.assign(e.data,z.a.phaseCorrection(e.data,0,c)))}function ce(e){return!(!e.info.isComplex||!e.info.isFid)}function le(){return{once:!0,reduce:void 0}}var se=n(267),ue="fft",de="FFT";function fe(e){if(!pe(e))throw new Error("fft not applicable on this data");var t=new Float64Array(e.data.re),n=new Float64Array(e.data.im),a=t.length;se.FFT.init(a),se.FFT.fft(t,n);var r=new Float64Array(t),i=new Float64Array(n);r.set(t.slice(0,(a+1)/2),(a+1)/2),r.set(t.slice((a+1)/2)),i.set(n.slice(0,(a+1)/2),(a+1)/2),i.set(n.slice((a+1)/2)),e.data.re=r,e.data.im=i,e.data.x=function(e){for(var t=e.info,n=parseFloat(t.bf1),a=parseFloat(t.sfo1),r=parseFloat(t.spectralWidth),i=(a-n)/n*1e6,o=.5*r,c=e.data.x.length,l=i-o,s=r/(c-1),u=new Array(c),d=0;d<c;d++)u[d]=l,l+=s;return u}(e),e.info=Object(f.a)({},e.info,{isFid:!1})}function pe(e){return!(!e.info.isComplex||!e.info.isFid)}function be(){return{once:!0,reduce:void 0}}var me="lineBroadening",ge="line broadening";function he(e,t){if(!ve(e))throw new Error("lineBroadening not applicable on this data");var n,a=e.info.digitalFilter;n=a>0?Math.floor(a):0;for(var r=e.data.re,i=e.data.im,o=e.data.x,c=r.length,l=new Float64Array(c),s=new Float64Array(c),u=(o[c-1]-o[0])/(c-1),d=-t*Math.exp(1),p=Math.exp(d*u),b=Math.exp(d*o[0]),m=0;m<c-n;m++)l[m]=r[m]*b,s[m]=i[m]*b,b*=p;b=Math.exp(d*o[0]);for(var g=c;g>c-n;g--)l[g]=r[g]*b,s[g]=i[g]*b,b*=p;e.data=Object(f.a)({},e.data,{},{re:l,im:s})}function ve(e){return!(!e.info.isComplex||!e.info.isFid)}function Oe(e,t){return{once:!0,reduce:e+t}}var ye="phaseCorrection",xe="phase correction";function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ke(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,z.a.phaseCorrection(e.data,n,a))}function ke(e){return!(!e.info.isComplex||e.info.isFid)}function Ee(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var Ce="shiftX",we="shift X";function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function Se(){return!0}function Pe(){return{once:!1,reduce:null}}var Te="zeroFilling",Ie="Zero Filling";function Ae(e,t){if(!Fe(e))throw new Error("zeroFilling not applicable on this data");var n,a=e.info.digitalFilter;n=a>0?Math.floor(a):0;for(var r=e.data,i=r.re,o=r.im,c=r.x,l=new Float64Array(t),s=new Float64Array(t),u=new Float64Array(t),d=Math.min(t,i.length),p=0;p<d-n;p++)l[p]=i[p],s[p]=o[p],u[p]=c[p];for(var b=c[1]-c[0],m=c[d-n-1],g=d-n;g<t;g++)m+=b,u[g]=m;n>0&&n<t&&(l.set(i.slice(i.length-n,i.length),t-n),s.set(o.slice(i.length-n,i.length),t-n)),e.data=Object(f.a)({},e.data,{},{re:l,im:s,x:u})}function Fe(e){return!(!e.info.isComplex||!e.info.isFid)}function Le(e,t){return{once:!0,reduce:e+t}}var Re={absolute:a,baselineCorrection:r,lineBroadening:c,fft:o,phaseCorrection:l,shiftX:s,zeroFilling:u,digitalFilter:i},Ne=function(){function e(){Object(w.a)(this,e)}return Object(D.a)(e,null,[{key:"applyFilter",value:function(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!1,i=Object(E.a)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value,c={name:o.name,label:Re[o.name].name,value:o.options},l=e.lookupForFilter(t,o.name);if(l){var s=Re[o.name].reduce(l.value,c.value);s.once?(r||(r=!0),null!=s.reduce&&void 0!==s.reduce&&e.replaceFilter(t,l.id,s.reduce)):e.addFilter(t,c,!Object.prototype.hasOwnProperty.call(o,"isDeleteAllow")||o.isDeleteAllow)}else e.addFilter(t,c,!Object.prototype.hasOwnProperty.call(o,"isDeleteAllow")||o.isDeleteAllow)}}catch(p){i.e(p)}finally{i.f()}if(r)1===a.length&&e.isLastFilter(t,a[0].name)?Re[a[0].name].apply(t,a[0].options):e.reapplyFilters(t);else{var u,d=Object(E.a)(a);try{for(d.s();!(u=d.n()).done;){var f=u.value;Re[f.name].apply(t,f.options)}}catch(p){d.e(p)}finally{d.f()}}}},{key:"isLastFilter",value:function(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}},{key:"lookupForFilter",value:function(e,t){return e.filters.find((function(e){return e.name===t}))}},{key:"reapplyFilters",value:function(e){var t,n=Object(E.a)(e.filters);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.id,i=a.flag;this.enableFilter(e,r,i)}}catch(o){n.e(o)}finally{n.f()}}},{key:"enableFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));for(var r in e.filters[a]=Object(f.a)({},e.filters[a],{flag:n}),e.data=Object(f.a)({},e.data,{},e.source.original),e.info=Object(f.a)({},e.info,{},e.originalInfo),e.filters){var i=e.filters[r];if(e.filters[r]=Object(f.a)({},e.filters[r],{error:null}),i.flag)try{Re[i.name].apply(e,i.value)}catch(o){e.filters[r]=Object(f.a)({},e.filters[r],{error:o.message})}}}},{key:"deleteFilter",value:function(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(f.a)({},e.data,{},e.source.original),e.info=Object(f.a)({},e.info,{},e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(f.a)({},e.filters[n],{error:null}),a.flag)try{Re[a.name].apply(e,a.value)}catch(r){e.filters[n]=Object(f.a)({},e.filters[n],{error:r.message})}}}},{key:"addFilter",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=H();e.filters=e.filters.slice(0),delete t.isSnapshot,e.filters.push(Object(f.a)({},t,{id:a,flag:!0,isDeleteAllow:n}))}},{key:"replaceFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));delete e.filters[a].isSnapshot,e.filters[a]=Object(f.a)({},e.filters[a],{value:n})}}]),e}(),_e=n(383);var Me=function(e,t,n,a,r){var i=z.b.getFromToIndex(e,{from:n,to:a}),o=i.fromIndex,c=i.toIndex,l={x:e.slice(o,c),y:t.slice(o,c)},s=Object(Y.a)(l,{frequency:r,takeBestPartMultiplet:!0,symmetrizeEachStep:!0});return{nbAtoms:0,diaD:[],multiplicity:s.j.map((function(e){return e.multiplicity})).join(""),kind:"",remark:"",peak:[],delta:s.chemShift,j:s.j,from:n,to:a}},ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.a)(this,e),this.id=t.id||H(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display&&t.display.name?t.display.name:H(),color:"black",isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0,isVisibleInDomain:!0},t.display),this.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({x:[],re:[],im:[]},t.data),this.peaks=Object.assign({values:[],options:{}},t.peaks),this.integrals=Object.assign({values:[],options:{}},t.integrals),this.filters=Object.assign([],t.filters),this.ranges=Object.assign({values:[],options:{}},t.ranges),Ne.reapplyFilters(this),this.preprocessing()}return Object(D.a)(e,[{key:"reapplyFilters",value:function(){Ne.reapplyFilters(this)}},{key:"preprocessing",value:function(){this.info.isFid&&-1===this.filters.findIndex((function(e){return e.name===Re.digitalFilter.id}))&&this.applyFilter([{name:Re.digitalFilter.id,options:{digitalFilterValue:this.info.digitalFilter},isDeleteAllow:!1}])}},{key:"setIsRealSpectrumVisible",value:function(e){this.isRealSpectrumVisible=e}},{key:"setPeaks",value:function(e){this.peaks=e}},{key:"getPeaks",value:function(){return this.peaks}},{key:"setRanges",value:function(e){this.ranges=e,this.updateIntegralRanges()}},{key:"setRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();var t=this.ranges.values.findIndex((function(t){return t.id===e.id}));this.ranges.values[t]=e,this.updateIntegralRanges()}},{key:"getRanges",value:function(){return this.ranges}},{key:"addIntegral",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice(),this.integrals.values.push({id:H(),from:e[0],to:e[1],absolute:this.getIntegration(e[0],e[1]),kind:"signal"}),this.updateIntegralIntegrals()}},{key:"getIntegration",value:function(e,t){return z.c.integration({x:this.data.x,y:this.data.re},{from:e,to:t,reverse:!0})}},{key:"changeIntegralSum",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.options=Object(f.a)({},this.integrals.options,{sum:e}),this.updateIntegralIntegrals()}},{key:"changeRangesSum",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.options=Object(f.a)({},this.ranges.options,{sum:e}),this.updateIntegralRanges()}},{key:"updateIntegralIntegrals",value:function(){var e=void 0!==this.integrals.options.sum?this.integrals.options.sum:100;this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice(),this.integrals.values=this.updateRelatives(this.integrals.values,e,"integral",["signal"])}},{key:"updateIntegralRanges",value:function(){var e=void 0!==this.ranges.options.sum?this.ranges.options.sum:100;this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice(),this.ranges.values=this.updateRelatives(this.ranges.values,e,"integral",["signal"])}},{key:"updateRelatives",value:function(e,t,n,a){var r=e.reduce((function(e,t){return t.kind&&a.includes(t.kind)?e+=t.absolute:e}),0),i=r>0?t/r:0;return e.map((function(e){return e.kind&&a.includes(e.kind)?Object(f.a)({},e,Object(N.a)({},n,e.absolute*i)):Object(f.a)({},e,Object(N.a)({},n,null))}))}},{key:"changeIntegral",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice();var t=this.integrals.values.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.integrals.values[t]=Object(f.a)({},this.integrals.values[t],{},e,{},{absolute:this.getIntegration(e.from,e.to)}),this.updateIntegralIntegrals())}},{key:"getIntegrals",value:function(){return this.integrals}},{key:"getInfo",value:function(){return this.info}},{key:"baseline",value:function(){}},{key:"applyAutoPeakPicking",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice();var t=function(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,r=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)],i=_e.a.fromXY(e.data.x,e.data.re).createPeaks({noiseLevel:3*r,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:7,polynomial:3}});return i.sort((function(e,t){return t.y-e.y})),a&&(i=i.slice(0,a)),i.map((function(t){return{id:H(),xIndex:t.index,intensity:t.y,width:t.width,xShift:e.data.x[t.index]-t.x}}))}(this,e);return this.peaks.values=t,this.peaks}},{key:"detectRanges",value:function(e){var t=this;this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();var n=function(e,t){var n=t.minMaxRatio,a=void 0===n?.1:n,r=t.nH,i=void 0===r?100:r,o=t.compile,c=void 0===o||o,l=t.frequencyCluster,s=void 0===l?16:l,u=t.clean,d=void 0===u?null:u,f=t.keepPeaks,p=void 0===f||f,b=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)];return _e.a.fromXY(e.data.x,e.data.re).createRanges({noiseLevel:3*b,minMaxRatio:a,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:i,compile:c,frequencyCluster:s,clean:d,keepPeaks:p,sgOptions:{windowSize:7,polynomial:3}})}(this,e);return this.ranges.values=n.map((function(e){return Object(f.a)({id:H()},e,{absolute:t.getIntegration(e.from,e.to),kind:"signal",signal:[Object(f.a)({},e.signal[0],{from:e.from,to:e.to})]})})),this.updateIntegralRanges(),this.ranges}},{key:"deletePeak",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice(),this.peaks.values=null==e?[]:this.peaks.values.filter((function(t){return t.xIndex!==e.xIndex}))}},{key:"deleteRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice(),this.ranges.values=null==e?[]:this.ranges.values.filter((function(t){return t.id!==e})),this.updateIntegralRanges()}},{key:"deleteIntegral",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice(),this.integrals.values=null==e?[]:this.integrals.values.filter((function(t){return t.id!==e})),this.updateIntegralIntegrals()}},{key:"setIntegral",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice();var t=this.integrals.values.findIndex((function(t){return t.id===e.id}));this.integrals.values[t]=e,this.updateIntegralIntegrals()}},{key:"applyFilter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ne.applyFilter(this,e)}},{key:"enableFilter",value:function(e,t){Ne.enableFilter(this,e,t)}},{key:"deleteFilter",value:function(e){Ne.deleteFilter(this,e)}},{key:"getReal",value:function(){return{x:this.data.x,y:this.data.re}}},{key:"getImaginary",value:function(){return{x:this.data.x,y:this.data.im}}},{key:"getData",value:function(){return this.data}},{key:"lookupPeak",value:function(e,t){var n=this.data.x.findIndex((function(t){return t>=e})),a=this.data.x.findIndex((function(e){return e>=t}))-1;n>a&&(a=n=a);var r=this.data.re.slice(n,a);if(r&&r.length>0){var i=Object(_.a)(r),o=r.findIndex((function(e){return e===i}));return{x:this.data.x[n+o],y:i,xIndex:n+o}}return null}},{key:"checkPeakIsExists",value:function(e){return!!this.peaks.values.map((function(e){return e.xIndex})).includes(e.xIndex)}},{key:"detectSignal",value:function(e,t){return Me(this.data.x,this.data.re,e,t,this.info.frequency)}},{key:"addRange",value:function(e,t){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();try{var n={id:H(),from:e,to:t,absolute:this.getIntegration(e,t),signal:[this.detectSignal(e,t)],kind:"signal"};this.ranges.values.push(n),this.updateIntegralRanges()}catch(a){throw new Error("Could not calculate the multiplicity")}}},{key:"changeRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();var t=this.ranges.values.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.ranges.values[t]=Object(f.a)({},this.ranges.values[t],{},e,{},{absolute:this.getIntegration(e.from,e.to)}),this.updateIntegralRanges())}},{key:"addPeak",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice(),this.checkPeakIsExists(e)||this.peaks.values.push(Object(f.a)({id:H()},e))}},{key:"addPeaks",value:function(e,t){if(e!==t){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice();var n=this.lookupPeak(e,t);n&&!this.checkPeakIsExists(n)&&(this.peaks.values=this.peaks.values.concat(Object(f.a)({id:H()},n)))}return this.peaks}},{key:"addFilter",value:function(e){Ne.addFilter(this,e)}},{key:"getFilters",value:function(){return this.filters}},{key:"setDisplay",value:function(e){this.display=Object.assign({},this.display),this.display=Object(f.a)({},this.display,{},e)}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL||this.source.jcamp?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta,peaks:this.peaks,integrals:this.integrals,ranges:this.ranges,filters:this.filters}}}]),e}(),Ye=function e(){Object(w.a)(this,e)};function Ve(e){var t=e[0]&&e[0].data&&e[0].data.x?e[0].data.x:[],n=e[0]&&e[0].data&&e[0].data.y?e[0].data.y:[],a=e[1]&&e[1].data&&e[1].data.y?e[1].data.y:null;return t[0]>t[1]&&(t.reverse(),n.reverse(),a&&a.reverse()),{x:t,re:n,im:a}}Ye.fromBruker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.info,a=Ve(e.spectra);a.im&&(n.isComplex=!0),Array.isArray(n.nucleus)&&(t.info.nucleus=n.nucleus[0]);var r=new ze(Object(f.a)({},t,{meta:e.info,data:a,source:{jcamp:null,jcampURL:null,original:a}}));return r},Ye.fromParsedJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ve(e.spectra),a=L(e.info);Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]);var r=new ze(Object(f.a)({},t,{info:a,meta:e.info,data:n,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:n}}));return r};var Be=n(696),He=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;Object(w.a)(this,e),this.currentLevelPositive=n,this.currentLevelNegative=a;var r=Xe(t.minX,t.maxX,t.z[0].length),i=Xe(t.minY,t.maxY,t.z.length);this.conrec=new Be.a(t.z,{xs:r,ys:i,swapAxes:!1}),this.median=t.noise,this.minMax=t}return Object(D.a)(e,[{key:"getLevel",value:function(){return{levelPositive:this.currentLevelPositive,levelNegative:this.currentLevelNegative}}},{key:"setLevel",value:function(e,t){this.currentLevelPositive=e,this.currentLevelNegative=t}},{key:"wheel",value:function(e){var t=Math.sign(e);(this.currentLevelPositive>0&&-1===t||this.currentLevelPositive<21&&1===t)&&(this.currentLevelPositive+=t),(this.currentLevelNegative>0&&-1===t||this.currentLevelNegative<21&&1===t)&&(this.currentLevelNegative+=t)}},{key:"shiftWheel",value:function(e){var t=Math.sign(e);if(!(0===this.currentLevelNegative&&-1===t||this.currentLevelNegative>20&&1===t))return this.currentLevelNegative+=t,[]}},{key:"drawContours",value:function(){var e=this.currentLevelPositive/2+1,t=this.currentLevelNegative/2+1;return[this.getContours(e),this.getContours(t,{negative:!0})]}},{key:"getContours",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.negative,a=void 0!==n&&n,r=t.timeout,i=void 0===r?4e3:r,o=t.nbLevels,c=void 0===o?10:o,l=Math.max(Math.abs(this.minMax.maxZ),Math.abs(this.minMax.minZ)),s=Xe(3*this.median*Math.pow(2,e),l,c,2);a&&(s=s.map((function(e){return-e})));var u=[];try{u=this.conrec.drawContour({contourDrawer:"shape",levels:s,timeout:i})}catch(d){console.log(d)}return u}}]),e}();function Xe(e,t,n,a){if(a){var r=[];r[0]=0;for(var i=1;i<=n;i++)r[i]=r[i-1]+(a-1)/Math.pow(a,i);for(var o=r[n],c=new Array(n),l=0;l<n;l++)c[l]=(t-e)*(1-r[l+1]/o)+e;return c}var s=(t-e)/(n-1);return function(e,t,n){for(var a=[],r=e;r<t;r+=n)a.push(r);return a}(e,t+s/2,s)}var Ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.a)(this,e),this.id=t.id||H(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display.name||H(),positiveColor:"red",negativeColor:"blue",isVisible:!0},t.display),this.info=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({z:[],minX:0,minY:0,maxX:0,maxY:0},t.data),this.processingController=new He(this.data)}return Object(D.a)(e,[{key:"getProcessingController",value:function(){return this.processingController}},{key:"getContourLines",value:function(){return this.processingController.drawContours()}},{key:"setDisplay",value:function(e){this.display=Object.assign({},this.display),this.display=Object(f.a)({},this.display,{},e)}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta}}}]),e}(),Ge=function e(){Object(w.a)(this,e)};function We(e,t,n){return fetch(t).then((function(e){return e.text()})).then((function(t){Ze(e,t,n)}))}function Ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(A.a)(t,{noContour:!0,xy:!0,keepRecordsRegExp:/.*/,profiling:!0}),r=a.flatten;if(0!==r.length){var i,o=Object(E.a)(r);try{for(o.s();!(i=o.n()).done;){var c=i.value;(c.spectra&&c.spectra.length>0||c.minMax)&&qe(e,c,n)}}catch(l){o.e(l)}finally{o.f()}}}function Ke(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(C.a)(k.a.mark((function e(t){var n,a,r,i,o,c=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:[],a=[],r=Object(E.a)(n);try{for(r.s();!(i=r.n()).done;)null!=(o=i.value).source.jcamp?Ze(t,o.source.jcamp,o):null!=o.source.jcampURL?a.push(We(t,o.source.jcampURL,o)):t.push(new ze(Object(f.a)({},o,{data:o.source.original})))}catch(l){r.e(l)}finally{r.f()}return e.next=6,Promise.all(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t,n){var a=L(t.info);1===a.dimension&&e.push(Ye.fromParsedJcamp(t,n)),2===a.dimension&&e.push(Ge.fromParsedJcamp(t,n))}function $e(e,t,n){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(C.a)(k.a.mark((function e(t,n,a){var r,i,o,c,l,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)(a,{xy:!0,noContours:!0});case 2:r=e.sent,i=r.map((function(e){return e.value})),o=Object(E.a)(i);try{for(o.s();!(c=o.n()).done;)l=c.value,1===(s=L(l.info)).dimension&&l.spectra&&l.spectra.length>0&&t.push(Ye.fromBruker(l,Object(f.a)({},n,{info:s}))),2===s.dimension&&s.isFt&&t.push(Ge.fromBruker(l,Object(f.a)({},n,{info:s})))}catch(u){o.e(u)}finally{o.f()}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ge.fromParsedJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minMax,a=L(e.info),r=new Ue(Object(f.a)({},t,{info:a,meta:e.info,data:n,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:n}}));return r},Ge.fromBruker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minMax,a=new Ue(Object(f.a)({},t,{meta:e.info,data:n,source:{jcamp:null,jcampURL:null,original:n}}));return a};var et=n(503),tt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.a)(this,e),this.key=t.key||H(),this.molfile=t.molfile||"";var n=new S.Molecule.fromMolfile(this.molfile),a=n.getMolecularFormula();this.mf=a.formula,this.em=a.absoluteWeight,this.mw=a.relativeWeight,this.svg=n.toSVG(50,50);var r=new et.MF(this.mf);this.atoms=r.getInfo().atoms}return Object(D.a)(e,[{key:"toJSON",value:function(){return{molfile:this.molfile}}}]),e}(),nt=function e(){Object(w.a)(this,e)};nt.fromJSON=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a,r=S.Molecule.fromMolfile(e[n].molfile),i=r.getFragments(),o=Object(E.a)(i);try{for(o.s();!(a=o.n()).done;){var c=a.value;t.push(new tt({molfile:c.toMolfileV3()}))}}catch(l){o.e(l)}finally{o.f()}}return t};var at=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;Object(w.a)(this,e),this.spectra=[],this.molecules=[],this.spectra=t.slice(),this.molecules=n.slice(),this.preferences=a||{}}return Object(D.a)(e,[{key:"fromZip",value:function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(E.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return r=a.value,i=T(!0),e.next=8,$e(this.spectra,{display:{color:i,name:r.name}},r.binary);case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addJcampFromURL",value:function(){var e=Object(C.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:We(this.spectra,t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addJcamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ze(this.spectra,e,t)}},{key:"addMolfileFromURL",value:function(){var e=Object(C.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.text()}));case 2:n=e.sent,this.addMolfile(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMolecules",value:function(){return this.molecules}},{key:"getPreferences",value:function(){return this.preferences}},{key:"removeMolecule",value:function(e){this.molecules=this.molecules.filter((function(t){return t.key!==e}))}},{key:"addMolfile",value:function(e){var t=S.Molecule.fromMolfile(e).getFragments();this.molecules=Object.assign([],this.molecules);var n,a=Object(E.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.molecules.push(new tt({molfile:r.toMolfileV3(),svg:r.toSVG(150,150),mf:r.getMolecularFormula().formula,em:r.getMolecularFormula().absoluteWeight,mw:r.getMolecularFormula().relativeWeight}))}}catch(i){a.e(i)}finally{a.f()}}},{key:"setMolecules",value:function(e){this.molecules=e}},{key:"setMolfile",value:function(e,t){var n=S.Molecule.fromMolfile(e).getFragments();if(n.length>1){this.molecules=this.molecules.filter((function(e){return e.key!==t}));var a,r=Object(E.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;this.molecules.push(new tt({molfile:i.toMolfileV3(),svg:i.toSVG(150,150),mf:i.getMolecularFormula().formula,em:i.getMolecularFormula().absoluteWeight,mw:i.getMolecularFormula().relativeWeight}))}}catch(u){r.e(u)}finally{r.f()}}else if(1===n.length){var o=n[0],c=new tt({molfile:o.toMolfileV3(),svg:o.toSVG(150,150),mf:o.getMolecularFormula().formula,em:o.getMolecularFormula().absoluteWeight,mw:o.getMolecularFormula().relativeWeight,key:t}),l=this.molecules.findIndex((function(e){return e.key===t})),s=this.molecules.slice();s.splice(l,1,c),this.molecules=s}return this.molecules}},{key:"toJSON",value:function(){return{spectra:this.spectra.map((function(e){return Object(f.a)({},e.toJSON(),{data:{}})})),molecules:this.molecules.map((function(e){return e.toJSON()})),preferences:this.preferences}}},{key:"setPreferences",value:function(e){this.preferences=Object(f.a)({},this.preferences,{},e)}},{key:"pushDatum",value:function(e){this.spectra.push(e)}},{key:"getDatum",value:function(e){return this.spectra.find((function(t){return t.id===e}))}},{key:"getSpectraData",value:function(){return this.spectra?this.spectra.map((function(e){var t=e instanceof ze?Object(f.a)({},e.data,{y:e.data.re}):e.data;return Object(f.a)({id:e.id},t,{display:e.display,isVisibleInDomain:e.display.isVisibleInDomain,info:e.info,meta:e.meta,peaks:e.peaks,integrals:e.integrals,filters:e.filters,ranges:e.ranges})})):[]}},{key:"deleteDatumByIDs",value:function(e){var t=this.spectra.filter((function(t){return!e.includes(t.id)}));this.spectra=t.length>0?t:[]}}],[{key:"build",value:function(){var t=Object(C.a)(k.a.mark((function t(){var n,a,r,i=arguments;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},a=n.molecules?nt.fromJSON(n.molecules):[],r=new e([],a,n.preferences),t.next=5,Ke(r.spectra,n.spectra);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}();at.usedColors=[];var rt=n(706),it=n(707),ot=n(200),ct=n.n(ot),lt=Object(m.createContext)(),st={step:"initial",brush:{start:null,end:null}},ut=[];function dt(e){var t=e.children,n=e.className,a=e.style,r=e.onBrush,i=e.onZoom,o=e.onDoubleClick,c=e.onClick,l=e.noPropagation,s=Object(m.useReducer)(ft,st),u=Object(p.a)(s,2),d=u[0],b=u[1],h=Object(m.useState)(),v=Object(p.a)(h,2),O=v[0],y=v[1],x=Object(m.useCallback)((function(e){return l&&e.stopPropagation(),b({type:"DOWN",shiftKey:e.shiftKey,altKey:e.altKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),y(e.timeStamp),!1}),[l]),j=Object(m.useCallback)((function(e){var t=e.timeStamp,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.x,r=e.clientY-n.y,i=ct.a.debounce((function(){t-O<=150&&1===ut.length&&c(Object(f.a)({},e,{x:a,y:r})),ut=[]}),200);ut.push(i),i(),ut.length>1&&(ct.a.map(ut,(function(e){return e.cancel()})),ut=[],o(Object(f.a)({},e,{x:a,y:r})))}),[O,c,o]),k=Object(m.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y,r=e.deltaY,o=e.deltaX,c=e.shiftKey,l=e.deltaMode;i({deltaY:r||o,shiftKey:c,deltaMode:l,x:n,y:a})}),[i]);return Object(m.useEffect)((function(){"end"===d.step&&(r(d),b({type:"DONE"}))}),[r,d]),Object(m.useEffect)((function(){var e=function(e){b({type:"MOVE",screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})},t=function(e){return b({type:"UP",clientX:e.clientX,clientY:e.clientY}),!1};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[]),g.a.createElement(lt.Provider,{value:d},g.a.createElement("div",{className:n,style:a,onMouseDown:x,onClick:j,onWheel:k},t))}function ft(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.clientX,a=t.clientY;return Object(f.a)({},e,{endX:n-e.boundingRect.x,endY:a-e.boundingRect.y,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var r=t.screenX,i=t.screenY,o=t.clientX,c=t.clientY,l=t.boundingRect,s=t.shiftKey,u=t.altKey,d=o-l.x,p=c-l.y;return Object(f.a)({},e,{shiftKey:s,altKey:u,startX:d,startY:p,startScreenX:r,startScreenY:i,startClientX:o,startClientY:c,boundingRect:l,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){t.screenX,t.screenY;var b=t.clientX,m=t.clientY;return Object(f.a)({},e,{step:"brushing",endX:b-e.boundingRect.x,endY:m-e.boundingRect.y})}return e;case"DONE":if("end"===e.step)return Object(f.a)({},e,{step:"initial"});break;default:return e}}dt.defaultProps={onBrush:function(){return null},onZoom:function(){return null},onDoubleClick:function(){return null},onClick:function(){return null}};var pt=Object(m.createContext)();function bt(e){var t=e.children,n=e.className,a=e.style,r=e.noPropagation,i=Object(m.useState)(null),o=Object(p.a)(i,2),c=o[0],l=o[1],s=Object(m.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a}),r&&e.stopPropagation()}),[r]),u=Object(m.useCallback)((function(e){l(null),r&&e.stopPropagation()}),[r]);return g.a.createElement(pt.Provider,{value:c},g.a.createElement("div",{className:n,style:a,onMouseMove:s,onMouseLeave:u},t))}var mt=g.a.createContext(),gt=mt.Provider;function ht(){return Object(m.useContext)(mt)}var vt=Object(m.createContext)(),Ot=vt.Provider;function yt(){return Object(m.useContext)(vt)}var xt=g.a.createContext(),jt=xt.Provider;function kt(){return Object(m.useContext)(xt)}var Et={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},Ct=function(e){var t=e.children,n=e.open,a=e.onClose,r=e.style,i=Object(m.useCallback)((function(e){a(e)}),[a]);return Object(m.useEffect)((function(){!1===n&&i()}),[i,n]),n&&g.a.createElement("div",{style:Et.outerContainer,onClick:i},g.a.createElement("div",{style:Object(f.a)({},Et.innerContainer,{},r),onClick:function(e){e.preventDefault(),e.stopPropagation()}},t))};Ct.defaultProps={onClose:function(){return null},open:!1};var wt=Ct,Dt=n(2);function St(){var e=Object(d.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n  padding: 5px;\n  background-color: #ffffff52;\n\n  button:first-child {\n    border-radius: 5px 0 0 5px;\n    border-weight: 0 1px 0 0;\n  }\n  button:last-child {\n    border-radius: 0px 5px 5px 0px;\n    border-weight: 0 0 0 1px;\n  }\n  button {\n    border: 1px solid #dcdcdc;\n    background-color: white;\n    display: inline-block;\n    cursor: pointer;\n    color: #666666;\n    font-weight: bold;\n    padding: 6px 24px;\n    text-decoration: none;\n  }\n  button:hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return St=function(){return e},e}function Pt(){var e=Object(d.a)(["\n  font-size: 16px;\n  text-align: center;\n  color: white;\n  text-align: center;\n  margin: 35px 10px;\n  flex: 1;\n"]);return Pt=function(){return e},e}var Tt=Object(b.b)(Pt()),It=Object(b.b)(St()),At=function(e){var t=e.onYes,n=e.onNo,a=e.onClose,r=e.message,i=Object(m.useCallback)((function(e){t(e),a()}),[a,t]),o=Object(m.useCallback)((function(e){n(e),a()}),[a,n]);return Object(b.c)("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"#ff3636",flex:1}},Object(b.c)("p",{css:Tt},r),Object(b.c)("div",{css:It},Object(b.c)("button",{type:"button",onClick:o},"No"),Object(b.c)("button",{type:"button",onClick:i},"Yes")))};At.defaultProps={onYes:function(){return null},onNo:function(){return null}};var Ft=At,Lt=Object(m.createContext)(),Rt=function(e){var t=e.children,n=e.context,a=e.style,r=Object(m.useRef)(),i=Object(m.useRef)(null),o=Object(m.useState)({show:!1}),c=Object(p.a)(o,2),l=c[0],s=c[1];Object(m.useEffect)((function(){return r.current=document.createElement("div"),document.body.appendChild(r.current),function(){r.current&&document.body.removeChild(r.current)}}),[]);var u=function(){s((function(e){return e&&e.options&&e.options.onClose&&e.options.onClose(),{show:!1}}))},d=Object(m.useCallback)((function(){u()}),[]);return i.current={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:e,options:t,show:!0,close:function(){return u()}};return s(n),n.options.onOpen&&n.options.onOpen(),n},close:function(){d()},modal:l,showConfirmDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:g.a.createElement(Ft,null),options:t,show:!0};return t.message=e,n.close=function(){return u()},s(n),n.options.onOpen&&n.options.onOpen(),n}},g.a.createElement(n.Provider,{value:i},t,r.current&&Object(Dt.createPortal)(g.a.createElement(wt,{open:l.show,onClose:d,style:a},l.options&&g.a.cloneElement(l.component,Object(f.a)({},l.options,{onClose:d}))),r.current))},Nt=Rt;Rt.defaultProps={context:Lt,style:{}};var _t=function(e){return Object(m.useContext)(e||Lt).current};function Mt(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"]);return Mt=function(){return e},e}var zt=Object(b.b)(Mt()),Yt=function(e){var t=e.isEmpty;return void 0===t||t?Object(b.c)("div",{css:zt},Object(b.c)("p",null,"Drag and drop here a Jcamp or NMRium file")):null};function Vt(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return Vt=function(){return e},e}var Bt=Object(b.b)(Vt()),Ht=function(e){var t=e.isLoading,n=void 0===t||t,a=ht().data,r=Object(m.useState)(!1),i=Object(p.a)(r,2),o=i[0],c=i[1];return n||setTimeout((function(){c(!0)}),500),Object(b.c)(m.Fragment,null,n&&Object(b.c)("div",{css:Bt},Object(b.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3"},Object(b.c)("g",{fill:"#61DAFB"},Object(b.c)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(b.c)("path",{d:"M520.5 78.1z"}))),Object(b.c)("p",null,"Loading ...")),o&&!n&&Object(b.c)(Yt,{isEmpty:a&&0===a.length}))},Xt=n(78),Ut=n(698);function Gt(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  user-select: none;\n  width: 900px;\n  height: 400px;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return Gt=function(){return e},e}function Wt(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 900px;\n  height: 400px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    overflow-y: auto;\n    background-color: white;\n    padding-top: 10px;\n\n    .row {\n      outline: none;\n      display: flex !important;\n      flex-direction: row;\n      margin: 0;\n      div {\n        flex: 4;\n      }\n      .multiplicity {\n        flex: 2;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n\n    .row:nth-child(odd) {\n      background: #fafafa;\n    }\n  }\n"]);return Wt=function(){return e},e}var Zt=Object(b.b)(Wt()),Kt=Object(b.b)(Gt()),Jt=function(e){var t=e.data,n=e.activeSpectrum,a=e.scaleX,r=e.startX,i=e.endX,o=e.onClose,c=Object(m.useState)(),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useState)(!1),f=Object(p.a)(d,2),g=f[0],h=f[1],v=Object(m.useState)(!1),O=Object(p.a)(v,2),y=O[0],x=O[1];return Object(m.useEffect)((function(){setTimeout((function(){h(!0)}),400)}),[]),Object(m.useEffect)((function(){if(n&&r&&i&&g){var e=t[n.index],o=e.x,c=e.info,l=e.y,s=a().invert(r),d=a().invert(i),f=z.b.getFromToIndex(o,{from:s,to:d}),p=f.fromIndex,b=f.toIndex,m={x:o.slice(p,b),y:l.slice(p,b)};try{var h=Object(Y.a)(m,{frequency:c.frequency,takeBestPartMultiplet:!0,symmetrizeEachStep:!0,debug:!0});x(!0),u(h)}catch(v){console.log(v)}}}),[r,i,t,a,n,g]),y?Object(b.c)("div",{css:Zt},Object(b.c)("div",{className:"header"},Object(b.c)("span",null,"Analyse Multiplet"),Object(b.c)("button",{onClick:o,type:"button"},Object(b.c)(Xt.v,null))),Object(b.c)("div",{className:"container"},s&&s.debug&&s.debug.steps.map((function(e,t){var n,a;return Object(b.c)("div",{key:t,className:"row"},Object(b.c)(Ut.a,{chart:{series:{type:"line",data:e.multiplet}},style:{height:200,width:400,overflow:"auto"}}),Object(b.c)("div",{className:"multiplicity"},Object(b.c)("p",null,s.j[t]?"".concat(null===(n=s.j[t])||void 0===n?void 0:n.multiplicity,": ").concat(null===(a=s.j[t])||void 0===a?void 0:a.coupling.toFixed(3)," Hz"):"")),Object(b.c)(Ut.a,{chart:{series:{type:"line",data:e.errorFunction}},style:{height:200,width:400,overflow:"auto"}}))})))):Object(b.c)("div",{css:Kt},Object(b.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3"},Object(b.c)("g",{fill:"#61DAFB"},Object(b.c)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(b.c)("path",{d:"M520.5 78.1z"}))),Object(b.c)("p",null,"Analyse Multiplet in progress. Please wait ..."))};Jt.defaultProps={onClose:function(){return null}};var qt=Jt,$t=n(205),Qt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ct.a.get(e,t,n)},en=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{slowZoomStep:2,fastZoomStep:8,speedThreshold:3};Object(w.a)(this,e),this.scale=t,this.speedThreshold=n.speedThreshold,this.slowZoomStep=n.slowZoomStep,this.fastZoomStep=n.fastZoomStep}return Object(D.a)(e,[{key:"wheel",value:function(e,t){var n=1===Math.abs(e).toString().length?Math.abs(e):Math.abs(e)/100,a=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t}("settings"),r=Qt(a,"conrtollers.mws.low"),i=Qt(a,"conrtollers.mws.high"),o=r?.01*r:.01*this.slowZoomStep,c=i?.05*i:.05*this.fastZoomStep,l=n<=this.speedThreshold?o:c,s=-1===Math.sign(e)?this.scale+l:this.scale-l;this.scale=s>=0||0===s?s:0}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}}]),e}(),tn=new en,nn=new en(.5),an="HORIZONTAL",rn="VERTICAL",on="STEP_HROZENTAL",cn=function(e,t,n){var a=e.height,r=e.margin,i=$t.h.translate(0,a-r.bottom).scale(n).translate(0,-(a-r.bottom));if(t.zoomFactor={scale:n},null===t.activeSpectrum)t.yDomains=Object.keys(t.yDomains).reduce((function(e,n){var o=Object($t.f)(t.originDomain.yDomains[n],[a-r.bottom,r.top]),c=i.rescaleY(o).domain();return e[n]=c,e}),{});else{var o=Object($t.f)(t.originDomain.yDomains[t.activeSpectrum.id],[a-r.bottom,r.top]),c=i.rescaleY(o).domain();t.yDomains[t.activeSpectrum.id]=c}},ln=function(e,t,n,a,r){var i=e.originDomain,o=e.tabActiveSpectrum[e.activeTab.split(",")[r]].id,c=$t.h.translate(0,n-a).scale(t).translate(0,-(n-a));e.zoomFactor={scale:t};var l=Object($t.f)(i.yDomains[o],[n-a,a]),s=c.rescaleY(l).domain();e.yDomains[o]=s},sn=function(e,t,n){if(n.activeSpectrum){var a=e.height,r=e.margin;if(n.originIntegralYDomain){var i=Object($t.f)(n.originIntegralYDomain,[a-r.bottom,r.top]),o=t<.1?.05:t,c=$t.h.translate(0,a-r.bottom).scale(o).translate(0,-(a-r.bottom)).rescaleY(i).domain();n.integralZoomFactor={scale:t};var l=n.activeSpectrum;n.integralsYDomains[l.id]=c}}},un=n(201);function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.width,a=t.margin,r=t.xDomains,i=t.xDomain,o=t.mode,c="RTL"===o?[n-a.right,a.left]:[a.left,n-a.right];return Object($t.f)(e?r[e]:i,c)}function fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.height,a=t.margin,r=t.verticalAlign,i=t.yDomain,o=t.yDomains,c=r.flag&&!r.stacked?n/2:n,l=[];return l=null===e||void 0===o[e]?[0,i[1]]:[0,o[e][1]],Object($t.f)(l,[c-a.bottom,a.top])}var pn={scaleX:null,scaleY:null};function bn(e,t){switch(t.type){case"SET_X_SCALE":return Object(un.a)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return dn(e,t)}}));case"SET_Y_SCALE":return Object(un.a)(e,(function(e){e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return fn(e,t)}}));default:return e}}var mn={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peaks Picking",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"Move spectrum horizontally",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},rangesPicking:{id:"rangesPicking",label:"Ranges Picking",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:Re.zeroFilling.id,label:Re.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:Re.phaseCorrection.id,label:Re.phaseCorrection.name,hasOptionPanel:!0,isFilter:!0},baseLineCorrection:{id:"baseLineCorrection",label:"baseline correction",hasOptionPanel:!0,isFilter:!0}},gn={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",zoom:"100%"},hn=[mn.zoom.id,mn.zeroFilling.id,mn.peakPicking.id,mn.integral.id,mn.phaseCorrection.id,mn.baseLineCorrection.id,mn.rangesPicking.id],vn=1,On=2,yn=3,xn=function(e){var t=e.brushType,n=e.dimensionBorder,a=e.width,r=e.height,i=ht(),o=i.width,c=i.height,l=i.selectedTool,s=Object(m.useContext)(lt),u=s.startX,d=s.endX,p=s.startY,b=s.endY,h=s.step;if(!hn.includes(l)||"brushing"!==h||!n||n.startX&&u<n.startX||n.startY&&p<n.startY||(n.endX&&1===Math.sign(d-u)?d>n.endX:d<n.startX)&&(n.endX&&1===Math.sign(b-p)?b>n.endY:b<n.startY))return null;o=a||o,c=r||c,d=n.endX&&d>n.endX?n.endX:n.startX&&d<n.startX?n.startX:d,b=n.endY&&b>n.endY?n.endY:n.startY&&b<n.startY?n.startY:b;var v=t===vn||t===yn?(d-u)/o:1;u=t===vn||t===yn?u:0;var O=t===On||t===yn?(b-p)/c:1;return p=t===On||t===yn?p:0,g.a.createElement("div",{style:Object(f.a)({},gn,{transform:"translate(".concat(u,"px, ").concat(p,"px) scale(").concat(v,",").concat(O,")")}),className:"moving-element"},g.a.createElement("svg",{width:o,height:c},g.a.createElement("rect",{x:"0",y:"0",width:o,height:c,fill:"gray",opacity:"0.2"})))};xn.defaultProps={brushType:yn,dimensionBorder:{startX:0,startY:0},width:null,height:null};var jn=xn,kn={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},En=[mn.zoom.id,mn.equalizerTool.id,mn.baseLineCorrection.id],Cn=function(){var e=ht(),t=e.height,n=e.width,a=e.margin,r=e.selectedTool,i=Object(m.useContext)(pt),o=Object(m.useContext)(lt);return!En.includes(r)||"brushing"===o.step||!i||i.x>n-a.right||i.y>t-a.bottom||!n||!t?null:g.a.createElement("div",{className:"moving-element",key:"crossLine",style:{cursor:"crosshair",transform:"translate(".concat(-n+i.x,"px, ").concat(-t+i.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t}},g.a.createElement("svg",{width:2*n,height:2*t},g.a.createElement("line",{style:kn.line,x1:n,y1:"0",x2:n,y2:2*t,key:"vertical_line"}),g.a.createElement("line",{style:kn.line,x1:"0",y1:t,x2:2*n,y2:t,key:"horizontal_line"})))};function wn(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #b8b8b857;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"]);return wn=function(){return e},e}var Dn=Object(b.b)(wn()),Sn=function(){var e=ht().baseLineZones,t=kt().scaleX,n=yt(),a=Object(m.useCallback)((function(e){n({type:"DELETE_BASE_LINE_ZONE",id:e})}),[n]),r=function(e){var t=e.id;return Object(b.c)(m.Fragment,null,Object(b.c)("svg",{className:"delete-button",x:-20,y:10,onClick:function(){return a(t)},"data-no-export":"true"},Object(b.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(b.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})))};return e&&Array.isArray(e)&&e.length>0&&Object(b.c)("g",null,e.map((function(e){return Object(b.c)("g",{key:e.id,transform:"translate(".concat(t()(e.to),",0)"),css:Dn},Object(b.c)(r,{id:e.id}),Object(b.c)("rect",{x:"0",width:"".concat(t()(e.from)-t()(e.to)),className:"zone-area"}))})))},Pn=n(1),Tn=n.n(Pn),In=n(220),An=n(517),Fn=n.n(An),Ln=function(e){var t=e.from,n=e.to,a=e.onDrag,r=e.onDrop,i=ht(),o=i.height,c=i.margin,l=i.mode,s=Object(m.useState)(!1),u=Object(p.a)(s,2),d=u[0],f=u[1],g=Object(m.useState)(!1),h=Object(p.a)(g,2),v=h[0],O=h[1],y=kt().scaleX,x=Object(m.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),f(!0),a&&a()}),[a]),j=Object(m.useCallback)((function(){}),[]),k=Object(m.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),f(!1);var a="RTL"===l?[y().invert(e.layerX),n]:[n,y().invert(e.layerX)];r(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,l,r,y,n]),E=Object(m.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),O(!0),a&&a()}),[a]),C=Object(m.useCallback)((function(){}),[]),w=Object(m.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),O(!1);var a="RTL"===l?[t,y().invert(e.layerX)]:[y().invert(e.layerX),t];r(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,l,r,y,n]);return Object(b.c)(m.Fragment,null,Object(b.c)(Fn.a,{axis:"x",defaultPosition:{x:y()(t),y:0},position:{x:y()(t),y:0},scale:1,onStart:x,onDrag:j,onStop:k},Object(b.c)("rect",{cursor:"ew-resize",width:d?1:6,fill:"red",height:o+c.top,style:{fillOpacity:d?1:0}})),Object(b.c)(Fn.a,{axis:"x",defaultPosition:{x:y()(n),y:0},position:{x:y()(n),y:0},scale:1,onStart:E,onDrag:C,onStop:w},Object(b.c)("rect",{cursor:"ew-resize",width:v?1:6,fill:"red",height:o+c.top,style:{fillOpacity:v?1:0}})))};function Rn(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  fill: #ff6f0057;\n\n  .target {\n    visibility: visible;\n  }\n"]);return Rn=function(){return e},e}function Nn(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .target {\n  //   visibility: visible !important;\n  //   cursor: pointer;\n  // }\n  .highlight {\n    fill: transparent;\n  }\n  .target {\n    visibility: hidden;\n  }\n"]);return Nn=function(){return e},e}var _n=Object(b.b)(Nn()),Mn=Object(b.b)(Rn()),zn=function(e){var t=e.spectrumID,n=e.integralSeries,a=e.integralData,r=ht(),i=r.height,o=r.margin,c=kt().scaleX,l=a.id,s=a.absolute,u=Object(In.b)([l]),d=Object(m.useMemo)((function(){return n?$t.c(n.x):[]}),[n]),p=yt(),g=Object(m.useCallback)((function(){p({type:"DELETE_INTEGRAL",integralID:l,spectrumID:t})}),[p,l,t]);var h=Object(m.useCallback)((function(e){p({type:"RESIZE_INTEGRAL",data:Object(f.a)({},a,{},e)})}),[p,a]);return Object(b.c)(m.Fragment,null,Object(b.c)("g",Object.assign({css:u.isActive?Mn:_n,"data-no-export":"true"},u.onHover),Object(b.c)("rect",{x:c()(d[1]),y:"0",width:"".concat(c()(d[0])-c()(d[1])),height:i-o.bottom,className:"highlight"}),u.isActive&&Object(b.c)("text",{x:c()(d[1]),y:i-o.bottom+30,fill:"black",style:{fontSize:"12px",fontWeight:"bold"}},s.toFixed(2)),Object(b.c)(Ln,{from:a.from,to:a.to,onDrop:h}),Object(b.c)((function(){return Object(b.c)("svg",{className:"target",x:"".concat(c()(d[1])-20),y:i-o.bottom-20,onClick:g,"data-no-export":"true",width:"16",height:"16"},Object(b.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(b.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null)))},Yn=function(e){var t=e.integralData,n=e.x,a=e.y,r=e.xDomain,i=e.isActive,o=e.spectrumID,c=e.scaleY,l=e.scaleX,s=t.from,u=t.to,d=Object(m.useState)(),f=Object(p.a)(d,2),b=f[0],h=f[1];Object(m.useEffect)((function(){var e=z.c.integral({x:n,y:a},{from:s,to:u,reverse:!0});h(e)}),[s,u,n,a]);var v=Object(m.useCallback)((function(){if(b&&c){var e=z.c.reduce(b,{from:r[0],to:r[1],nbPoints:200,optimize:!0}),t="M ".concat(l()(e.x[0])," ").concat(c(e.y[0]));return t+=e.x.slice(1).map((function(t,n){return" L ".concat(l()(t)," ").concat(c(e.y[n]))})).join("")}return""}),[b,l,c,r]);return g.a.createElement(m.Fragment,null,g.a.createElement("path",{className:"line",stroke:"black",fill:"none",style:{transformOrigin:"center top",opacity:i?1:.2},d:v()}),g.a.createElement(zn,{spectrumID:o,integralSeries:b,integralData:t,scaleY:c}))};function Vn(){var e=Object(d.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return Vn=function(){return e},e}var Bn=Object(b.b)(Vn()),Hn=function(){var e=ht(),t=e.xDomain,n=e.activeSpectrum,a=e.data,r=e.height,i=e.margin,o=e.integralsYDomains,c=kt().scaleX,l=Object(m.useMemo)((function(){return n&&o[n.id]?$t.f(o[n.id],[r-(i.bottom+.3*r),i.top]):null}),[n,r,o,i]),s=Object(m.useMemo)((function(){return a&&a[0]&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.isVisibleInDomain})).map((function(e){return e.integrals&&e.integrals.values&&e.integrals.values.map((function(a){return Object(b.c)("g",{key:a.id},Object(b.c)(Yn,{spectrumID:e.id,integralData:a,x:e.x,y:e.y,isActive:(r=e.id,null===n||r===n.id),xDomain:t,scaleY:l,scaleX:c}));var r}))}))}),[n,a,c,l,t]);return Object(b.c)("g",{css:Bn,clipPath:"url(#clip)"},s)},Xn=Hn;Hn.contextTypes={width:Tn.a.number,height:Tn.a.number,data:Tn.a.object,margin:Tn.a.shape({top:Tn.a.number.isRequired,right:Tn.a.number.isRequired,bottom:Tn.a.number.isRequired,left:Tn.a.number.isRequired}),xDomain:Tn.a.array,yDomain:Tn.a.array,getScale:Tn.a.func};var Un=function(e){var t=e.x,n=e.y,a=e.id,r=e.display,i=e.index,o=ht(),c=o.xDomain,l=o.activeSpectrum,s=o.verticalAlign,u=kt(),d=u.scaleX,f=u.scaleY,p=Object(m.useMemo)((function(){return null===l||a===l.id}),[l,a]),b=Object(m.useMemo)((function(){return s.flag?s.stacked?i*s.value:0:s.value}),[i,s.flag,s.stacked,s.value]),h=Object(m.useMemo)((function(){if(t&&n){var e=z.c.reduce({x:t,y:n},{from:c[0],to:c[1]}),r=f(a),i=d(),o="M ".concat(i(e.x[0])," ").concat(r(e.y[0])," ");return o+=e.x.slice(1).reduce((function(t,n,a){return t+=" L ".concat(i(n)," ").concat(r(e.y[a+1]))}),"")}return null}),[a,d,f,t,c,n]);return g.a.createElement("path",{className:"line",key:a,stroke:r.color,fill:"none",style:{opacity:p?1:.2},d:h,transform:"translate(0,-".concat(b,")")})};function Gn(){var e=Object(d.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return Gn=function(){return e},e}var Wn=Object(b.b)(Gn()),Zn=function(){var e=ht(),t=e.data,n=e.tempData,a=n||t;return Object(b.c)("g",{css:Wn,clipPath:"url(#clip)"},a&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.isVisibleInDomain})).map((function(e,t){return Object(b.c)(Un,Object.assign({key:e.id},e,{index:t}))})))},Kn=n(214),Jn={"1h":{peakLabelNumberDecimals:2},"13c":{peakLabelNumberDecimals:1}};function qn(e){return Jn[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1h";if(e=e.toLowerCase(),!Jn[e])return"1h";return e}(e)].peakLabelNumberDecimals}function $n(){var e=Object(d.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .delete-bt {\n    background-color: red;\n    color: white;\n    border: 0px;\n    border-radius: 15px;\n    padding: 0px;\n    width: 15px;\n    height: 15px;\n    border: 15px;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return $n=function(){return e},e}var Qn=Object(b.b)($n()),ea=function(e){var t=e.xIndex,n=e.id,a=e.spectrumID,r=e.x,i=e.y,o=e.value,c=e.color,l=e.isActive,s=e.decimalFraction,u=Object(m.useRef)(),d=Object(m.useState)(!1),f=Object(p.a)(d,2),g=f[0],h=f[1],v=Object(m.useState)(o),O=Object(p.a)(v,2),y=O[0],x=O[1],j=Object(m.useState)({width:0,height:0}),k=Object(p.a)(j,2),E=k[0],C=k[1],w=Object(m.useState)({id:null,flag:!1}),D=Object(p.a)(w,2),S=D[0],P=D[1],T=Object(In.b)([n]),I=yt(),A=Object(m.useCallback)((function(e){return I({type:"SHIFT_SPECTRUM",shiftValue:e.shiftValue})}),[I]),F=Object(m.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation(),I({type:"DELETE_PEAK_NOTATION",data:t})}),[I]);Object(m.useLayoutEffect)((function(){var e=u.current.getBBox();C({width:e.width,height:e.height})}),[g]),Object(m.useEffect)((function(){x(o)}),[o]);var L=Object(m.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(o),r=parseFloat(e.target.value)-parseFloat(o);A({id:t,value:n,oldValue:a,shiftValue:r}),e.target.blur(),h(!1)}else 27===e.keyCode&&(x(o),e.target.blur(),h(!1))}),[o,A,t]),R=Object(m.useCallback)((function(e){x(e.target.value)}),[]),N=Object(m.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),h(!0),!1}),[]),_=Object(m.useCallback)((function(e){P({id:e,flag:!0})}),[]),M=Object(m.useCallback)((function(){setTimeout((function(){P({id:null,flag:!1})}),200)}),[]);return Object(b.c)(m.Fragment,null,Object(b.c)(b.a,{styles:Qn}),Object(b.c)("g",{id:t,transform:"translate(".concat(r,", ").concat(i,")"),onMouseEnter:function(){_(t),T.show()},onMouseLeave:function(){M(),T.hide()}},Object(b.c)("line",{x1:"0",x2:"0",y1:"0",y2:"-18",stroke:c,strokeWidth:T.isActive?"7px":"1px"}),Object(b.c)("text",{className:"regular-text",ref:u,x:"0",y:-10,dy:"0.1em",dx:"0.35em",fill:"transparent"},g?o:parseFloat(o).toFixed(s)),Object(b.c)("foreignObject",{x:"0",y:-20,dy:"0.1em",dx:"0.35em",width:E.width+20,height:E.height+30,"data-no-export":"true"},Object(b.c)("div",{style:{width:E.width+20,height:E.height,paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml"},Object(b.c)("input",{onClick:N,className:g?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:g?"1px solid ".concat(c):"0",opacity:l?1:.2,userSelect:"none",color:c},value:g?y:parseFloat(y).toFixed(s),onKeyDown:L,onChange:R,type:"number",disabled:!l}),S.id&&!0===S.flag&&Object(b.c)("button",{type:"button",onClick:function(e){return F(e,{xIndex:t,id:a})},className:"delete-bt",style:{left:E.width,top:E.height+7}},Object(b.c)(Xt.o,null))))))},ta=function(){var e=ht(),t=e.data,n=e.activeSpectrum,a=e.verticalAlign,r=kt(),i=r.scaleX,o=r.scaleY,c=Object(m.useMemo)((function(){var e=function(e){var n=t.findIndex((function(t){return t.id===e}));return a.flag?a.stacked?(n+1)*a.value:0:a.value};return t&&function(){var e=Object(Kn.a)(t);return n?e.sort((function(e,t){return e.id===n.id?1:t.id===n.id?-1:0})):e}().filter((function(e){return!0===e.display.isVisible&&!0===e.isVisibleInDomain})).map((function(t){return t.peaks&&t.peaks.values&&t.display.isPeaksMarkersVisible&&g.a.createElement("g",{key:t.id,transform:"translate(0,-".concat(e(t.id),")")},t.peaks.values.map((function(e){var a=e.xIndex,r=e.xShift,c=e.id;return g.a.createElement(ea,{key:c,x:i()(t.x[a]-(r||0)),y:o(t.id)(t.y[a])-5,xIndex:a,id:c,spectrumID:t.id,value:t.x[a],color:"#730000",decimalFraction:qn(t.info.nucleus),isActive:null!=n&&n.id===t.id})})))}))}),[t,a,n,i,o]);return g.a.createElement("g",{className:"peaks",clipPath:"url(#clip)"},c)};function na(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]);return na=function(){return e},e}function aa(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]);return aa=function(){return e},e}var ra=Object(b.b)(aa()),ia=Object(b.b)(na()),oa=function(e){var t=e.rangeData,n=t.id,a=t.from,r=t.to,i=t.absolute,o=Object(In.b)([n]),c=kt().scaleX,l=yt(),s=Object(m.useCallback)((function(){l({type:"DELETE_RANGE",rangeID:n})}),[l,n]),u=Object(m.useCallback)((function(e){l({type:"RESIZE_RANGE",data:Object(f.a)({},t,{},e)})}),[l,t]);return Object(b.c)("g",Object.assign({css:o.isActive?ia:ra,key:n},o.onHover),Object(b.c)("g",{transform:"translate(".concat(c()(r),",10)")},Object(b.c)("rect",{x:"0",width:c()(a)-c()(r),height:"6",className:"range-area",fill:"green"}),Object(b.c)("text",{textAnchor:"middle",x:(c()(a)-c()(r))/2,y:"20",fontSize:"10",fill:"red"},i.toFixed(1))),Object(b.c)(Ln,{from:t.from,to:t.to,onDrop:u}),Object(b.c)((function(){return Object(b.c)("svg",{className:"delete-button",x:c()(r)-20,y:10,onClick:function(){return s()},"data-no-export":"true",width:"16",height:"16"},Object(b.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(b.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null))},ca=function(){var e=ht().data,t=Object(m.useMemo)((function(){return e&&e[0]&&e.filter((function(e){return!0===e.display.isVisible&&e.ranges&&e.ranges.values}))}),[e]);return g.a.createElement("g",{clipPath:"url(#clip)"},t.map((function(e){return g.a.createElement("g",{key:e.id},e.ranges.values.map((function(e){return g.a.createElement(oa,{key:e.id,rangeData:e})})))})))};function la(){var e=Object(d.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"]);return la=function(){return e},e}function sa(){var e=Object(d.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]);return sa=function(){return e},e}var ua=Object(b.b)(sa()),da=Object(b.b)(la()),fa=function(e){var t=e.label,n=e.show,a=e.showGrid,r=e.mode,i=ht(),o=i.xDomain,c=i.height,l=i.width,s=i.margin,u=kt().scaleX,d=Object(m.useRef)(),f=Object(m.useRef)();t=t||("RTL"===r?"\u03b4 [ppm]":"time [s]"),Object(m.useEffect)((function(){var e=$t.a().ticks(8).tickFormat($t.d("0")),t=$t.a().ticks(50).tickSize(-(c-s.top-s.bottom)).tickFormat("");n&&u&&($t.g(d.current).call(e.scale(u().domain(o))),$t.g(f.current).call(t.scale(u().domain(o))))}),[c,s.bottom,s.top,u,n,o]);var p=Object(m.useMemo)((function(){return n&&!0===n&&Object(b.c)("g",{className:"x",css:ua,transform:"translate(0,".concat(c-s.bottom,")"),ref:d},Object(b.c)("text",{fill:"#000",x:l-60,y:"20",dy:"0.71em",textAnchor:"end"},t))}),[c,t,s.bottom,n,l]),h=Object(m.useMemo)((function(){return a&&!0===a&&Object(b.c)("g",{css:da,className:"grid",ref:f,transform:"translate(0,".concat(c-s.bottom,")")})}),[a,c,s.bottom]);return l&&c&&u?Object(b.c)(g.a.Fragment,null,p,h):null};fa.defaultProps={showGrid:!1,show:!0,label:""};var pa=fa;var ba=g.a.forwardRef((function(e){var t=e.mode,n=e.width,a=e.height,r=e.margin;return n&&a?g.a.createElement("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"nmrSVG"},g.a.createElement("defs",null,g.a.createElement("clipPath",{id:"clip"},g.a.createElement("rect",{width:"".concat(n-r.left-r.right),height:"".concat(a),x:"".concat(r.left),y:"".concat(0)}))),g.a.createElement(Zn,null),g.a.createElement(Xn,null),g.a.createElement(ta,null),g.a.createElement(ca,null),g.a.createElement(Sn,null),g.a.createElement("g",{className:"container",style:{pointerEvents:"none"}},g.a.createElement(pa,{showGrid:!0,mode:t}))):null}));function ma(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"]);return ma=function(){return e},e}var ga=Object(b.b)(ma()),ha=function(){var e=Object(m.useContext)(pt),t=Object(m.useContext)(lt),n=t.startX,a=t.endX,r=t.step,i=ht(),o=i.margin,c=i.width,l=i.height,s=i.activeSpectrum,u=i.data,d=kt(),f=d.scaleX,p=d.scaleY,g=Object(m.useCallback)((function(e){if(s){var t=z.b.findClosestIndex(u[s.index].x,f().invert(e));return u[s.index].y[t]}return 1}),[s,u,f]);if(!s||!e||e.y<o.top||e.x<o.left||e.x>c-o.right||e.y>l-o.bottom)return Object(b.c)("div",{css:ga});var h=u[s.index].info.frequency;return Object(b.c)("div",{css:ga},Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," X :"),Object(b.c)("span",{className:"value"},f().invert(e.x).toPrecision(6)),Object(b.c)("span",{className:"unit"},"ppm")),h&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," X :"),Object(b.c)("span",{className:"value"},(f().invert(e.x)*h).toPrecision(6)),Object(b.c)("span",{className:"unit"},"Hz")),Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," Y :"),Object(b.c)("span",{className:"value"},p(s.id).invert(e.y).toFixed(2))),"brushing"===r&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," \u0394ppm :"),Object(b.c)("span",{className:"value"},(f().invert(n)-f().invert(a)).toPrecision(6))),h&&"brushing"===r&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," \u0394Hz :"),Object(b.c)("span",{className:"value"},((f().invert(n)-f().invert(a))*h).toPrecision(5))),"brushing"===r&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," ratio :"),Object(b.c)("span",{className:"value"},(g(n)/(g(a)||Number.MIN_VALUE)*100).toFixed(2),"%")))},va=10,Oa="#1f1f1f",ya=1,xa=0,ja=1,ka=function(){var e=ht(),t=e.height,n=e.width,a=e.margin,r=e.activeSpectrum,i=e.data,o=e.mode,c=e.selectedTool,l=e.verticalAlign,s=kt(),u=s.scaleX,d=s.scaleY,f=Object(m.useContext)(pt),b=Object(m.useContext)(lt),h=Object(m.useState)(),v=Object(p.a)(h,2),O=v[0],y=v[1];return Object(m.useEffect)((function(){var e=function(e,t){if(r&&f&&c===mn.peakPicking.id){var n=[u().invert(t.x-e),u().invert(t.x+e)].sort((function(e,t){return e-t})),a=i.find((function(e){return e.id===r.id})),o=a.x.findIndex((function(e){return e>=n[1]}))-1,s=a.x.findIndex((function(e){return e>=n[0]})),p=a.y.slice(s,o);if(p&&p.length>0){var b=Object(_.a)(p),m=p.findIndex((function(e){return e===b})),g=a.x[s+m];return{x:u()(g),y:d(r.id)(b)-(r?l.flag?l.stacked?(r.index+1)*l.value:0:l.value:0),xIndex:s+m}}}return null}(10,f);y(e)}),[r,i,o,f,u,d,c,l]),c!==mn.peakPicking.id||!O||!r||"brushing"===b.step||!f||f.y<a.top||f.left<a.left||f.x>n-a.right||f.y>t-a.bottom?null:g.a.createElement("div",{key:"peakPointer",style:{cursor:"crosshair",transform:"translate(".concat(O.x,"px, ").concat(O.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(va+ja),left:-(va+ja),pointerEvents:"none",overflow:"visible"}},g.a.createElement("svg",{width:2*va+2*ja,height:2*va+2*ja},g.a.createElement("circle",{cx:va+ja,cy:va+ja,r:va,stroke:Oa,strokeWidth:ya,fillOpacity:xa}),g.a.createElement("line",{x1:va+ja,y1:ja,x2:va+ja,y2:2*va+ja,stroke:Oa,strokeWidth:ya}),g.a.createElement("line",{x1:ja,y1:va+ja,x2:2*va+ja,y2:va+ja,stroke:Oa,strokeWidth:ya})))},Ea={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"},Ca=function(){var e=ht(),t=e.height,n=e.selectedTool,a=e.pivot,r=kt().scaleX;return mn.phaseCorrection.id!==n?null:g.a.createElement("div",{style:Object(f.a)({},Ea,{transform:"translate(".concat(r()(a),"px, 0px)"),height:t})})},wa={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"},Da=function(){var e=ht(),t=e.height,n=e.width,a=e.margin,r=e.data,i=e.activeSpectrum,o=kt().scaleX,c=Object(m.useContext)(pt),l=Object(m.useContext)(lt),s=Object(m.useCallback)((function(e){var t=r.find((function(e){return e.id===i.id}));if(t)return o().invert(e).toFixed(qn(t.info.nucleus))}),[r,i,o]);return!i||"brushing"===l.step||!c||c.y<a.top||c.x<a.left||c.x>n-a.right||c.y>t-a.bottom?null:g.a.createElement("div",{key:"xLabelPointer",style:Object(f.a)({},wa,{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")})},g.a.createElement("span",null,s(c.x)))},Sa=function(){var e=ht(),t=e.selectedTool,n=e.isLoading,a=e.data,r=e.mode,i=e.width,o=e.height,c=e.margin,l=e.activeSpectrum,s=e.xDomain,u=e.xDomains,d=e.yDomain,b=e.yDomains,h=e.verticalAlign,v=yt(),O=_t(),y=Object(m.useReducer)(bn,pn),x=Object(p.a)(y,2),j=x[0],k=x[1];Object(m.useEffect)((function(){k({type:"SET_Y_SCALE",yDomain:d,yDomains:b,margin:c,height:o,verticalAlign:h})}),[o,c,h,d,b]),Object(m.useEffect)((function(){k({type:"SET_X_SCALE",xDomain:s,xDomains:u,width:i,margin:c,mode:r})}),[c,i,s,u,r]);var E=Object(m.useCallback)((function(e){if(e.altKey)switch(t){case mn.rangesPicking.id:O.show(g.a.createElement(qt,Object.assign({data:a,activeSpectrum:l,scaleX:j.scaleX},e)),{onClose:function(){O.close()}})}else if(e.shiftKey)switch(t){case mn.integral.id:v(Object(f.a)({type:"ADD_INTEGRAL"},e));break;case mn.rangesPicking.id:v(Object(f.a)({type:"ADD_RANGE"},e));break;case mn.peakPicking.id:v(Object(f.a)({type:"ADD_PEAKS"},e))}else switch(t){case mn.baseLineCorrection.id:v({type:"ADD_BASE_LINE_ZONE",zone:{from:e.startX,to:e.endX}});break;default:return void v(Object(f.a)({type:"BRUSH_END"},e))}}),[t,O,a,l,j.scaleX,v]),C=Object(m.useCallback)((function(){v({type:"FULL_ZOOM_OUT",zoomType:on})}),[v]),w=Object(m.useCallback)((function(e){switch(t){case mn.integral.id:v(Object(f.a)({type:"CHANGE_INTEGRAL_ZOOM"},e));break;default:return void v(Object(f.a)({type:"SET_ZOOM_FACTOR"},e))}}),[v,t]),D=Object(m.useCallback)((function(e){t===mn.peakPicking.id?v({type:"ADD_PEAK",mouseCoordinates:e}):t===mn.phaseCorrection.id&&v({type:"SET_VERTICAL_INDICATOR_X_POSITION",position:e.x})}),[v,t]),S=Object(rt.a)((function(){return g.a.createElement(m.Fragment,null,g.a.createElement(Ht,{isLoading:n}),a&&a.length>0&&g.a.createElement(dt,{onBrush:E,onDoubleClick:C,onClick:D,onZoom:w,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"}},g.a.createElement(bt,{style:{width:"100%",height:"100%",position:"absolute"}},g.a.createElement(Cn,null),g.a.createElement(jn,{brushType:vn}),g.a.createElement(Da,null),g.a.createElement(ka,null),g.a.createElement(Ca,null),g.a.createElement(ha,null),g.a.createElement(ba,{width:i,height:o,margin:c,mode:r}))))}),[]),P=Object(p.a)(S,2),T=P[0],I=P[1],A=I.width,F=I.height,L=Object(m.useState)(),R=Object(p.a)(L,2),N=R[0],_=R[1];return Object(it.a)((function(){return _({width:A,height:F})}),400,[A,F]),Object(m.useEffect)((function(){N&&v(Object(f.a)({type:"SET_DIMENSIONS"},N))}),[v,N]),g.a.createElement(jt,{value:j},T)},Pa={TOP_1D:"TOP_1D",LEFT_1D:"LEFT_1D",CENTER_2D:"CENTER_2D"};function Ta(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++){var r=a[n];if(t.startX>=e[r].startX&&t.startX<=e[r].endX&&t.startY>=e[r].startY&&t.startY<=e[r].endY)return r}return null}function Ia(e){var t=e.width,n=e.margin,a=e.xDomain;return Object($t.f)(a,[t-n.right,n.left])}function Aa(e){var t=e.height,n=e.margin,a=e.yDomain;return Object($t.f)(a,[n.top,t-n.bottom])}function Fa(e,t){if(![Pa.TOP_1D,Pa.LEFT_1D].includes(t))throw new Error("layout is required and must be ".concat(Pa.TOP_1D," or ").concat(Pa.LEFT_1D,"  "));switch(t){case Pa.TOP_1D:var n=e.width,a=e.margin,r=e.xDomain;return Object($t.f)(r,[n-a.right,a.left]);case Pa.LEFT_1D:var i=e.height,o=e.margin,c=e.yDomain;return Object($t.f)(c,[i-o.bottom,o.top])}}function La(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object($t.f)(e,[t-n,n])}var Ra=function(){var e=ht(),t=e.margin,n=e.width,a=e.height,r=e.xDomain,i=e.yDomain,o=e.data,c=e.contours,l=function(e){var o=Ia({margin:t,width:n,xDomain:r}),c=Aa({margin:t,height:a,yDomain:i}),l=" M ".concat(o(e[0].x)," ").concat(c(e[0].y)," ");return l+=e.slice(1).reduce((function(e,t){return e+=" L ".concat(o(t.x)," ").concat(c(t.y)," ")}),""),l+=" z"};return g.a.createElement("g",{clipPath:"url(#clip)"},o.filter((function(e){return 2===e.info.dimension&&!0===e.display.isVisible})).map((function(e){var t=[e.display.positiveColor,e.display.negativeColor];return c[e.id].map((function(e,n){return e.map((function(e,a){return g.a.createElement("path",{key:a,fill:"none",stroke:t[n],strokeWidth:"1",d:l(e)})}))}))})))},Na=Object(m.memo)((function(e){var t=e.margin,n=e.data,a=ht(),r=a.height,i=a.margin,o=a.yDomain,c=a.yDomains,l=i.left,s=Object(m.useMemo)((function(){if(n){var e=Fa({height:r,yDomain:o,margin:i},Pa.LEFT_1D),a=La(c[n.id],l,t),s=n.x,u=n.y,d=z.c.reduce({x:s,y:u},{from:o[0],to:o[1]}),f="M ".concat(e(d.x[0])," ").concat(a(d.y[0])," ");return f+=d.x.slice(1).reduce((function(t,n,r){return t+=" L ".concat(e(n)," ").concat(a(d.y[r+1]))}),"")}return null}),[n,l,i,t,r,o,c]),u=r-i.bottom-i.top;return u&&l?g.a.createElement("svg",{viewBox:"0 0 ".concat(l," ").concat(u+i.top),width:l,height:u+i.top},g.a.createElement("defs",null,g.a.createElement("clipPath",{id:"clip-left"},g.a.createElement("rect",{width:u,height:l,x:i.top,y:"".concat(0)}))),g.a.createElement("g",{clipPath:"url(#clip-left)",style:{transform:"rotate(-90deg) translate(-".concat(i.top,"px,-").concat(u+i.top,"px)"),transformOrigin:"".concat(u+i.top,"px 0px")}},g.a.createElement("path",{className:"line",stroke:"black",fill:"none",d:s}))):null}));Na.defaultProps={margin:10};var _a=Na,Ma=Object(m.memo)((function(e){var t=e.margin,n=e.data,a=ht(),r=a.width,i=a.margin,o=a.xDomain,c=a.yDomains,l=i.top,s=Object(m.useMemo)((function(){if(n){var e=Fa({width:r,xDomain:o,margin:i},Pa.TOP_1D),a=La(c[n.id],l,t),s=n.x,u=n.y,d=z.c.reduce({x:s,y:u},{from:o[0],to:o[1]}),f="M ".concat(e(d.x[0])," ").concat(a(d.y[0])," ");return f+=d.x.slice(1).reduce((function(t,n,r){return t+=" L ".concat(e(n)," ").concat(a(d.y[r+1]))}),"")}return null}),[n,l,t,i,r,o,c]);return r&&l?g.a.createElement("svg",{viewBox:"0 0 ".concat(r," ").concat(l),width:r,height:l},g.a.createElement("defs",null,g.a.createElement("clipPath",{id:"clip-top"},g.a.createElement("rect",{width:r-i.left-i.right,height:l,x:i.left,y:"".concat(0)}))),g.a.createElement("g",{clipPath:"url(#clip-top)"},g.a.createElement("path",{className:"line",stroke:"red",fill:"none",d:s}))):null}));Ma.defaultProps={margin:10};var za=Ma;function Ya(){var e=Object(d.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]);return Ya=function(){return e},e}var Va=Object(b.b)(Ya()),Ba=Object(m.memo)((function(e){var t=e.show,n=e.label,a=e.margin,r=ht(),i=r.xDomain,o=r.height,c=r.width,l=r.margin,s=r.tabActiveSpectrum,u=r.activeTab,d=Object(m.useRef)();Object(m.useEffect)((function(){var e=$t.a().ticks(8).tickFormat($t.d("0"));if(t){var n=Ia({width:c,margin:l,xDomain:i});$t.g(d.current).call(e.scale(n))}}),[u,o,l,l.bottom,l.left,l.right,l.top,t,s,c,i]);var f=Object(m.useMemo)((function(){return t&&!0===t&&Object(b.c)("g",{className:"x",css:Va,transform:"translate(0,".concat(o-(l.bottom+a.bottom),")"),ref:d},Object(b.c)("text",{fill:"#000",x:c-60,y:"20",dy:"0.71em",textAnchor:"end"},n))}),[o,n,l.bottom,a.bottom,t,c]);return c&&o?f:null}));Ba.propTypes={margin:Tn.a.shape({top:Tn.a.number.isRequired,right:Tn.a.number.isRequired,bottom:Tn.a.number.isRequired,left:Tn.a.number.isRequired}),show:Tn.a.bool,label:Tn.a.string},Ba.defaultProps={show:!0,label:"\u03b4 [ppm]",margin:{right:100,top:0,left:0,bottom:0}};var Ha=Ba;function Xa(){var e=Object(d.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"]);return Xa=function(){return e},e}var Ua=Object(b.b)(Xa()),Ga=Object(m.memo)((function(e){var t=e.show,n=e.label,a=e.margin,r=Object(m.useRef)(),i=ht(),o=i.yDomain,c=i.width,l=i.height,s=i.activeTab,u=i.tabActiveSpectrum,d=i.margin;Object(m.useEffect)((function(){var e=$t.b().ticks(8).tickFormat($t.d("0"));if(t&&o){var n=Aa({height:l,yDomain:o,margin:d});$t.g(r.current).call(e.scale(n))}}),[t,o,s,u,l,d]);var f=Object(m.useMemo)((function(){return t&&!0===t&&Object(b.c)(m.Fragment,null,Object(b.c)("g",{className:"y",css:Ua,transform:"translate(".concat(c-a.right,")"),ref:r},Object(b.c)("text",{fill:"#000",x:-a.top,y:-(a.right-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end"},n)))}),[n,a.right,a.top,t,c]);return c&&l?f:null})),Wa=Ga;Ga.contextTypes={showGrid:Tn.a.bool,show:Tn.a.bool,label:Tn.a.string,margin:Tn.a.shape({top:Tn.a.number,right:Tn.a.number,bottom:Tn.a.number,left:Tn.a.number})},Ga.defaultProps={show:!0,label:"",margin:{right:50,top:0,bottom:0,left:0}};var Za=function(e){var t=e.data,n=ht(),a=n.width,r=n.height,i=n.margin;return Object(m.useMemo)((function(){return g.a.createElement("svg",{viewBox:"0 0 ".concat(a," ").concat(r),width:a,height:r,id:"nmrSVG"},g.a.createElement("defs",null,g.a.createElement("clipPath",{id:"clip"},g.a.createElement("rect",{width:a-i.left-i.right,height:r-i.top-i.bottom,x:i.left,y:i.top}))),g.a.createElement("rect",{width:a-i.left-i.right,height:r-i.top-i.bottom,x:i.left,y:i.top,stroke:"black",strokeWidth:"1",fill:"transparent"}),t&&t[0]&&g.a.createElement(za,{data:t[0]}),t&&t[1]&&g.a.createElement(_a,{data:t[1]}),g.a.createElement(Ra,null),g.a.createElement("g",{className:"container",style:{pointerEvents:"none"}},g.a.createElement(Ha,null),g.a.createElement(Wa,null)))}),[a,r,i.left,i.right,i.top,i.bottom,t])};Za.defaultProps={onDimensionChange:function(){return null}},Za.propsTypes={onDimensionChange:Tn.a.func.isRequired};var Ka=Za,Ja=n(299);function qa(){var e=Object(d.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"]);return qa=function(){return e},e}var $a=Object(b.b)(qa()),Qa=function(e){var t=e.layout,n=e.data1D,a=Object(m.useContext)(pt),r=Object(m.useContext)(lt),i=r.startX,o=r.endX,c=r.startY,l=r.endY,s=r.step,u=ht(),d=u.margin,f=u.width,p=u.height,g=u.activeSpectrum,h=u.xDomain,v=u.yDomain,O=u.yDomains,y=u.activeTab,x=a&&Ta(t,{startX:a.x,startY:a.y}),j=y.split(","),k=Object(m.useMemo)((function(){if(!n||0===n.length)return Ia({width:f,margin:d,xDomain:h});switch(x){case Pa.TOP_1D:case Pa.CENTER_2D:return Ia({width:f,margin:d,xDomain:h});case Pa.LEFT_1D:return Aa({height:p,margin:d,yDomain:v});default:return null}}),[n,p,d,x,f,h,v]),E=Object(m.useMemo)((function(){if(!n||0===n.length)return Aa({height:p,margin:d,yDomain:v});switch(x){case Pa.CENTER_2D:return Aa({height:p,margin:d,yDomain:v});case Pa.TOP_1D:return La(O[n[0].id],d.top);case Pa.LEFT_1D:return La(O[n[1].id],d.left);default:return null}}),[n,p,d,x,v,O]);if(!g||!a||a.y<10||a.x<10||a.x>f-d.right||a.y>p-d.bottom)return Object(b.c)("div",{css:$a});var C=function(e){var t=null;if(x===Pa.TOP_1D?t=0:x===Pa.LEFT_1D&&(t=1),null!=t){var a=z.b.findClosestIndex(n[t].x,k.invert(e));return n[t].y[a]}return 1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(x){case Pa.CENTER_2D:case Pa.TOP_1D:return k.invert(e||a.x);case Pa.LEFT_1D:return k.invert(e||a.y);default:return 0}},D=function(e,t,n){return x===Pa.CENTER_2D?Object(b.c)(m.Fragment,null,e," ( ",Object(b.c)(Ja.a,{mf:n})," )"):t};return Object(b.c)("div",{css:$a},Object(b.c)("div",null,Object(b.c)("span",{className:"label"},D("F2","X",j[0])," :"),Object(b.c)("span",{className:"value"},w().toFixed(qn(j[0]))),Object(b.c)("span",{className:"unit"},"ppm")),Object(b.c)("div",null,Object(b.c)("span",{className:"label"},D("F1","Y",j[1])," :"),Object(b.c)("span",{className:"value"},function(){switch(x){case Pa.CENTER_2D:case Pa.TOP_1D:return E.invert(a.y);case Pa.LEFT_1D:return E.invert(a.x);default:return 0}}().toFixed(qn(j[1]))),Object(b.c)("span",{className:"unit"},"ppm")),"brushing"===s&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," \u0394ppm :"),Object(b.c)("span",{className:"value"},function(){switch(x){case Pa.TOP_1D:return(w(i)-w(o)).toPrecision(6);case Pa.LEFT_1D:return(w(c)-w(l)).toPrecision(6);default:return 0}}())),"brushing"===s&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," ratio :"),Object(b.c)("span",{className:"value"},function(){switch(x){case Pa.TOP_1D:return(C(i)/(C(o)||Number.MIN_VALUE)*100).toFixed(2);case Pa.LEFT_1D:return(C(c)/(C(l)||Number.MIN_VALUE)*100).toFixed(2);default:return 0}}(),"%")))},er=function(){var e=ht(),t=e.selectedTool,n=e.isLoading,a=e.data,r=e.margin,i=e.tabActiveSpectrum,o=e.activeTab,c=yt(),l=Object(m.useRef)(),s=Object(m.useMemo)((function(){return o.split(",").reduce((function(e,t){if(i[t]&&i[t].id){var n=i[t].id,r=a.find((function(e){return e.id===n}));r&&e.push(r)}return e}),[])}),[o,a,i]),u=function(e){var t=e.width,n=e.height,a=e.margin;return{CENTER_2D:{startX:a.left,startY:a.top,endX:t-a.right,endY:n-a.bottom},TOP_1D:{startX:a.left,startY:0,endX:t-a.right,endY:a.top},LEFT_1D:{startX:0,startY:a.top,endX:a.left,endY:n-a.bottom}}}(e),d=Object(m.useCallback)((function(e){if(Ta(u,e))if(e.altKey)t;else{if(!e.shiftKey)return void c(Object(f.a)({type:"BRUSH_END"},e,{trackID:Ta(u,e)}))}}),[t,c,u]),b=Object(m.useCallback)((function(e){var t=e.x,n=e.y,a=Ta(u,{startX:t,startY:n});a&&c({type:"FULL_ZOOM_OUT",trackID:a})}),[u,c]),h=function(e){var t=e.x,n=e.y,a=Ta(u,{startX:t,startY:n});a&&c("CENTER_2D"===a?Object(f.a)({type:"SET_2D_LEVEL"},e):Object(f.a)({type:"SET_ZOOM_FACTOR"},e,{trackID:a}))},v=Object(m.useCallback)((function(e){t===mn.peakPicking.id?c({type:"ADD_PEAK",mouseCoordinates:e}):t===mn.phaseCorrection.id&&c({type:"SET_VERTICAL_INDICATOR_X_POSITION",position:e.x})}),[c,t]),O=Object(rt.a)((function(){return g.a.createElement(m.Fragment,null,g.a.createElement(Ht,{isLoading:n}),a&&a.length>0&&g.a.createElement(dt,{onBrush:d,onDoubleClick:b,onClick:v,onZoom:h,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"}},g.a.createElement(bt,{style:{width:"100%",height:"100%",position:"absolute"}},g.a.createElement(Cn,null),g.a.createElement(jn,{brushType:yn,dimensionBorder:u.CENTER_2D}),s&&s.length>1&&g.a.createElement(g.a.Fragment,null,g.a.createElement(jn,{brushType:vn,dimensionBorder:u.TOP_1D,height:r.top}),g.a.createElement(jn,{brushType:On,dimensionBorder:u.LEFT_1D,width:r.left})),s&&g.a.createElement(Qa,{data1D:s,layout:u}),g.a.createElement(Ka,{ref:l,data:s}))))}),[]),y=Object(p.a)(O,2),x=y[0],j=y[1],k=j.width,E=j.height,C=Object(m.useState)(),w=Object(p.a)(C,2),D=w[0],S=w[1];return Object(it.a)((function(){return S({width:k,height:E})}),400,[k,E]),Object(m.useEffect)((function(){D&&D.width!==1/0&&D.height!==1/0&&c(Object(f.a)({type:"SET_DIMENSIONS"},D))}),[c,D]),x},tr=n(40),nr=n(23),ar={container:{margin:"25px"},header:{backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",fontSize:"30px",textAlign:"center"},body:{whiteSpace:"pre-wrap",backgroundColor:"white",padding:"20px",borderRadius:"10px",color:"red"}},rr=function(e){Object(nr.a)(n,e);var t=Object(tr.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(D.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?g.a.createElement("div",{style:ar.container},g.a.createElement("p",{style:ar.header},"Something went wrong."),g.a.createElement("details",{style:ar.body},this.state.error&&this.state.error.toString(),g.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),n}(g.a.Component),ir=!1,or=function(e){var t=e.parentRef,n=ht().keysPreferences,a=yt(),r=Object(h.d)(),i=Object(m.useCallback)((function(e){"input"!==e.target.localName&&e.keyCode>=49&&e.keyCode<=57&&(ir?e.shiftKey?(a({type:"SET_KEY_PREFERENCES",keyCode:e.keyCode}),r.show("Configuration Reset")):n&&n[e.keyCode]?a({type:"APPLY_KEY_PREFERENCES",keyCode:e.keyCode}):(a({type:"SET_KEY_PREFERENCES",keyCode:e.keyCode}),r.show("Configuration saved")):r.show("The mouse cursor must be over the NMR displayer to use save configuration shortcuts  "))}),[a,n,r]),o=Object(m.useCallback)((function(){ir=!0}),[]),c=Object(m.useCallback)((function(){ir=!1}),[]);return Object(m.useEffect)((function(){var e=t?t.current:null;return t&&(e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",c)),function(){e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",c)}}),[o,c,t]),Object(m.useEffect)((function(){return document.addEventListener("keydown",i,!1),function(){document.removeEventListener("keydown",i,!1)}}),[i]),null},cr={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px"},lr=function(e){var t=e.style,n=e.className,a=e.popupPlacement,r=void 0===a?"right":a,i=e.children,o=e.title,c=e.offset,l=void 0===c?{x:0,y:0}:c,s=Object(m.useRef)(),u=Object(m.useRef)(),d=Object(m.useState)({x:0,y:0}),b=Object(p.a)(d,2),h=b[0],v=b[1],O=Object(m.useState)(!1),y=Object(p.a)(O,2),x=y[0],j=y[1];Object(m.useLayoutEffect)((function(){if(x){var e=function(){var e,t,n=s.current.getBoundingClientRect(),a=u.current.getBoundingClientRect();switch(r){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();v(e)}}),[r,x]);var k=Object(m.useCallback)((function(){j(!0)}),[]),E=Object(m.useCallback)((function(){j(!1)}),[]);return g.a.createElement("div",{style:{position:"relative",height:"100%"}},g.a.createElement("div",{ref:s,onMouseOver:k,onMouseOut:E,style:{width:"inherit",height:"inherit"}},i),g.a.createElement("div",{ref:u,style:Object(f.a)({},cr,{transform:"translate(".concat(h.x,"px,").concat(h.y,"px)"),zIndex:999999999,left:l.x,top:l.y,display:x?"block":"none"},t),className:n},g.a.createElement("span",{style:{pointerEvents:"none"}},o)))},sr=function(e){var t=e.label,n=e.activeTab,a=e.onClick,r="tab-list-item";n===t&&(r+=" tab-list-active");var i=Object(m.useCallback)((function(e){a(Object(f.a)({},e,{label:t}))}),[t,a]);return g.a.createElement("li",{className:r,onClick:i},t)};function ur(){var e=Object(d.a)(["\n  .tab-list {\n    border-bottom: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:first-of-type {\n    margin-left: 5px;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list-item {\n    display: inline-block;\n    list-style: none;\n    margin-bottom: -1px;\n    padding: 0.5rem 0.75rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 1px 0 1px;\n  }\n"]);return ur=function(){return e},e}var dr=Object(b.b)(ur()),fr=function(e){var t=e.children,n=e.onClick,a=e.defaultTabID,r=Object(m.useState)(),i=Object(p.a)(r,2),o=i[0],c=i[1];Object(m.useEffect)((function(){c(a)}),[a]);var l=Object(m.useCallback)((function(e){n(e.label),c(e.label)}),[n]),s=Object(m.useMemo)((function(){return m.Children.map(t,(function(e){var t=e.props.label;return Object(b.c)(sr,{activeTab:o,key:t,label:t,onClick:l})}))}),[o,t,l]),u=Object(m.useMemo)((function(){return m.Children.map(t,(function(e){return e.props.label!==o?Object(m.cloneElement)(e,{style:{display:"none"}}):Object(m.cloneElement)(e,{style:{display:"block"}})}))}),[o,t]);return Object(b.c)("div",{className:"tabs",css:dr},Object(b.c)("ol",{className:"tab-list"},s),Object(b.c)("div",{className:"tab-content"},u))};fr.defaultProps={onClick:function(){return null}};var pr=fr;function br(){var e=Object(d.a)(["\n  overflow: auto;\n  width: 600px;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 0 0px;\n    margin: 0px;\n    color: #000000;\n    place-items: normal;\n    text-transform: none;\n  }\n  .content {\n    width: 100%;\n    height: 250px;\n    border: none;\n    padding-top: 10px;\n  }\n\n  .inner-content {\n    padding: 15px;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  button {\n    border: none;\n    height: 100%;\n    padding: 0 20px;\n    background-color: #ffffff;\n    border-radius: 10px;\n    margin: 0px 5px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background-color: #2ca8ff;\n    padding: 8px 15px;\n    height: 50px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .input-label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n  }\n\n  .number-input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n  }\n"]);return br=function(){return e},e}var mr=Object(b.b)(br()),gr={},hr=function(e){var t=e.onClose,n=e.onSave,a=Object(m.useState)("Conrtollers"),r=Object(p.a)(a,2),i=r[0],o=r[1],c=function(e){var t=Object(m.useState)(localStorage.getItem(e)),n=Object(p.a)(t,2),a=n[0],r=n[1];return Object(m.useEffect)((function(){localStorage.setItem(e,a)}),[e,a]),[a?JSON.parse(a):{},r]}("settings"),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useCallback)((function(){u(JSON.stringify(gr)),n(),gr={}}),[n,u]),g=Object(m.useCallback)((function(e){o(e)}),[]),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Qt(s,e,t)},v=Object(m.useCallback)((function(e){var t=e.target.name.split("-"),n=Object(f.a)({},s,{},gr);n=2===t.length?ct.a.set(n,"".concat(i.toLowerCase(),".").concat(t[0],".").concat(t[1]),e.target.value):ct.a.set(n,"".concat(i.toLowerCase(),".").concat(t[0]),e.target.value),gr=n}),[i,s]);return Object(b.c)("div",{css:mr},Object(b.c)("h6",{className:"header"},"General Settings"),Object(b.c)("div",{className:"content"},Object(b.c)(pr,{defaultTabID:i,onClick:g},Object(b.c)("div",{className:"inner-content",label:"Conrtollers",key:"conrtollers"},Object(b.c)("p",{className:"section-header"},"Mouse Scroll Wheel Sensitivity"),Object(b.c)("span",{className:"input-label"},"Low"),Object(b.c)("input",{name:"mws-low",className:"number-input",type:"number",onChange:v,defaultValue:h("conrtollers.mws.low",2)}),Object(b.c)("span",{className:"input-label"},"High"),Object(b.c)("input",{name:"mws-high",className:"number-input",type:"number",onChange:v,defaultValue:h("conrtollers.mws.high",8)})))),Object(b.c)("div",{className:"footer-container"},Object(b.c)("button",{type:"button",onClick:t},"Close"),Object(b.c)("button",{type:"button",onClick:d},"Save")))},vr={lineHeight:2,userSelect:"none"},Or={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},yr=Object(m.forwardRef)((function(e,t){var n=e.label,a=e.name,r=e.defaultValue,i=e.style,o=e.onChange,c=e.onInput,l=e.pattern,s=e.step;return g.a.createElement(m.Fragment,null,g.a.createElement("span",{style:Object(f.a)({},vr,{},i.label)},n),g.a.createElement("input",{ref:t,name:a,style:Object(f.a)({},Or,{},i.input),type:"number",pattern:l,step:s,defaultValue:r,onChange:o,onInput:c}))}));yr.defaultProps={pattern:"^d*(.d{0,2})?$",step:"any",style:{label:{},input:{}},defaultValue:0,onChange:function(){return null},onInput:function(){return null}};var xr=yr,jr={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},kr=function(){var e=yt(),t=Object(m.useRef)(),n=Object(m.useRef)(),a=Object(m.useCallback)((function(){e({type:"AUTO_PEAK_PICKING",options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value}})}),[e]),r=Object(m.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return g.a.createElement("div",{style:jr.container},g.a.createElement(xr,{ref:n,label:"Max Number Of Peaks:",name:"maxNumberOfPeaks",style:{input:jr.input},defaultValue:50}),g.a.createElement(xr,{ref:t,label:"Min Max Ratio:",name:"minMaxRatio",style:{input:jr.input},defaultValue:.1,step:"0.1"}),g.a.createElement("button",{type:"button",style:jr.actionButton,onClick:a},"Apply"),g.a.createElement("button",{type:"button",style:jr.actionButton,onClick:r},"Cancel"))};function Er(){var e=Object(d.a)(["\n      position: relative;\n      padding: 0px 5px;\n      border: 0.55px solid #cacaca;\n      font-size: 14px;\n      width: ","px;\n      margin: 0;\n      height: 100%;\n      background: url(../img/br_down.png) no-repeat right white;\n      -webkit-appearance: none;\n      background-position-x: ","px;\n      background-size: 10px 10px;\n      border-radius: 5px;\n      margin: 0px 5px;\n      :focus,\n      input:focus {\n        outline: none;\n      }\n    "]);return Er=function(){return e},e}var Cr=g.a.forwardRef((function(e,t){var n=e.data,a=e.style,r=e.onChange,i=e.defaultValue,o=Object(m.useCallback)((function(e){r(e.target.value)}),[r]),c=Object(b.b)(Er(),a.width?a.width-5:115,a.width?a.width-18:97);return Object(b.c)("select",{css:[c,a],ref:t,onChange:o,defaultValue:i},n.map((function(e){return Object(b.c)("option",{key:"".concat(e.key),value:e.value},e.label)})))}));Cr.defaultProps={onChange:function(){return null},ref:null};var wr=Cr,Dr={container:{padding:"5px",height:"100%",display:"flex"},label:{lineHeight:2,userSelect:"none"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},Sr=function(){var e=yt(),t=Object(m.useRef)(),n=Object(m.useRef)(),a=Object(m.useRef)(),r=Object(m.useRef)(),i=Object(m.useState)("polynomial"),o=Object(p.a)(i,2),c=o[0],l=o[1],s=Object(m.useCallback)((function(){var i={};switch(c){case"airpls":i={algorithm:t.current.value,maxIterations:n.current.value,tolerance:a.current.value};break;case"polynomial":i={algorithm:t.current.value,degree:r.current.value}}e({type:"APPLY_BASE_LINE_CORRECTION_FILTER",options:i})}),[c,e]),u=Object(m.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]),d=Object(m.useCallback)((function(){return Object.keys(ee).map((function(e){return{key:e,label:ee[e],value:e}}))}),[]),f=Object(m.useCallback)((function(e){l(e)}),[]);return g.a.createElement("div",{style:Dr.container},g.a.createElement("span",{style:Dr.label},"Algorithm: "),g.a.createElement(wr,{ref:t,data:d(),style:{marginLeft:10,marginRight:10},onChange:f,defaultValue:"polynomial"}),c&&"airpls"===c&&g.a.createElement(m.Fragment,null,g.a.createElement(xr,{label:"maxIterations:",ref:n,name:"maxIterations",defaultValue:100}),g.a.createElement(xr,{label:"tolerance:",ref:a,name:"tolerance",defaultValue:.001})),c&&"autoPolynomial"===c&&g.a.createElement(xr,{label:"degree:",ref:r,name:"degree",defaultValue:3}),c&&"polynomial"===c&&g.a.createElement(xr,{label:"degree:",ref:r,name:"degree",defaultValue:3}),g.a.createElement("button",{type:"button",style:Dr.actionButton,onClick:s},"Apply"),g.a.createElement("button",{type:"button",style:Dr.actionButton,onClick:u},"Cancel"))},Pr={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},Tr={step:"initial"},Ir=null,Ar=1,Fr=0,Lr=!0;function Rr(e){Lr?(Fr=e.clientX,Lr=!1):(Ar=e.clientX-Fr,Fr=e.clientX,clearTimeout(Ir),Ir=setTimeout((function(){Ar=0}),50))}var Nr=function(e){var t=e.name,n=e.minValue,a=e.maxValue,r=e.value,i=e.onChange,o=e.label,c=e.style,l=e.className,s=e.noPropagation,u=Object(m.useCallback)((function(){"moving"!==Tr.step&&"start"!==Tr.step||(Tr=Object(f.a)({},Tr,{step:"start"===Tr.step?"initial":"end"}))}),[]),d=Object(m.useCallback)((function(e){s&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==Tr.step&&"end"!==Tr.step||(Tr={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[s]);return g.a.createElement("div",{style:Object(f.a)({},Pr.container,{},c),className:l,onMouseMove:function(e){if("start"===Tr.step||"moving"===Tr.step){var o=e.screenX,c=e.screenY;Tr=Object(f.a)({},Tr,{step:"moving",endX:Tr.startX+o-Tr.startScreenX,endY:Tr.startY+c-Tr.startScreenY}),Rr(e);var l=a-n,s=Tr.endX-Tr.startX,u=Math.abs(s)*(Math.abs(Ar)>3?l:5)/Tr.boundingRect.width;i({value:Ar>=0?r+Math.abs(u):r-u,name:t})}},onMouseUp:function(){"moving"!==Tr.step&&"start"!==Tr.step||(Tr=Object(f.a)({},Tr,{step:"start"===Tr.step?"initial":"end"}))},onMouseDown:d,onMouseEnter:u},g.a.createElement("span",{style:Pr.label},o))};Nr.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function(){return null},label:"Drag to Change the value",noPropagation:!0};var _r=Nr,Mr={lineHeight:2,userSelect:"none"},zr={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},Yr=Object(m.forwardRef)((function(e,t){var n=e.label,a=e.value,r=e.name,i=e.style,o=e.onChange;return g.a.createElement(m.Fragment,null,g.a.createElement("span",{style:Object(f.a)({},Mr,{},i.label)},n),g.a.createElement("input",{ref:t,name:r,style:Object(f.a)({},zr,{},i.input),type:"text",value:a,onChange:o}))}));Yr.defaultProps={style:{label:{},input:{}},value:"",onChange:function(){return null}};var Vr=Yr,Br={container:{padding:"5px",height:"100%",display:"flex"},input:{width:"100px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},Hr=function(){var e=yt(),t=Object(m.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(p.a)(t,2),a=n[0],r=n[1],i=Object(m.useCallback)((function(){e({type:"APPLY_MANUAL_PHASE_CORRECTION_FILTER",value:a})}),[e,a]),o=Object(m.useCallback)((function(t){var n=t.target.name;if(t.target){var i=parseFloat(t.target.value)||"-"===t.target.value.trim()?t.target.value:0;r((function(t){var r=Object(f.a)({},t,Object(N.a)({},n,i));if("-"!==i){var o=Object(f.a)({},a,Object(N.a)({},n,i-t[n]));for(var c in t)t[c]===o[c]&&(o[c]-=t[c]);e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:o})}return r}))}}),[e,a]),c=Object(m.useCallback)((function(t){var n=Object(f.a)({},a,Object(N.a)({},t.name,t.value)),i={};for(var o in a)i[o]=n[o]-a[o];e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:i}),r(n)}),[e,a]),l=Object(m.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return g.a.createElement("div",{style:Br.container},g.a.createElement(Vr,{label:"PH0:",name:"ph0",style:{input:Br.input},onChange:o,value:a.ph0}),g.a.createElement(Vr,{label:"PH1:",name:"ph1",style:{input:Br.input},onChange:o,value:a.ph1}),g.a.createElement(_r,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:c}),g.a.createElement(_r,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:c}),g.a.createElement("button",{type:"button",style:Br.actionButton,onClick:i},"Apply"),g.a.createElement("button",{type:"button",style:Br.actionButton,onClick:l},"Cancel"))},Xr={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}},Ur=function(){var e=yt(),t=Object(m.useCallback)((function(){e({type:"AUTO_RANGES_DETECTION",options:{minMaxRatio:.05,nH:100,compile:!0,frequencyCluster:16,clean:null,keepPeaks:!0}})}),[e]),n=Object(m.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return g.a.createElement("div",{style:Xr.container},g.a.createElement("button",{type:"button",style:Xr.actionButton,onClick:t},"Apply"),g.a.createElement("button",{type:"button",style:Xr.actionButton,onClick:n},"Cancel"))},Gr={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function Wr(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var Zr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var r=Math.pow(2,a);n.push({key:r,label:Wr(r),value:r})}return n}(),Kr=function(){var e=yt(),t=ht(),n=t.data,a=t.activeSpectrum,r=Object(m.useRef)(),i=Object(m.useState)(1),o=Object(p.a)(i,2),c=o[0],l=o[1],s=Object(m.useCallback)((function(){e({type:"APPLY_ZERO_FILLING_FILTER",value:{zeroFillingSize:Number(r.current.value),lineBroadeningValue:c}})}),[e,c]),u=Object(m.useCallback)((function(){if(n&&a){var e=n.find((function(e){return e.id===a.id}));return Math.pow(2,Math.round(Math.log2(e.x.length)))}return""}),[a,n]),d=Object(m.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):c;l(t)}}),[c]),f=Object(m.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return g.a.createElement("div",{style:Gr.container},g.a.createElement("span",{style:Gr.label},"Size: "),g.a.createElement(wr,{ref:r,data:Zr,style:{marginLeft:10,marginRight:10},defaultValue:u()}),g.a.createElement("span",{style:Gr.label},"Line Broadening: "),g.a.createElement("input",{name:"line-broadening",style:Gr.input,type:"number",value:c,onInput:d,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),g.a.createElement("button",{type:"button",style:Gr.actionButton,onClick:s},"Apply"),g.a.createElement("button",{type:"button",style:Gr.actionButton,onClick:f},"Cancel"))};function Jr(){var e=Object(d.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    height: 100%;\n  }\n\n  .windowButton {\n    width: 40px !important;\n    min-width: 40px !important;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"]);return Jr=function(){return e},e}var qr=Object(b.b)(Jr()),$r=function(e){var t=e.isFullscreen,n=e.onMaximize,a=ht().selectedOptionPanel,r=_t(),i=Object(h.d)(),o=Object(m.useMemo)((function(){return a===mn.zeroFilling.id?Object(b.c)(Kr,null):a===mn.phaseCorrection.id?Object(b.c)(Hr,null):a===mn.peakPicking.id?Object(b.c)(kr,null):a===mn.rangesPicking.id?Object(b.c)(Ur,null):a===mn.baseLineCorrection.id?Object(b.c)(Sr,null):void 0}),[a]),c=Object(m.useCallback)((function(){r.show(Object(b.c)(hr,{onSave:function(){i.success("Settings saved successfully")}}),{})}),[i,r]);return Object(b.c)("div",{css:qr},Object(b.c)("div",{className:"toolOptionsPanel"},o),Object(b.c)("div",{className:"windowButtonsContainer"},Object(b.c)(lr,{title:"General Settings",popupPlacement:"left"},Object(b.c)("button",{type:"button",onClick:c,className:"windowButton"},Object(b.c)(Xt.x,null))),t?"":Object(b.c)(lr,{title:"Full Screen",popupPlacement:"left"},Object(b.c)("button",{type:"button",onClick:n,className:"windowButton"},Object(b.c)(Xt.t,null)))))};$r.defaultProps={onMaximize:function(){return null}};var Qr=$r,ei=n(694);function ti(){return(ti=Object(C.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return ni(n=e.sent),e.next=6,n.text();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ni(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function ai(e){return e.replace(/^.*\./,"").toLowerCase()}function ri(e){return Promise.all([].map.call(e,(function(e){return new Promise((function(t,n){var a=new FileReader;a.onabort=function(e){return n(e)},a.onerror=function(e){return n(e)},a.onload=function(){if(a.result){var n=a.result,r=function(e){return e.substr(0,e.lastIndexOf("."))}(e.name),i=ai(e.name);t({binary:n,name:r,extension:i})}},a.readAsBinaryString(e)}))})))}function ii(){var e=Object(d.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"]);return ii=function(){return e},e}function oi(){var e=Object(d.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]);return oi=function(){return e},e}var ci=Object(b.b)(oi()),li=Object(b.b)(ii()),si=function(e){var t=ht(),n=t.width,a=t.height,r=yt(),i=Object(m.useCallback)((function(e){r({type:"SET_LOADING_FLAG",isLoading:!0});var t,n=Object(Kn.a)(new Set(e.map((function(e){return ai(e.name)})))),a=Object(E.a)(n);try{var i=function(){var n=t.value,a=e.filter((function(e){return ai(e.name)===n}));switch(n){case"mol":ri(a).then((function(e){r({type:"LOAD_MOL_FILE",files:e})}),(function(e){alert(e)}));break;case"nmrium":case"json":1===a.length?ri(a).then((function(e){at.build(JSON.parse(e[0].binary.toString())).then((function(e){r({type:"LOAD_JSON_FILE",data:{AnalysisObj:e}})}))}),(function(e){alert(e)})):alert("You can add only one json file");break;case"dx":case"jdx":ri(a).then((function(e){r({type:"LOAD_JCAMP_FILE",files:e})}),(function(e){alert(e)}));break;case"zip":ri(a).then((function(e){r({type:"LOAD_ZIP_FILE",files:e})}),(function(e){alert(e)}));break;default:alert("The file extesion must be zip, dx, jdx, json, mol or nmrium.")}};for(a.s();!(t=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}),[r]),o=Object(ei.a)({onDrop:i,noClick:!0}),c=o.getRootProps,l=o.getInputProps,s=o.isDragActive;return Object(b.c)("div",Object.assign({},c(),{css:li}),Object(b.c)("input",l()),s&&Object(b.c)("div",{css:ci,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")}},Object(b.c)(Xt.w,null),Object(b.c)("p",null,"Drop your files here")),e.children)},ui={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},di=function(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,r=Object(m.useCallback)((function(){return Array(t.length).fill(!1).map((function(e,t){return t===a||e}))}),[t.length,a]),i=Object(m.useState)(r),o=Object(p.a)(i,2),c=o[0],l=o[1],s=Object(m.useRef)(),u=Object(m.useCallback)((function(e){var t=c.slice();t=t.map((function(t,n){return n===e})),l(t)}),[c]),d=Object(m.useMemo)((function(){return g.a.Children.map(t,(function(e,t){return g.a.cloneElement(e,{onOpen:u,index:t,isOpen:c[t]})}))}),[t,c,u]);return Object(m.useEffect)((function(){l(r)}),[r]),g.a.createElement("div",{ref:s,style:ui.container},d)},fi={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"12px",display:"flex",alignItems:"center",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#f6f6f6",GradientType=0)',backgroundColor:"#ffffff",color:"#666666",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"auto",flex:"1 1 1px"}},pi=function(e){var t=e.title,n=e.children,a=e.index,r=e.isOpen,i=e.onOpen,o=e.style,c=Object(m.useState)(null),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useRef)(),b=Object(m.useRef)();return Object(m.useEffect)((function(){u(r?{backgroundColor:"#ccc"}:null)}),[r]),Object(m.useEffect)((function(){!1===r&&u(null)}),[r]),g.a.createElement("div",{ref:b,style:Object(f.a)({},fi.container,{flex:null==s?0:"1 1 1px",transition:r?"":"flex 0.2s ease"}),className:"custom-accordion"},g.a.createElement("button",{type:"button",style:fi.button,onClick:function(){u(null==s?{backgroundColor:"#ccc"}:null),null==s&&i(a)}},g.a.createElement("p",{style:fi.buttonTitle},t)),g.a.createElement("div",{ref:d,style:Object(f.a)({},fi.content,{maxHeight:null==s?0:"100%"},o)},n))};pi.defaultProps={onOpen:function(){return null}};var bi=pi;var mi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a){var r=t(),i=r.data,o=r.activeSpectrum,c=r.preferences,l=r.activeTab,s=r.selectedTool;return g.a.createElement(e,Object.assign({data:i,activeSpectrum:o,preferences:c,activeTab:l,selectedTool:s},a,n))}},gi=n(520),hi=function(e){var t=e.checked,n=e.onChange,a=Object(m.useState)(t),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(m.useCallback)((function(){var e=!i;o(e),n(e)}),[i,n]);return g.a.createElement("input",{type:"checkbox",onChange:c,defaultChecked:i})};hi.defaultProps={onChange:function(){return null}};var vi=hi,Oi={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"},yi=function(e){var t=e.children,n=e.className,a=e.style;return g.a.createElement("div",{className:n,style:Object(f.a)({},Oi,{style:a})},t)},xi={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"},ji=function(e){var t=e.children,n=e.className,a=e.style;return g.a.createElement("div",{className:n,style:Object(f.a)({},xi,{style:a})},g.a.Children.map(t,(function(e){return g.a.cloneElement(e,{style:{borderBottom:"0.55px solid #d8d8d8"}})})))},ki={width:"100%",display:"flex",alignItems:"flex-start"};function Ei(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}var Ci=function(e){var t=e.children,n=e.className,a=e.style,r=e.align,i=void 0===r?"center":r,o=e.vAlign,c=void 0===o?"center":o,l=e.size,s=void 0===l?1:l;return g.a.createElement("div",{className:n,style:Object(f.a)({},ki,{alignItems:Ei(c),textAlign:i,flex:s},a)},t)},wi={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"},Di=function(e){var t=e.children,n=e.className,a=e.style;return g.a.createElement("div",{className:n,style:Object(f.a)({},wi,{style:a})},t)},Si={width:"100%",display:"flex",padding:"5px 0px"},Pi=function(e){var t=e.children,n=e.className,a=e.style;return g.a.createElement("div",{className:n,style:Object(f.a)({},Si,{},a)},t)},Ti=function(){return g.a.createElement("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"}},"No Data")},Ii={button:{backgroundColor:"transparent",border:"none",height:25,width:25}},Ai=mi(Object(m.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=yt(),r=Object(m.useCallback)((function(e,t){a({type:"ENABLE_FILTER",id:e,checked:t})}),[a]),i=Object(m.useCallback)((function(e){a({type:"DELETE_FILTER",id:e})}),[a]),o=Object(m.useMemo)((function(){var e=t&&n&&t.find((function(e){return e.id===n.id}));return e&&e.filters&&e.filters.map((function(e){return g.a.createElement(Pi,{key:e.id},g.a.createElement(Ci,{align:"center",size:"2"},e.label),g.a.createElement(Ci,{align:"left",size:"3"},g.a.createElement(gi.a,{data:e.error?e.error:e.value})),g.a.createElement(Ci,{align:"center",vAlign:"center",size:"1"},g.a.createElement(vi,{checked:e.flag,onChange:function(t){return r(e.id,t)}}),e.isDeleteAllow&&g.a.createElement("button",{style:Ii.button,type:"button",onClick:function(){return i(e.id)}},g.a.createElement(Xt.s,null))))}))}),[n,t,i,r]);return o&&o.length>0?g.a.createElement(yi,null,g.a.createElement(Di,null,g.a.createElement(Pi,null,g.a.createElement(Ci,{align:"center",size:"1"},"Label"),g.a.createElement(Ci,{align:"center",size:"2"},"Properties"))),g.a.createElement(ji,null,o)):g.a.createElement(Ti,null)})),ht),Fi=n(279);function Li(){var e=Object(d.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th,\n  td {\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"]);return Li=function(){return e},e}function Ri(){var e=Object(d.a)(["\n  background-color: #f5f5dc;\n"]);return Ri=function(){return e},e}function Ni(){var e=Object(d.a)(["\n  background-color: #ff6f0057;\n"]);return Ni=function(){return e},e}var _i=Object(b.b)(Ni()),Mi=Object(b.b)(Ri()),zi=Object(b.b)(Li()),Yi=function(e){var t=e.data,n=e.columns,a=e.onMouseDown,r=Object(Fi.d)({columns:n,data:t},Fi.c,Fi.b),i=r.getTableProps,o=r.getTableBodyProps,c=r.headerGroups,l=r.rows,s=r.prepareRow;return Object(b.c)("table",Object.assign({},i(),{css:zi}),Object(b.c)("thead",null,c.map((function(e){return Object(b.c)("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return Object(b.c)("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),Object(b.c)("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))}))),Object(b.c)("tbody",Object.assign({},o(),{style:{display:"block",height:"100%",overflowY:"auto"}}),l.map((function(e){return s(e),Object(b.c)("tr",Object.assign({key:e.getRowProps().key},e.getRowProps(),{onMouseDown:a}),e.cells.map((function(e){return Object(b.c)("td",Object.assign({key:e.getCellProps().key},e.getCellProps(),{style:Object(f.a)({},e.getCellProps().style,{padding:"0px"})}),e.render("Cell"))})))}))))};Yi.defaultProps={onMouseDown:function(){return null}};var Vi=Yi,Bi={searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}},Hi=mi(Object(m.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=Object(m.useState)([]),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(m.useState)([]),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useCallback)((function(e){var t=Object.keys(i).filter((function(t){return t.toLowerCase().includes(e.target.value.toLowerCase())}));u(t)}),[i]);Object(m.useEffect)((function(){if(t&&n){var e=t.find((function(e){return e.id===n.id}));if(e){var a=Object.keys(e.info).concat(Object.keys(e.meta));u(a),o(Object(f.a)({},e.info,{},e.meta))}}}),[n,t]);var b=[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function(e){var t=e.row;return g.a.createElement("p",{style:{padding:"5px",backgroundColor:"white"}},t.original)}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return g.a.createElement("p",{style:{backgroundColor:"#efefef",width:"100%",height:"100%",padding:"5px",fontFamily:"monospace",whiteSpace:"pre"}},i[t.original])}}];return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",null,g.a.createElement("input",{type:"text",style:Bi.searchInput,placeholder:"Search for parameter...",onChange:d})),g.a.createElement(Vi,{data:s,columns:b}))})),ht),Xi=n(348),Ui=n.n(Xi);function Gi(){var e=Object(d.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  z-index: 99999;\n  padding: 2px;\n  background-color: white;\n  width: 150px;\n  button {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid #f0f0f0;\n    font-size: 11px;\n    padding: 5px;\n    text-align: left;\n    outline: none;\n  }\n  button:hover {\n    background-color: #fafafa;\n    outline: none;\n  }\n\n  button:active {\n    background-color: #eaeaea;\n    outline: none;\n  }\n\n  button:last-of-type {\n    border: none;\n  }\n"]);return Gi=function(){return e},e}var Wi=Object(b.b)(Gi()),Zi=Object(m.forwardRef)((function(e,t){var n=e.context,a=Object(m.useState)({lef:0,top:0}),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(m.useState)(),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useState)(),f=Object(p.a)(d,2),g=f[0],h=f[1],v=Object(m.useState)(null),O=Object(p.a)(v,2),y=O[0],x=O[1],j=Object(m.useRef)();Object(m.useEffect)((function(){return j.current=document.createElement("div"),document.body.appendChild(j.current),function(){j.current&&document.body.removeChild(j.current)}}),[]);Object(m.useImperativeHandle)(t,(function(){return{handleContextMenu:function(e,t){u(t),function(e){e.preventDefault(),x(e.target.parentElement),h(!0);var t=e.clientX,n=e.clientY,a=window.innerWidth-t>150,r=!a,i=window.innerHeight-n>0,c=!i;a&&(r="".concat(t+5,"px")),r&&(r="".concat(t-150-5,"px")),i&&(i="".concat(n+5,"px")),c&&(i="".concat(n-0-5,"px")),o({left:r,top:i})}(e)}}}));var k=Object(m.useCallback)((function(e,t){e.preventDefault(),t(s),h(!1)}),[s]);return Object(m.useEffect)((function(){var e=function(e){y&&e.target.parentElement&&!e.target.parentElement.isSameNode(y)&&g&&h(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[g,t,y]),g?j.current&&Object(Dt.createPortal)(n&&Object(b.c)("div",{ref:t,css:[Wi,i]},n.map((function(e,t){return Object(b.c)("button",{key:t,type:"button",onClick:function(t){return k(t,e.onClick)}},e.label)}))),j.current):null})),Ki=function(e){var t=e.headerGroups;return g.a.createElement("thead",null,t.map((function(e){return g.a.createElement("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return g.a.createElement("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),g.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))})))},Ji=function(e){var t=e.row,n=e.onContextMenu,a=Object(In.b)([Object.prototype.hasOwnProperty.call(t.original,"id")?t.original.id:""]);return Object(b.c)("tr",Object.assign({onContextMenu:n,key:t.getRowProps().key,css:a.isActive?_i:t.original.isConstantlyHighlighted&&!0===t.original.isConstantlyHighlighted?Mi:null},t.getRowProps(),a.onHover),t.cells.map((function(e){return Object(b.c)("td",Object.assign({key:e.key},e.getCellProps(),{onContextMenu:function(e){return e.preventDefault(),!1}}),e.render("Cell"))})))},qi=function(e){var t=e.data,n=e.columns,a=e.context,r=Object(m.useRef)(),i=Object(Fi.d)({columns:n,data:t},Fi.c),o=i.getTableProps,c=i.getTableBodyProps,l=i.headerGroups,s=i.rows,u=i.prepareRow,d=Object(m.useCallback)((function(e,t){e.preventDefault(),r.current.handleContextMenu(e,t.original)}),[r]);return Object(b.c)(m.Fragment,null,Object(b.c)("table",Object.assign({},o(),{css:zi}),Object(b.c)(Ki,{headerGroups:l}),Object(b.c)("tbody",c(),s.map((function(e){return u(e),Object(b.c)(Ji,Object.assign({key:e.key,row:e},e.getRowProps(),{onContextMenu:function(t){return d(t,e)}}))})))),Object(b.c)(Zi,{ref:r,context:a}))};qi.defaultProps={context:null};var $i=qi;function Qi(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return Qi=function(){return e},e}var eo=Object(b.b)(Qi()),to=function(e){var t=e.onSave,n=e.onClose,a=e.header,r=Object(m.useRef)(),i=Object(m.useCallback)((function(){t(r.current.value)}),[t]);return Object(b.c)("div",{css:eo},Object(b.c)("div",{className:"header"},Object(b.c)("span",null,a),Object(b.c)("button",{onClick:n,type:"button"},Object(b.c)(Xt.v,null))),Object(b.c)("div",{className:"container"},Object(b.c)("input",{ref:r,type:"number",placeholder:"Enter the new value"}),Object(b.c)("button",{type:"button",onClick:i},"Set")))};to.defaultProps={onSave:function(){return null},onClose:function(){return null}};var no=to,ao=n(524),ro=n.n(ao);var io=function(e,t){return ro()(e).format(t)},oo=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],co={button:{backgroundColor:"transparent",border:"none"},container:{display:"flex",flexDirection:"column",flexGrow:"1",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)",padding:"0px 5px"},counterLabel:{margin:0,textAlign:"right",width:"100%",lineHeight:"22px",padding:"0px 10px"},filterButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0}},lo=Object(m.memo)((function(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,r=e.onFilter,i=e.filterToolTip,o=e.filterIsActive,c=e.counterFiltered,l=e.children,s=e.showSettingButton,u=void 0!==s&&s,d=e.onSettingClick;return g.a.createElement("div",{style:co.toolbar},g.a.createElement(lr,{title:a,popupPlacement:"right"},g.a.createElement("button",{style:co.button,type:"button",onClick:n,disabled:0===t},g.a.createElement(Xt.s,null))),l,r&&i?g.a.createElement(lr,{title:i,popupPlacement:"right"},g.a.createElement("button",{style:o&&!0===o?Object(f.a)({},co.filterButton,{backgroundColor:"#6d6d6d",color:"white",fontSize:"10px"}):co.filterButton,type:"button",onClick:r,disabled:0===t},g.a.createElement(Xt.n,null))):null,g.a.createElement("p",{style:co.counterLabel},"["," ",o&&!0===o&&c?"".concat(c,"/").concat(t):t," ","]"),u&&g.a.createElement(lr,{title:"preferences",popupPlacement:"left"},g.a.createElement("button",{style:co.button,type:"button",onClick:d},g.a.createElement(Xt.c,null))))}));function so(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n  button {\n    background-color: transparent;\n    border: none;\n    height: 100%;\n    margin: 0px 5px;\n  }\n  .save svg {\n    fill: green;\n    font-size: 16px;\n  }\n  .close svg {\n    fill: #ca0000;\n    font-size: 20px;\n  }\n"]);return so=function(){return e},e}var uo=Object(b.b)(so()),fo=Object(m.memo)((function(e){var t=e.onClose,n=e.onSave;return Object(b.c)("div",{css:uo},Object(b.c)(lr,{title:"close Preferences",popupPlacement:"left"},Object(b.c)("button",{className:"close",type:"button",onClick:t},Object(b.c)(Xt.v,null))),Object(b.c)(lr,{title:"save Preferences",popupPlacement:"left"},Object(b.c)("button",{className:"save",type:"button",onClick:n},Object(b.c)(Xt.b,null))))})),po=function(e){return function(t){return t.reduce((function(t,n){var a=n.info[e];return t[a]=(t[a]||[]).concat(n),t}),{})}},bo={row:{display:"flex",margin:"5px 0px"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center"}},mo=Object(m.memo)((function(e){var t=e.label,n=e.checkControllerName,a=e.formatControllerName,r=e.defaultData,i=e.inputChangeHandler,o=e.groupID,c=e.data,l=Object(m.useCallback)((function(e,t){if(c){var n=ct.a.get(c,"".concat(e,".").concat(t));return n||null}return r[t]}),[c,r]);return g.a.createElement("div",{style:bo.row},g.a.createElement("span",{style:bo.inputLabel},t),g.a.createElement("div",{style:{flex:4}},g.a.createElement("input",{name:"".concat(o,"-").concat(n),type:"checkbox",onChange:function(e){return i(e,o-n)},style:{margin:"0px 5px"},checked:l(o,n)}),g.a.createElement("input",{style:bo.input,name:"".concat(o,"-").concat(a),type:"text",onChange:function(e){return i(e,o-a)},value:l(o,a)})))})),go={showAbsolute:!0,absoluteFormat:"0.0",showNB:!0,NBFormat:"0.00"},ho="0.0",vo="0.00",Oo={showPeakNumber:!0,peakNumberFormat:"0.00",showPeakIndex:!0,peakIndexFormat:"0.00",showDeltaPPM:!1,deltaPPMFormat:"0.00",showDeltaHz:!1,deltaHzFormat:"0.00",showPeakWidth:!1,peakWidthFormat:"00.0000",showIntensity:!0,intensityFormat:"0.00"},yo={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},xo={showAbsolute:!0,absoluteFormat:"0.00",showNB:!0,NBFormat:"0.00"},jo=Object(m.forwardRef)((function(e,t){var n=ht(),a=n.data,r=n.preferences,i=yt(),o=Object(h.d)(),c=Object(m.useState)([]),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useState)(null),b=Object(p.a)(d,2),v=b[0],O=b[1],y=Object(m.useRef)(),x=Object(m.useCallback)((function(e){return e.reduce((function(e,t){return e=Object(f.a)({},e,Object(N.a)({},t,xo))}),{})}),[]);Object(m.useEffect)((function(){if(a&&Array.isArray(a)){var e=po("nucleus"),t=Object.keys(e(a));u(t)}}),[a,x,v]),Object(m.useEffect)((function(){var e=ct.a.get(r,"panels.integrals");e&&O(e)}),[r]);var j=Object(m.useCallback)((function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name.split("-");O((function(e){var t=e&&Object.prototype.hasOwnProperty.call(e,a[0])?e[a[0]]:{};return Object(f.a)({},e,Object(N.a)({},a[0],Object(f.a)({},t,Object(N.a)({},a[1],n))))}))}),[]),w=Object(m.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"integrals",values:e}}),t&&o.success("Integrals preferences saved successfully")}),[o,i]);Object(m.useImperativeHandle)(t,(function(){return{saveSetting:function(){y.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var D=[{id:1,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:2,label:"nb :",checkController:"showNB",formatController:"NBFormat",defaultFormat:"00.00"}],S=function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a,r,i,o,c,l,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=new FormData(n),r={},i=Object(E.a)(a.entries());try{for(i.s();!(o=i.n()).done;)c=o.value,l=c[0].split("-"),s=n.elements[c[0]].checked?!!c[1]:c[1],r=Object(f.a)({},r,Object(N.a)({},l[0],Object(f.a)({},r[l[0]],Object(N.a)({},l[1],s))))}catch(u){i.e(u)}finally{i.f()}w(r,!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g.a.createElement("div",{style:yo.container},g.a.createElement("form",{onSubmit:S,ref:y},s&&s.map((function(e){return g.a.createElement("div",{key:e,style:yo.groupContainer},g.a.createElement("p",{style:yo.header},e),D.map((function(t){return g.a.createElement(mo,{key:t.id,label:t.label,data:v,defaultData:go,checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e,defaultFormat:t.defaultFormat,inputChangeHandler:function(e,t){return j(e,t)}})})))}))))})),ko={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},container:{display:"flex",flexDirection:"column",height:"100%"}},Eo={marginLeft:10,marginRight:10,border:"none"},Co=Object(m.memo)((function(){var e=ht(),t=e.activeSpectrum,n=e.data,a=e.preferences,r=e.activeTab,i=e.xDomain,o=Object(m.useState)(!1),c=Object(p.a)(o,2),l=c[0],s=c[1],u=Object(m.useState)(0),d=Object(p.a)(u,2),b=d[0],h=d[1],v=yt(),O=_t(),y=Object(m.useState)(!1),x=Object(p.a)(y,2),j=x[0],k=x[1],E=Object(m.useState)(!0),C=Object(p.a)(E,2),w=C[0],D=C[1],S=Object(m.useRef)(),P=Object(m.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;v({type:"DELETE_INTEGRAL",integralID:n.id})}),[v]),T=Object(m.useCallback)((function(e,t){var n=Object(f.a)({},t.original,{kind:e});v({type:"CHANGE_INTEGRAL_DATA",data:n})}),[v]),I=[{orderIndex:1,Header:"#",Cell:function(e){return e.row.index+1},width:10},{orderIndex:2,Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.from.toFixed(2)}},{orderIndex:3,Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.to.toFixed(2)}},{orderIndex:6,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return g.a.createElement(wr,{onChange:function(e){return T(e,t)},data:oo,style:Eo,defaultValue:t.original.kind})}},{orderIndex:7,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return g.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return P(e,t)}},g.a.createElement(Xt.s,null))}}],A=function(e,t){return!!(void 0===e||0===Object.keys(e).length||e&&!0===e[t])},F=Object(m.useMemo)((function(){var e=function(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=ct.a.get(a,"panels.integrals.[".concat(r,"]")),n=[].concat(I);if(A(t,"showAbsolute")&&e(n,4,"Absolute",(function(e){return io(e.original.absolute,t&&Object.prototype.hasOwnProperty.call(t,"absoluteFormat")?t.absoluteFormat:go.absoluteFormat)})),A(t,"showNB")){var i=r&&r.replace(/[0-9]/g,"");e(n,5,"nb ".concat(i),(function(e){return e.original.integral?io(e.original.integral,t&&Object.prototype.hasOwnProperty.call(t,"NBFormat")?t.NBFormat:go.NBFormat):null}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[r,I,a]),L=Object(m.useMemo)((function(){var e=t&&n?n[t.index]:null;function a(e,t){return e*=1e4,(t*=1e4)>=1e4*i[0]&&e<=1e4*i[1]||e<=1e4*i[0]&&t>=1e4*i[1]}if(e&&e.integrals&&e.integrals.values)return h(e.integrals.values.length),(l?e.integrals.values.filter((function(e){return a(e.from,e.to)})):e.integrals.values).map((function(e){return Object(f.a)({},e,{isConstantlyHighlighted:a(e.from,e.to)})}))}),[n,t,l,i]),R=Object(m.useCallback)((function(){v({type:"DELETE_INTEGRAL",integralID:null})}),[v]),N=Object(m.useCallback)((function(){O.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:R})}),[O,R]),_=Object(m.useCallback)((function(e){e&&v({type:"CHANGE_INTEGRAL_SUM",value:e}),O.close()}),[v,O]),M=Object(m.useMemo)((function(){return t&&n&&n[t.index]&&n[t.index].integrals&&n[t.index].integrals.options&&void 0!==n[t.index].integrals.options.sum?n[t.index].integrals.options.sum:null}),[n,t]),z=Object(m.useCallback)((function(){O.show(g.a.createElement(no,{header:"Set new integral sum (current: ".concat(M,")"),onClose:function(){return O.close()},onSave:_}))}),[_,M,O]),Y=Object(m.useCallback)((function(){k(!j),j?D(!0):setTimeout((function(){D(!1)}),400,j)}),[j]),V=Object(m.useCallback)((function(){S.current.saveSetting(),k(!1),D(!0)}),[]),B=Object(m.useCallback)((function(){s(!l)}),[l]);return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{style:ko.container},!j&&g.a.createElement(lo,{counter:b,onDelete:N,deleteToolTip:"Delete All Integrals",onFilter:B,filterToolTip:l?"Show all integrals":"Hide integrals out of view",filterIsActive:l,counterFiltered:L&&L.length,showSettingButton:"true",onSettingClick:Y},g.a.createElement(lr,{title:"Change Integrals sum (".concat(M,")"),popupPlacement:"right"},g.a.createElement("button",{style:ko.sumButton,type:"button",onClick:z},"\u03a3"))),j&&g.a.createElement(fo,{onSave:V,onClose:Y}),g.a.createElement(Ui.a,{isFlipped:j,infinite:!0,containerStyle:{height:"100%"}},g.a.createElement("div",{style:w?{}:{display:"none"}},L&&L.length>0?g.a.createElement($i,{data:L,columns:F}):g.a.createElement(Ti,null)),g.a.createElement(jo,{data:n,ref:S}))))})),wo=n(525),Do=n.n(wo),So=n(699);n(528);function Po(){var e=Object(d.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  z-index: 99999;\n  padding: 2px;\n  transform: translate(40px, -26px);\n  background-color: white;\n\n  button:hover {\n    background-color: #fafafa;\n  }\n"]);return Po=function(){return e},e}var To=Object(b.b)(Po()),Io=function(e){var t=e.style,n=e.component,a=e.toolTip,r=void 0===a?"":a,i=e.children,o=e.className,c=Object(m.useState)(!1),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useCallback)((function(){u(!1)}),[]),f=Object(m.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),u(!0),document.addEventListener("click",d)}),[d]),g=Object(m.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),!1}),[]);return Object(m.useEffect)((function(){s||document.removeEventListener("click",d)}),[d,s]),Object(b.c)("div",null,Object(b.c)("button",{type:"button",css:t,onClick:f,onContextMenu:g,className:o},Object(b.c)(lr,{title:r,popupPlacement:"right"},n)),s?Object(b.c)("div",{className:"menu",css:To},i):null)},Ao=n(387);function Fo(){var e=Object(d.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return Fo=function(){return e},e}var Lo=Object(b.b)(Fo()),Ro=function(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,r=Object(m.useState)(null),i=Object(p.a)(r,2),o=i[0],c=i[1],l=yt();Object(m.useEffect)((function(){c(a?a.molfile:null)}),[a,n]);var s=Object(m.useCallback)((function(e){c(e)}),[c]),u=Object(m.useCallback)((function(){t()}),[t]),d=Object(m.useCallback)((function(){a?(l({type:"SET_MOLECULE",molfile:o,key:a.key}),t("replace")):(l({type:"ADD_MOLECULE",molfile:o}),t("new"))}),[l,a,o,t]);return Object(b.c)(wt,{open:n,onClose:u},Object(b.c)(Ao.a,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:s}),Object(b.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5}},Object(b.c)("button",{type:"button",css:Lo,onClick:u},"Close"),Object(b.c)("button",{type:"button",css:Lo,onClick:d},"Save")))},No=n(529);function _o(e){return Mo.apply(this,arguments)}function Mo(){return(Mo=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=Vo(t),a=n.blob;Object(No.saveAs)(a,"".concat(e,".svg"))}function Yo(e){var t=Vo(e),n=t.blob,a=t.width,r=t.height;try{var i=document.createElement("canvas");i.width=a,i.height=r;var o=i.getContext("2d");o.fillStyle="white",o.fillRect(0,0,i.width,i.height);var c=new Image,l=URL.createObjectURL(n);c.onload=Object(C.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.drawImage(c,0,0),t=i.toDataURL("image/png",1),i.toBlob((function(e){var t=new ClipboardItem(Object(N.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))})),URL.revokeObjectURL(t);case 4:case"end":return e.stop()}}),e)}))),c.src=l}catch(s){s instanceof ReferenceError&&alert("Your browser does not support this feature, please use Google Chrome"),console.log(s)}}function Vo(e){var t=document.getElementById(e).cloneNode(!0),n=t.getAttribute("width").replace("px",""),a=t.getAttribute("height").replace("px","");t.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var r="<svg  viewBox='0 0 ".concat(n," ").concat(a,"' width=\"").concat(n,'"  height="').concat(a,'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'),i="".concat(r+"<style>.grid line,.grid path{stroke:none;} .regular-text{fill:black} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } </style>"+t.innerHTML,"</svg>");return{blob:new Blob([i],{type:"image/svg+xml"}),width:n,height:a}}function Bo(){var e=Object(d.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return Bo=function(){return e},e}function Ho(){var e=Object(d.a)(["\n  .slider {\n    height: 180px;\n    padding: 0px;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n  }\n\n  .slider svg polygon {\n    fill: gray !important;\n  }\n"]);return Ho=function(){return e},e}function Xo(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  .bar-button {\n    background-color: transparent;\n    border: none;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]);return Xo=function(){return e},e}function Uo(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]);return Uo=function(){return e},e}var Go=Object(b.b)(Uo()),Wo=Object(b.b)(Xo()),Zo=Object(b.b)(Ho()),Ko=Object(b.b)(Bo()),Jo=function(){var e=Object(m.useRef)(),t=g.a.useState(!1),n=Object(p.a)(t,2),a=n[0],r=n[1],i=Object(m.useState)(),o=Object(p.a)(i,2),c=o[0],l=o[1],s=Object(m.useState)(0),u=Object(p.a)(s,2),d=u[0],f=u[1],v=Object(m.useState)(null),O=Object(p.a)(v,2),y=O[0],x=O[1],j=yt(),k=Object(h.d)(),E=Object(m.useContext)(mt),C=E.molecules,w=E.activeTab;Object(m.useEffect)((function(){if(C.length>0){if(w){var e=w.replace(/[0-9]/g,""),t=C[0]&&C[0].atoms[e]?C[0].atoms[e]:0;j({type:"CHANGE_INTEGRAL_SUM",value:t}),j({type:"CHANGE_RANGE_SUM",value:t})}}else j({type:"CHANGE_INTEGRAL_SUM",value:100}),j({type:"CHANGE_RANGE_SUM",value:100})}),[w,j,C]);var D=Object(m.useCallback)((function(e){r(!1),"new"===e&&0===C.length&&f(0)}),[C.length]),S=Object(m.useCallback)((function(e,t,n){l(n?{molfile:n,key:t}:null),r(!0)}),[]),P=Object(m.useCallback)((function(){navigator.clipboard.readText().then((function(e){j({type:"ADD_MOLECULE",molfile:e})})),0===C.length&&f(0)}),[j,C.length]),T=Object(m.useCallback)((function(){C[d]&&C[d].key&&(j({type:"DELETE_MOLECULE",key:C[d].key}),d===C.length-1&&f(0))}),[j,C,d]),I=Object(m.useCallback)((function(){zo("molFile","molSVG".concat(d))}),[d]),A=Object(m.useCallback)((function(){Yo("molSVG".concat(d)),k.success("MOL copied as PNG to clipboard")}),[k,d]),F=Object(m.useCallback)((function(){C[d]&&(_o(C[d].molfile)?k.success("MOLFile copied to clipboard"):k.error("copied not completed"))}),[k,d,C]);return Object(b.c)("div",{css:Go},Object(b.c)("div",{css:Wo},Object(b.c)(Io,{className:"bar-button",component:Object(b.c)(Xt.k,null),toolTip:"Export As"},Object(b.c)("button",{type:"button",css:Ko,onClick:F},Object(b.c)(Xt.d,null),Object(b.c)("span",null,"Copy as molfile")),Object(b.c)("button",{type:"button",css:Ko,onClick:A},Object(b.c)(Xt.l,null),Object(b.c)("span",null,"Copy as PNG")),Object(b.c)("button",{type:"button",css:Ko,onClick:I},Object(b.c)(Xt.e,null),Object(b.c)("span",null,"Export as SVG"))),Object(b.c)(lr,{title:"Paste molfile",popupPlacement:"left"},Object(b.c)("button",{className:"bar-button",type:"button",onClick:P},Object(b.c)(Xt.q,null))),Object(b.c)(lr,{title:"Add Molecule",popupPlacement:"left"},Object(b.c)("button",{className:"bar-button",type:"button",onClick:S},Object(b.c)(Xt.r,null))),Object(b.c)(lr,{title:"Delete Molecule",popupPlacement:"left"},Object(b.c)("button",{className:"bar-button",type:"button",onClick:T},Object(b.c)(Xt.s,null))),Object(b.c)("p",null,C&&C.length>0&&"".concat(+(d+1)," / ").concat(C.length)," ")),Object(b.c)("div",{css:Zo,ref:e},Object(b.c)(Do.a,{onSlideChange:function(e){return f(e.slideIndex)}},C&&C.map((function(t,n){return Object(b.c)("div",{key:t.key,onDoubleClick:function(e){return S(e,t.key,t.molfile)}},Object(b.c)("div",null,Object(b.c)(So.a,{id:"molSVG".concat(n),width:e&&e.current.clientWidth-70,molfile:t.molfile,atomHighlight:y&&[y],atomHighlightColor:"yellow",atomHighlightOpacity:.5,onAtomEnter:function(e){return x(e)},onAtomLeave:function(){return x(null)}})),Object(b.c)("p",null,Object(b.c)(Ja.a,{mf:t.mf})," - ",t.mw.toFixed(2)))}))),Object(b.c)(Ro,{open:a,onClose:D,selectedMolecule:c})))},qo={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%"},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},$o=Object(m.forwardRef)((function(e,t){var n=ht(),a=n.data,r=n.preferences,i=yt(),o=Object(h.d)(),c=Object(m.useState)([]),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(m.useState)(null),b=Object(p.a)(d,2),v=b[0],O=b[1],y=Object(m.useRef)(),x=Object(m.useCallback)((function(e){return e.reduce((function(e,t){return e=Object(f.a)({},e,Object(N.a)({},t,Oo))}),{})}),[]);Object(m.useEffect)((function(){if(a&&Array.isArray(a)){var e=po("nucleus"),t=Object.keys(e(a));u(t)}}),[a,x,v]),Object(m.useEffect)((function(){var e=ct.a.get(r,"panels.peaks");e&&O(e)}),[r]);var j=Object(m.useCallback)((function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name.split("-");O((function(e){var t=e&&Object.prototype.hasOwnProperty.call(e,a[0])?e[a[0]]:{};return Object(f.a)({},e,Object(N.a)({},a[0],Object(f.a)({},t,Object(N.a)({},a[1],n))))}))}),[]),w=Object(m.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"peaks",values:e}}),t&&o.success("Peaks preferences saved successfully")}),[o,i]);Object(m.useImperativeHandle)(t,(function(){return{saveSetting:function(){y.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var D=[{id:1,label:"Peak Number :",checkController:"showPeakNumber",formatController:"peakNumberFormat",defaultFormat:""},{id:2,label:"Peak Index : ",checkController:"showPeakIndex",formatController:"peakIndexFormat",defaultFormat:""},{id:3,label:"\u03b4 (ppm) :",checkController:"showDeltaPPM",formatController:"deltaPPMFormat",defaultFormat:"00.00"},{id:4,label:"\u03b4 (Hz) :",checkController:"showDeltaHz",formatController:"deltaHzFormat",defaultFormat:"00.00"},{id:5,label:"Peak Width",checkController:"showPeakWidth",formatController:"peakWidthFormat",defaultFormat:"00.0000"},{id:6,label:"Intensity :",checkController:"showIntensity",formatController:"intensityFormat",defaultFormat:"00.00"}],S=function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a,r,i,o,c,l,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=new FormData(n),r={},i=Object(E.a)(a.entries());try{for(i.s();!(o=i.n()).done;)c=o.value,l=c[0].split("-"),s=n.elements[c[0]].checked?!!c[1]:c[1],r=Object(f.a)({},r,Object(N.a)({},l[0],Object(f.a)({},r[l[0]],Object(N.a)({},l[1],s))))}catch(u){i.e(u)}finally{i.f()}w(r,!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g.a.createElement("div",{style:qo.container},g.a.createElement("form",{onSubmit:S,ref:y},s&&s.map((function(e){return g.a.createElement("div",{key:e,style:qo.groupContainer},g.a.createElement("p",{style:qo.header},e),D.map((function(t){return g.a.createElement(mo,{key:t.id,label:t.label,data:v,defaultData:Oo,checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e,defaultFormat:t.defaultFormat,inputChangeHandler:function(e,t){return j(e,t)}})})))}))))})),Qo={container:{display:"flex",flexDirection:"column",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},ec=mi(Object(m.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=e.preferences,r=e.activeTab,i=ht().xDomain,o=Object(m.useState)(!1),c=Object(p.a)(o,2),l=c[0],s=c[1],u=Object(m.useState)(0),d=Object(p.a)(u,2),f=d[0],b=d[1],h=yt(),v=_t(),O=Object(m.useState)(!1),y=Object(p.a)(O,2),x=y[0],j=y[1],k=Object(m.useState)(!0),E=Object(p.a)(k,2),C=E[0],w=E[1],D=Object(m.useRef)(),S=[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"peak index",accessor:"xIndex",sortType:"basic"},{Header:"Intensity ",accessor:"yValue",sortType:"basic"},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return g.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return T(e,t)}},g.a.createElement(Xt.s,null))}}],P=[{index:20,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return g.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return T(e,t)}},g.a.createElement(Xt.s,null))}}],T=Object(m.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;h({type:"DELETE_PEAK_NOTATION",data:{id:n.id,xIndex:n.xIndex}})}),[h]),I=Object(m.useMemo)((function(){var e=function(e,t,n,a){e.push({index:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=ct.a.get(a,"panels.peaks.[".concat(r,"]"));if(t){var n=[].concat(P);return t.showPeakNumber&&e(n,1,"#",(function(e){return io(e.index+1,t.peakNumberFormat)})),t.showPeakIndex&&e(n,2,"index",(function(e){return io(e.original.xIndex,t.peakIndexFormat)})),t.showDeltaPPM&&e(n,3,"\u03b4 (ppm)",(function(e){return io(e.original.value,t.deltaPPMFormat)})),t.showDeltaHz&&e(n,4,"\u03b4 (Hz)",(function(e){return io(e.original.value,t.deltaHzFormat)})),t.showIntensity&&e(n,5,"Intensity",(function(e){return io(e.original.yValue,t.intensityFormat)})),t.showPeakWidth&&e(n,5,"Peak Width",(function(e){return io(e.original.peakWidth,t.peakWidthFormat)})),n.sort((function(e,t){return e.index-t.index}))}return S}),[r,S,P,a]),A=Object(m.useMemo)((function(){var e=n&&t?t[n.index]:null;function a(e){return 1e5*e>=1e5*i[0]&&1e5*e<=1e5*i[1]}if(e&&e.peaks&&e.peaks.values){b(e.peaks.values.length);var r=qn(e.info.nucleus);return(l?e.peaks.values.filter((function(t){return a(e.x[t.xIndex])})):e.peaks.values).map((function(t){var n=e.x[t.xIndex].toFixed(r);return{xIndex:t.xIndex,value:n,id:t.id,yValue:e.y[t.xIndex],peakWidth:t.width?t.width:"",isConstantlyHighlighted:a(n)}}))}}),[t,n,l,i]),F=Object(m.useCallback)((function(){h({type:"DELETE_PEAK_NOTATION",data:null})}),[h]),L=Object(m.useCallback)((function(){v.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:F})}),[v,F]),R=Object(m.useCallback)((function(){j(!x),x?w(!0):setTimeout((function(){w(!1)}),400,x)}),[x]),N=Object(m.useCallback)((function(){D.current.saveSetting(),j(!1),w(!0)}),[]),_=Object(m.useCallback)((function(){s(!l)}),[l]);return g.a.createElement("div",{style:Qo.container},!x&&g.a.createElement(lo,{counter:f,onDelete:L,deleteToolTip:"Delete All Peaks",onFilter:_,filterToolTip:l?"Show all peaks":"Hide peaks out of view",filterIsActive:l,counterFiltered:A&&A.length,showSettingButton:"true",onSettingClick:R}),x&&g.a.createElement(fo,{onSave:N,onClose:R}),g.a.createElement(Ui.a,{isFlipped:x,infinite:!0,containerStyle:{height:"100%"}},g.a.createElement("div",{style:C?{}:{display:"none"}},A&&A.length>0?g.a.createElement($i,{data:A,columns:I}):g.a.createElement(Ti,null)),g.a.createElement($o,{data:t,ref:D})))})),ht),tc=n(230),nc=function(e){var t=e.columns,n=e.data,a=e.renderRowSubComponent,r=e.context,i=Object(m.useRef)(),o=Object(Fi.d)({columns:t,data:n},Fi.c,Fi.a),c=o.getTableProps,l=o.getTableBodyProps,s=o.headerGroups,u=o.rows,d=o.prepareRow,f=o.flatColumns,p=Object(m.useCallback)((function(e,t){e.preventDefault(),i.current.handleContextMenu(e,t.original)}),[i]);return Object(b.c)("table",Object.assign({},c(),{css:zi}),Object(b.c)(Ki,{headerGroups:s}),Object(b.c)("tbody",Object.assign({key:l().key},l()),u.map((function(e){return d(e),Object(b.c)(m.Fragment,{key:e.index},Object(b.c)(Ji,Object.assign({key:e.key,row:e},e.getRowProps(),{onContextMenu:function(t){return p(t,e)}})),e.isExpanded?Object(b.c)("tr",null,Object(b.c)("td",{colSpan:f.length},e&&e.original&&e.original.id&&a({row:e}))):null,Object(b.c)(Zi,{ref:i,context:r}))}))))};nc.defaultProps={context:null,renderRowSubComponent:function(){return null}};var ac=nc;function rc(){var e=Object(d.a)(["\n  overflow: auto;\n  width: 400px;\n  .innerContainer {\n    padding: 5px;\n    width: 100%;\n    height: 180px;\n    border: none;\n  }\n\n  .mainButtonsContainer {\n    padding: 5px 0px;\n    border-bottom: 0.55px solid #ebebeb;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  button:focus {\n    outline: none;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n  }\n"]);return rc=function(){return e},e}var ic=Object(b.b)(rc()),oc=function(e){var t=e.text,n=e.onClose,a=e.onCopyClick;return Object(b.c)("div",{css:ic},Object(b.c)("div",{className:"mainButtonsContainer"},Object(b.c)("button",{type:"button",onClick:function(){return a(t)}},Object(b.c)(Xt.d,null)),Object(b.c)("button",{type:"button",onClick:n},Object(b.c)(Xt.v,null))),Object(b.c)("div",{className:"innerContainer",dangerouslySetInnerHTML:{__html:t}}))},cc={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}},lc={marginLeft:10,marginRight:10,border:"none"},sc=Object(m.memo)((function(){var e=ht(),t=e.data,n=e.activeSpectrum,a=e.xDomain,r=e.preferences,i=e.activeTab,o=Object(m.useState)(!1),c=Object(p.a)(o,2),l=c[0],s=c[1],u=Object(m.useState)(0),d=Object(p.a)(u,2),b=d[0],v=d[1],O=yt(),y=_t(),x=Object(h.d)(),j=Object(m.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;O({type:"DELETE_RANGE",rangeID:n.id})}),[O]),k=Object(m.useMemo)((function(){var e=n&&t?t[n.index]:null;function r(e,t){return e*=1e4,(t*=1e4)>=1e4*a[0]&&e<=1e4*a[1]||e<=1e4*a[0]&&t>=1e4*a[1]}if(e&&e.ranges&&e.ranges.values){v(e.ranges.values.length);return(l?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.ranges.values;return t.filter((function(e){return r(e.from,e.to)}))}():e.ranges.values).map((function(e){return Object(f.a)({},e,{isConstantlyHighlighted:r(e.from,e.to)})}))}}),[t,n,l,a]),E=Object(m.useCallback)((function(e){_o(e)?x.show("Coped to clipboard"):x.error("Coped to clipboard failed")}),[x]),C=Object(m.useCallback)((function(e){var a=n&&t?t[n.index]:null;if(a){var r=e.from,i=e.to,o=z.b.getFromToIndex(a.x,{from:r,to:i}),c=o.fromIndex,l=o.toIndex,s=Object(f.a)({x:a.x.slice(c,l),y:a.y.slice(c,l)},e);_o(JSON.stringify(s,void 0,2))?x.show("Coped to clipboard"):x.error("Coped to clipboard failed")}}),[t,n,x]),w=Object(m.useCallback)((function(){y.close()}),[y]),D=Object(m.useCallback)((function(e,t){var n=Object(f.a)({},t.original,{kind:e});O({type:"CHANGE_RANGE_DATA",data:n})}),[O]),S=Object(m.useCallback)((function(){var e=Object(tc.b)(k);y.show(g.a.createElement(oc,{text:e,onCopyClick:E,onClose:w}),{})}),[w,k,y,E]),P=[{orderIndex:1,Header:function(){return null},id:"expander",Cell:function(e){var t=e.row;return g.a.createElement("span",t.getExpandedToggleProps(),t.isExpanded?"\u25bc":"\u25b6")}},{orderIndex:2,Header:"#",Cell:function(e){return e.row.index+1}},{orderIndex:3,Header:"From",accessor:"from",Cell:function(e){return e.row.original.from.toFixed(2)}},{orderIndex:4,Header:"To",accessor:"to",Cell:function(e){return e.row.original.to.toFixed(2)}},{orderIndex:7,Header:"#Signals",Cell:function(e){var t=e.row;return"".concat(t.original.signal.length,": ").concat(t.original.signal.map((function(e){return e.multiplicity})).join(","))}},{orderIndex:7,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return g.a.createElement(wr,{onChange:function(e){return D(e,t)},data:oo,style:lc,defaultValue:t.original.kind})}},{orderIndex:8,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return g.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return j(e,t)}},g.a.createElement(Xt.s,null))}}],T=function(e,t){return!!(void 0===e||0===Object.keys(e).length||e&&!0===e[t])},I=Object(m.useMemo)((function(){var e=function(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=ct.a.get(r,"panels.ranges.[".concat(i,"]")),n=[].concat(P);if(T(t,"showAbsolute")&&e(n,5,"Absolute",(function(e){return io(e.original.absolute,t&&Object.prototype.hasOwnProperty.call(t,"absoluteFormat")?t.absoluteFormat:ho)})),T(t,"showNB")){var a=i&&i.replace(/[0-9]/g,"");e(n,6,"nb ".concat(a),(function(e){return e.original.integral?io(e.original.integral,t&&Object.prototype.hasOwnProperty.call(t,"NBFormat")?t.NBFormat:vo):null}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[i,P,r]),A=[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"Multiplicity",accessor:"multiplicity"},{Header:"Delta",accessor:"delta",Cell:function(e){return e.row.original.delta.toFixed(3)}},{Header:"J",Cell:function(e){var t=e.row;return t.original.j?t.original.j.map((function(e){return"".concat(e.multiplicity," (").concat(e.coupling.toFixed(2),"Hz)")})).join(", "):""}}],F=[{Header:"Couplings",columns:[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"Multiplicity",accessor:"multiplicity"},{Header:"Coupling",accessor:"coupling",Cell:function(e){return e.row.original.coupling.toFixed(3)}}]}],L=function(e){var t=e.row;return t&&t.original&&t.original.j&&t.original.j.length>0?g.a.createElement($i,{data:t.original.j,columns:F}):null},R=[{label:"Save to Clipboard",onClick:C}],N=Object(m.useCallback)((function(){O({type:"DELETE_RANGE",rangeID:null})}),[O]),_=Object(m.useCallback)((function(){y.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:N})}),[y,N]),M=Object(m.useCallback)((function(e){e&&O({type:"CHANGE_RANGE_SUM",value:e}),y.close()}),[O,y]),Y=Object(m.useMemo)((function(){return n&&t&&t[n.index]&&t[n.index].ranges&&t[n.index].ranges.options&&void 0!==t[n.index].ranges.options.sum?t[n.index].ranges.options.sum:null}),[t,n]),V=Object(m.useCallback)((function(){y.show(g.a.createElement(no,{header:"Set new range sum (current: ".concat(Y,")"),onClose:function(){return y.close()},onSave:M}))}),[M,Y,y]),B=Object(m.useCallback)((function(){s(!l)}),[l]);return g.a.createElement("div",{style:cc.container},g.a.createElement(lo,{counter:b,onDelete:_,deleteToolTip:"Delete All Ranges",onFilter:B,filterToolTip:l?"Show all ranges":"Hide ranges out of view",filterIsActive:l,counterFiltered:k&&k.length},g.a.createElement(lr,{title:"Preview publication string",popupPlacement:"right"},g.a.createElement("button",{style:cc.button,type:"button",onClick:S},g.a.createElement(Xt.k,null))),g.a.createElement(lr,{title:"Change Ranges sum (".concat(Y,")"),popupPlacement:"right"},g.a.createElement("button",{style:cc.sumButton,type:"button",onClick:V},"\u03a3"))),k&&k.length>0?g.a.createElement(ac,{columns:I,data:k,renderRowSubComponent:function(e){var t=e.row;return t&&t.original&&t.original.signal&&t.original.signal.find((function(e){return e.j&&e.j.length>0}))?g.a.createElement(ac,{columns:A,data:t.original.signal,renderRowSubComponent:L,context:R}):g.a.createElement($i,{columns:A,data:t.original.signal})},context:R}):g.a.createElement(Ti,null))})),uc=n(530);function dc(){var e=Object(d.a)(["\n  position: fixed;\n  z-index: 999999999;\n  display: flex;\n  flex-direction: row-reverse;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px,\n    rgba(0, 0, 0, 0.15) 0px 8px 16px;\n  .sketch-picker {\n    border-radius: none !important;\n    box-shadow: none !important;\n  }\n\n  .sketch-picker > div:first-child {\n    // padding-bottom: 40% !important;\n  }\n"]);return dc=function(){return e},e}var fc=Object(b.b)(dc());var pc=Object(m.memo)((function(e){var t=e.colorPickerPosition,n=e.selectedSpectrumData,a=e.onColorChanged,r=e.onMouseLeave,i=n.info,o=n.display,c=2===i.dimension?[{color:o.positiveColor,key:"positiveColor"},{color:o.negativeColor,key:"negativeColor"}]:[{color:o.color,key:"color"}];return Object(b.c)("div",{css:[fc,{left:2===i.dimension?t.x-450:t.x-220,top:t.y}],onMouseLeave:r},c.map((function(e){return Object(b.c)(uc.SketchPicker,{key:e.key,color:{hex:e.color},presetColors:P,onChangeComplete:function(t){return a(t,e.key)}})})))}),(function(){return!0})),bc={button:{backgroundColor:"transparent",border:"none",width:"26px",minWidth:"26px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex"},info:{flex:"1 1 1px",height:"100%",display:"block",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},spectrumClassIcon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"16px 16px",width:"16px",height:"100%",margin:"0px 2px"}},mc=Object(m.memo)((function(e){var t,n,a=e.visible,r=e.activated,i=e.markersVisible,o=e.data,c=e.onChangeVisibility,l=e.onChangeMarkersVisibility,s=e.onChangeActiveSpectrum,u=e.onOpenColorPicker,d=e.onContextMenu,p=function(e){var t=e.id,n=e.color,a=e.width,i=void 0===a?"14px":a;return g.a.createElement("div",{style:{backgroundColor:n,height:"4px",width:i,opacity:r&&r.id===t?1:.1,display:"inline-block"}})},b=o.display,h=b.color,v=b.name,O=b.positiveColor,y=b.negativeColor;return g.a.createElement("div",{style:bc.row,key:o.id,onContextMenu:d},g.a.createElement("button",{style:bc.button,type:"button",onClick:function(){return c(o)}},g.a.createElement(Xt.g,{style:Object(f.a)({fill:2===o.info.dimension?O:h},(n=o.id,-1!==a.findIndex((function(e){return e.id===n}))?{opacity:1,strokeWidth:"1px",fill:h}:{opacity:.1,fill:h}))})),g.a.createElement("div",{style:bc.name,onClick:function(){return s(o)}},g.a.createElement("div",{style:bc.spectrumClassIcon,className:o.info.isFid?"ci-icon-nmr-fid":2===o.info.dimension?"ci-icon-nmr-2d":"ci-icon-nmr-ft"}),g.a.createElement("span",{style:bc.info},v),g.a.createElement("div",{style:bc.info,dangerouslySetInnerHTML:{__html:o.info&&(t=o.info.solvent,t&&(t=t.replace(/([0-9]+)/g,"<sub>$1</sub>")),t)}}),g.a.createElement("span",{style:bc.info},o.info&&o.info.pulse)),g.a.createElement("button",{style:Object(f.a)({},bc.button,{},bc.icon,{opacity:function(e){return-1!==i.findIndex((function(t){return t.id===e}))}(o.id)&&o.peaks&&o.peaks.length>0?1:.1}),type:"button",onClick:function(){return l(o)},className:"ci-icon-nmr-peaks",disabled:o.peaks&&0===o.peaks.length}),g.a.createElement("button",{style:bc.button,type:"button",onClick:function(){return s(o)}},2===o.info.dimension?g.a.createElement(m.Fragment,null,g.a.createElement(p,{id:o.id,color:O,width:"7px"}),g.a.createElement(p,{id:o.id,color:y,width:"7px"})):g.a.createElement(p,{id:o.id,color:h})),g.a.createElement("button",{style:bc.button,type:"button",className:"color-change-bt",onClick:function(e){return u(o,e)}},g.a.createElement(Xt.p,null)))}));mc.defaultProps={onContextMenu:function(){return null}};var gc=mc,hc={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},vc=mi(Object(m.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,r=Object(m.useRef)(),i=Object(m.useState)(null),o=Object(p.a)(i,2),c=o[0],l=o[1],s=Object(m.useState)([]),u=Object(p.a)(s,2),d=u[0],f=u[1],b=Object(m.useState)([]),v=Object(p.a)(b,2),O=v[0],y=v[1],x=Object(m.useState)(!1),j=Object(p.a)(x,2),k=j[0],E=j[1],C=Object(m.useState)(null),w=Object(p.a)(C,2),D=w[0],S=w[1],P=Object(m.useState)(null),T=Object(p.a)(P,2),I=T[0],A=T[1],F=Object(m.useState)(null),L=Object(p.a)(F,2),R=L[0],N=L[1],_=_t(),M=Object(h.d)(),z=yt(),Y=Object(m.useState)([]),V=Object(p.a)(Y,2),B=V[0],H=V[1],X=Object(m.useCallback)((function(){return Array.isArray(B[R])?B[R].map((function(e){return e.id})):[]}),[R,B]),U=Object(m.useCallback)((function(e){var t=d.findIndex((function(t){return t.id===e.id})),n=Object(Kn.a)(d);-1===t?n.push({id:e.id}):n.splice(t,1),z({type:"CHANGE_VISIBILITY",data:n}),f(n)}),[z,d]),G=Object(m.useCallback)((function(e){var t=O.findIndex((function(t){return t.id===e.id})),n=Object(Kn.a)(O);-1===t?n.push({id:e.id}):n.splice(t,1),z({type:"CHANGE_PEAKS_MARKERS_VISIBILITY",data:n}),y(n)}),[z,O]),W=Object(m.useCallback)((function(e){c&&c.id===e.id?z({type:"CHANGE_ACTIVE_SPECTRUM",data:null}):z({type:"CHANGE_ACTIVE_SPECTRUM",data:{id:e.id}})}),[c,z]),Z=Object(m.useCallback)((function(e,t){null!==D&&z({type:"CHANGE_SPECTRUM_COLOR",data:{id:D.id,color:"".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16)),key:t}})}),[z,D]),K=Object(m.useCallback)((function(e){e&&N(e)}),[]);Object(m.useEffect)((function(){if(t){var e=t?t.filter((function(e){return!0===e.display.isVisible})):[],n=t?t.filter((function(e){return!0===e.display.isPeaksMarkersVisible})):[];f(e),y(n)}}),[t,c,R,z]),Object(m.useEffect)((function(){l(n)}),[n]),Object(m.useEffect)((function(){if(t){var e=po("nucleus")(t);if(H(e),!R){var n=Object.keys(e)[0];K(n),z({type:"SET_ACTIVE_TAB",tab:n})}}}),[t,W,c,R,z,K]);var J=Object(m.useCallback)((function(e,t){A({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),S(e),E(!0)}),[]),q=Object(m.useCallback)((function(){E(!1)}),[]),$=Object(m.useCallback)((function(e){z({type:"SET_ACTIVE_TAB",tab:e})}),[z]),Q=[{label:"Save to Clipboard",onClick:function(e){var t=e.x,n=e.y;_o(JSON.stringify({x:t,y:n},void 0,2))?M.show("Coped to clipboard"):M.error("Coped to clipboard failed")}}],ee=Object(m.useCallback)((function(e,t){e.preventDefault(),r.current.handleContextMenu(e,t)}),[r]),te=Object(m.useMemo)((function(){return g.a.createElement(m.Fragment,null,g.a.createElement(pr,{defaultTabID:a||B&&Object.keys(B)[0],onClick:$},B&&Object.keys(B).map((function(e){return g.a.createElement("div",{label:e,key:e},B[e]&&B[e].map((function(e){return g.a.createElement(gc,{key:e.id,visible:d,activated:c,markersVisible:O,data:e,onChangeVisibility:U,onChangeMarkersVisibility:G,onChangeActiveSpectrum:W,onOpenColorPicker:J,onContextMenu:function(t){return 1===e.info.dimension?ee(t,e):null}})})))}))),g.a.createElement(Zi,{ref:r,context:Q}))}),[a,B,$,Q,d,c,O,U,G,W,J,ee]),ne=Object(m.useCallback)((function(){var e=X();z({type:"DELETE_SPECTRA",IDs:e})}),[z,X]),ae=Object(m.useCallback)((function(){c?(l(null),z({type:"DELETE_SPECTRA"})):_.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:ne})}),[c,z,_,ne]),re=Object(m.useCallback)((function(){var e=X().map((function(e){return{id:e}}));z({type:"CHANGE_VISIBILITY",data:e}),f(e)}),[z,X]),ie=Object(m.useCallback)((function(){z({type:"CHANGE_VISIBILITY",data:[]}),f([])}),[z]);return g.a.createElement("div",{style:hc.container},g.a.createElement("div",{style:{overflow:"auto"}},g.a.createElement(lo,{onDelete:ae,counter:B[R]&&B[R].length,deleteToolTip:"Delete All Spectrums"},g.a.createElement(lr,{title:"Hide all spectrums",popupPlacement:"right"},g.a.createElement("button",{style:hc.button,type:"button",onClick:ie},g.a.createElement(Xt.h,null))),g.a.createElement(lr,{title:"Show all spectrums",popupPlacement:"right"},g.a.createElement("button",{style:hc.button,type:"button",onClick:re},g.a.createElement(Xt.g,null)))),te,k?g.a.createElement(pc,{onMouseLeave:q,selectedSpectrumData:D,colorPickerPosition:I,onColorChanged:Z}):null))})),ht),Oc=[{title:"Spectra",component:g.a.createElement(vc,null),openWhen:null,style:"",hidePreferenceKey:"hideSpectraPanel"},{title:"Information",component:g.a.createElement(Hi,null),openWhen:null,style:{overflow:"hidden"},hidePreferenceKey:"hideInformationPanel"},{title:"Peaks",component:g.a.createElement(ec,null),openWhen:[mn.peakPicking.id],style:"",hidePreferenceKey:"hidePeaksPanel"},{title:"Filters",component:g.a.createElement(Ai,null),openWhen:null,style:"",hidePreferenceKey:"hideFiltersPanel"},{title:"Integrals",component:g.a.createElement(Co,null),openWhen:[mn.integral.id],style:"",hidePreferenceKey:"hideIntegralsPanel"},{title:"Ranges",component:g.a.createElement(sc,null),openWhen:[mn.rangesPicking.id],style:"",hidePreferenceKey:"hideRangesPanel"},{title:"Structures",component:g.a.createElement(Jo,null),openWhen:[mn.rangesPicking.id],style:"",hidePreferenceKey:"hideStructuresPanel"}],yc=mi(Object(m.memo)((function(e){var t=e.preferences,n=e.selectedTool,a=Object(m.useState)(0),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(m.useCallback)((function(){var e=Oc.findIndex((function(e){return e.openWhen&&e.openWhen.includes(n)}));return-1===e?i:e}),[i,n]);return Object(m.useEffect)((function(){n&&o(c())}),[c,n]),g.a.createElement(di,{defaultOpenIndex:i},Oc.map((function(e){return ct.a.get(t,"panels.".concat(e.hidePreferenceKey))?g.a.createElement("span",null):g.a.createElement(bi,{key:e.title,title:e.title,style:e.style},e.component)})))})),ht),xc=new at;function jc(e){xc=e}var kc={DM_1D:"1D",DM_2D:"2D"},Ec={top:100,right:50,bottom:70,left:100},Cc={top:10,right:10,bottom:70,left:10};function wc(e){if(e.activeTab){var t=po("nucleus")(e.data)[e.activeTab];if(e.displayerMode===kc.DM_2D)return t;if(e.activeSpectrum){var n=t.findIndex((function(t){return t.id===e.activeSpectrum.id}));if(-1!==n){var a=t[n].info.isFid||!1;t=t.filter((function(e){return e.info.isFid===a}))}}else t=t?t.filter((function(e){return!1===e.info.isFid})):[];var r,i=Object(E.a)(e.data);try{var o=function(){var e=r.value;t.some((function(t){return t.id===e.id}))?(xc.getDatum(e.id).isVisibleInDomain=!0,e.isVisibleInDomain=!0):(xc.getDatum(e.id).isVisibleInDomain=!1,e.isVisibleInDomain=!1)};for(i.s();!(r=i.n()).done;)o()}catch(c){i.e(c)}finally{i.f()}return e.data}return e.data}function Dc(e){var t=[],n=[],a={},r={};try{t=e.reduce((function(e,t){if(t.isVisibleInDomain){var n=[t.x[0],t.x[t.x.length-1]];return r[t.id]=n,e.concat(n)}return e.concat([])}),[]),n=e.reduce((function(e,t){if(t.isVisibleInDomain){var n=Object($t.c)(t.y);return a[t.id]=n,e.concat(n)}return e.concat([])}),[])}catch(i){console.log(i)}return{xDomain:Object($t.c)(t),yDomain:Object($t.c)(n),yDomains:a,xDomains:r}}function Sc(e){var t={},n={},a=e.activeTab,r=e.tabActiveSpectrum,i=e.data,o=a.split(","),c=i.find((function(e){return e.id===r[a].id})),l=c.minX,s=c.maxX,u=c.minY,d=c.maxY,f=o.map((function(e){return r[e]&&r[e].id})),p=i.reduce((function(e,t){return f.includes(t.id)&&1===t.info.dimension?e.concat(t):e.concat([])}),[]);try{n=p.reduce((function(e,t){var n=[t.x[0],t.x[t.x.length-1]];return e[t.id]=n,e}),{}),t=p.reduce((function(e,t){var n=Object($t.c)(t.y);return e[t.id]=n,e}),{})}catch(b){console.log(b)}return{xDomain:[l,s],yDomain:[u,d],yDomains:t,xDomains:n}}function Pc(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=wc(e);e.activeTab&&[kc.DM_1D,kc.DM_2D].includes(e.displayerMode)&&(t=e.displayerMode===kc.DM_1D?Dc(a):Sc(e),e.xDomain=t.xDomain,e.xDomains=t.xDomains,n?(e.yDomain=t.yDomain,e.yDomains=t.yDomains,e.originDomain=t):e.originDomain=Object(f.a)({},e.originDomain,{xDomain:t.xDomain,xDomains:t.xDomains}))}function Tc(e){var t=wc(e).filter((function(e){return!0===e.isVisibleInDomain}));e.mode=t&&t[0]&&t[0].info.isFid?"LTR":"RTL"}var Ic=function(e,t){var n=t.exportType,a=e.data;if(a.length>0){var r=a[0].name;switch(n){case"json":!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"experiment",n=JSON.stringify(e,void 0,2),a=new Blob([n],{type:"text/plain"});Object(No.saveAs)(a,"".concat(t,".nmrium"))}(xc.toJSON(),r);break;case"svg":zo(r,"nmrSVG");break;case"png":!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=Vo(t),a=n.blob,r=n.width,i=n.height;try{var o=document.createElement("canvas");o.width=r,o.height=i;var c=o.getContext("2d");c.fillStyle="white",c.fillRect(0,0,o.width,o.height);var l=new Image,s=URL.createObjectURL(a);l.onload=Object(C.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.drawImage(l,0,0),n=o.toDataURL("image/png",1),Object(No.saveAs)(n,"".concat(e,".png")),URL.revokeObjectURL(n);case 4:case"end":return t.stop()}}),t)}))),l.src=s}catch(u){console.log(u)}}(r,"nmrSVG");break;case"copy":Yo("nmrSVG")}}return e};var Ac=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n},Fc=function(){function e(){if(Object(w.a)(this,e),this.stack=[],this.instance)return this.instance;this.instance=this}return Object(D.a)(e,[{key:"push",value:function(e){this.stack.push(e)}},{key:"pop",value:function(){return 0===this.stack.length?null:this.stack.pop()}}],[{key:"getInstance",value:function(){if(this.instance)return this.instance;this.instance=new e}}]),e}(),Lc=function(e,t,n){var a=n.center,r=e.height;if(a){var i=r/2;t.verticalAlign.flag=!0,t.verticalAlign.value=i,t.verticalAlign.stacked=!1,xc.setPreferences({display:{center:!0}})}else t.verticalAlign.flag=!1,t.verticalAlign.value=20,t.verticalAlign.stacked=!1,xc.setPreferences({display:{center:!1}})};function Rc(e,t,n){var a=t.activeSpectrum.id,r=xc.getDatum(a);if(n===Re.phaseCorrection.id){e.tempData=t.data;var i=function(e){var t=e.activeSpectrum,n=e.data,a=t.id,r=n.find((function(e){return e.id===a})),i=Object($t.e)(r.y),o=r.y.findIndex((function(e){return e===i}));return{xValue:r.x[o],yValue:i,index:o}}(t).xValue;e.pivot=i}else if(e.selectedTool===mn.phaseCorrection.id){var o=e.data.findIndex((function(e){return e.id===a}));r.data.x=t.tempData[o].x,r.data.re=t.tempData[o].y,r.data.im=t.tempData[o].im,e.data[o].x=t.tempData[o].x,e.data[o].y=t.tempData[o].y,e.tempData=null,e.selectedTool=null,Pc(e)}}function Nc(e,t,n){if(e&&e.length>0)if(e[0].info.isFid&&!e.some((function(e){return!1===e.info.isFid}))){var a=n/2;t.verticalAlign.flag=!0,t.verticalAlign.value=a,t.verticalAlign.stacked=!1}else t.verticalAlign.flag=!1,t.verticalAlign.value=20,t.verticalAlign.stacked=!1}var _c=function(e,t,n){if(JSON.stringify(Object.keys(t))!==JSON.stringify(Object.keys(e.tabActiveSpectrum))){for(var a=[],r=function(){var n=o[i];2===n.split(",").length&&a.push(n);var r=t[n],c=e.data.findIndex((function(e){return e.id===r[0].id}));e.tabActiveSpectrum[n]={id:r[0].id,index:c}},i=0,o=Object.keys(t);i<o.length;i++)r();a.length>0?(e.activeSpectrum=e.tabActiveSpectrum[a[0]],e.activeTab=a[0]):(e.activeSpectrum=e.tabActiveSpectrum[n],e.activeTab=n)}else e.activeTab=n,e.activeSpectrum=e.tabActiveSpectrum[n];!function(e,t){e.displayerMode=t.some((function(e){return 2===e.info.dimension}))?kc.DM_2D:kc.DM_1D}(e,t[e.activeTab]),function(e){if(e.displayerMode===kc.DM_2D){var t=e.activeTab.split(","),n=e.tabActiveSpectrum[t[0]]?Ec.top:Cc.top,a=e.tabActiveSpectrum[t[1]]?Ec.left:Cc.left;e.margin=Object(f.a)({},Ec,{top:n,left:a})}else e.margin=Cc}(e)},Mc=function(e,t){return Object(un.a)(e,(function(n){var a=e.data;if(t){var r=po("nucleus")(a);_c(n,r,t),function(e,t){if(e.displayerMode===kc.DM_2D){var n,a={},r=Object(E.a)(t[e.activeTab]);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=xc.getDatum(i.id);a[i.id]=o.getContourLines()}}catch(c){r.e(c)}finally{r.f()}e.contours=a}}(n,r),Pc(n),Tc(n)}}))};function zc(e,t,n){var a=t.getData(),r=a.x,i=a.re,o=a.im,c=e.data.findIndex((function(e){return e.id===n}));e.selectedOptionPanel=null,e.selectedTool=mn.zoom.id,e.data[c].x=r,e.data[c].y=i,e.data[c].im=o,e.data[c].filters=t.getFilters(),e.data[c].info=t.getInfo()}function Yc(){return(Yc=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xc.fromZip(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vc=function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,r=e.data.findIndex((function(e){return e.id===a})),i=function(e,t,n){var a=dn(null,n),r=n.activeSpectrum,i=a.invert(t.x-e),o=a.invert(t.x+e),c=[];return i>o?(c[0]=o,c[1]=i):(c[0]=i,c[1]=o),xc.getDatum(r.id).lookupPeak(c[0],c[1])}(10,t,e);if(-1!==r){var o={xIndex:i.xIndex};xc.getDatum(a).addPeak(o),n.data[r].peaks=xc.getDatum(a).getPeaks()}}}))},Bc={data:null,contours:null,tempData:null,xDomain:[],yDomain:[],yDomains:{},xDomains:{},originDomain:{},integralsYDomains:{},originIntegralYDomain:{},selectedTool:mn.zoom.id,selectedFilter:null,selectedOptionPanel:null,activeTab:null,width:0,height:0,margin:{top:10,right:20,bottom:70,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:{scale:1},integralZoomFactor:{scale:.5},molecules:[],verticalAlign:{flag:!1,stacked:!1,value:20},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1,preferences:{},baseLineZones:[],keysPreferences:{},displayerMode:kc.DM_1D,tabActiveSpectrum:{}};function Hc(e){return function(t){switch(t.type){case"LOAD_ZIP_FILE":(function(e){return Yc.apply(this,arguments)})(t.files).then((function(){e(t)}));break;default:return e(t)}}}function Xc(e,t){switch(t.type){case"INITIATE":return function(e,t){return Object(un.a)(e,(function(n){jc(t.AnalysisObj);var a=xc.getSpectraData();n.data=a,n.molecules=xc.getMolecules(),n.isLoading=!1;var r=xc.getPreferences("1d");r.display&&Object.prototype.hasOwnProperty.call(r.display,"center")?Lc(e,n,{center:r.display.center}):Nc(a,n,e.height),Pc(n),Tc(n)}))}(e,t.data);case"SET_LOADING_FLAG":return function(e,t){return Object(f.a)({},e,{isLoading:t})}(e,t.isLoading);case"LOAD_JSON_FILE":return function(e,t){return Object(un.a)(e,(function(n){jc(t.AnalysisObj);var a=xc.getSpectraData();n.data=a,n.molecules=xc.getMolecules();var r=xc.getPreferences("1d");n.preferences=r,r.display&&Object.prototype.hasOwnProperty.call(r.display,"center")?Lc(e,n,{center:r.display.center}):Nc(a,n,e.height),Pc(n),Tc(n),n.isLoading=!1}))}(e,t.data);case"LOAD_JCAMP_FILE":return function(e,t){return Object(un.a)(e,(function(e){for(var n=e.data.map((function(e){return e.color})),a=t.length,r=0;r<a;r++){var i=T(n);xc.addJcamp(t[r].binary.toString(),{display:{name:t[r].name,color:i,isVisible:!0,isPeaksMarkersVisible:!0},source:{jcampURL:t[r].jcampURL?t[r].jcampURL:null}}),n.push(i)}e.data=xc.getSpectraData(),Pc(e),Tc(e),e.isLoading=!1}))}(e,t.files);case"LOAD_MOL_FILE":return function(e,t){return Object(un.a)(e,(function(e){for(var n=t.length,a=0;a<n;a++)xc.addMolfile(t[a].binary.toString());e.molecules=xc.getMolecules(),e.isLoading=!1}))}(e,t.files);case"LOAD_ZIP_FILE":return function(e){return Object(un.a)(e,(function(e){e.data=xc.getSpectraData(),Pc(e),Tc(e),e.isLoading=!1}))}(e,t.files);case"EXPORT_DATA":return Ic(e,t);case"ADD_PEAK":return Vc(e,t.mouseCoordinates);case"ADD_PEAKS":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,r=e.data.findIndex((function(e){return e.id===a})),i=dn(null,e),o=i.invert(t.startX),c=i.invert(t.endX),l=[];if(o>c?(l[0]=c,l[1]=o):(l[0]=o,l[1]=c),-1!==r){var s=xc.getDatum(a).addPeaks(l[0],l[1]);n.data[r].peaks=s}}}))}(e,t);case"DELETE_PEAK_NOTATION":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.deletePeak(t),n.data[i].peaks=o.getPeaks()}))}(e,t.data);case"ADD_INTEGRAL":return function(e,t){var n=dn(null,e);return Object(un.a)(e,(function(a){var r=n.invert(t.startX),i=n.invert(t.endX),o=[];if(o=r>i?[i,r]:[r,i],e.activeSpectrum){var c=e.activeSpectrum,l=c.id,s=c.index,u=xc.getDatum(l);u.addIntegral(o),a.data[s].integrals=u.getIntegrals();var d=a.data[s].integrals.values;if(1===d.length){var f=d[0],p=f.from,b=f.to,m=a.data[s],g=m.x,h=m.y,v=z.c.integral({x:g,y:h},{from:p,to:b,reverse:!0}),O=Object($t.c)(v.y);a.integralsYDomains[l]=O,a.originIntegralYDomain=O,sn(e,a.integralZoomFactor.scale,a)}}}))}(e,t);case"DELETE_INTEGRAL":return function(e,t){return Object(un.a)(e,(function(n){var a=t.integralID,r=e.activeSpectrum,i=r.id,o=r.index,c=xc.getDatum(i);c.deleteIntegral(a),n.data[o].integrals=c.getIntegrals()}))}(e,t);case"CHANGE_INTEGRAL_DATA":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.setIntegral(t.data),n.data[i].integrals=o.getIntegrals()}}))}(e,t);case"RESIZE_INTEGRAL":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.changeIntegral(t.data),n.data[i].integrals=o.getIntegrals()}}))}(e,t);case"SET_ORIGINAL_DOMAIN":return function(e,t){return Object(un.a)(e,(function(e){e.originDomain=t}))}(e,t.domain);case"SET_X_DOMAIN":return function(e,t){return Object(un.a)(e,(function(e){e.xDomain=t}))}(e,t.xDomain);case"SET_WIDTH":return function(e,t){return Object(f.a)({},e,{width:t})}(e,t.width);case"SET_DIMENSIONS":return function(e,t,n){return Object(f.a)({},e,{width:t,height:n})}(e,t.width,t.height);case"SET_SELECTED_TOOL":return function(e,t){return Object(un.a)(e,(function(n){t?(n.selectedTool=t,mn[t].hasOptionPanel?n.selectedOptionPanel=t:n.selectedOptionPanel=null,mn[t].isFilter&&Rc(n,e,t)):(n.selectedTool=null,mn[e.selectedTool].hasOptionPanel&&(n.selectedOptionPanel=null))}))}(e,t.selectedTool);case"RESET_SELECTED_TOOL":return function(e){return Object(un.a)(e,(function(t){t.selectedOptionPanel=null,t.selectedTool=mn.zoom.id,t.baseLineZones=[],e.tempData&&(t.tempData=null,Pc(t))}))}(e);case"SET_SELECTED_OPTIONS_PANEL":return function(e,t){return Object(f.a)({},e,{selectedOptionPanel:t})}(e,t.selectedOptionPanel);case"SET_DATA":return function(e,t){return Object(un.a)(e,(function(e){var n,a=Object(E.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;xc.pushDatum(new ze(r))}}catch(i){a.e(i)}finally{a.f()}e.data=xc.getSpectraData(),e.molecules=xc.getMolecules(),e.isLoading=!1,Pc(e),Tc(e)}))}(e,t.data);case"FULL_ZOOM_OUT":return function(e,t){var n=t.zoomType,a=t.trackID;return Object(un.a)(e,(function(t){if(t.displayerMode===kc.DM_1D){var r=Fc.getInstance();switch(n){case an:t.xDomain=e.originDomain.xDomain;break;case rn:tn.setScale(.8),cn(e,t,.8);break;case on:tn.setScale(.8);var i=r.pop();t.xDomain=i||e.originDomain.xDomain,cn(e,t,.8);break;default:tn.setScale(.8),t.xDomain=e.originDomain.xDomain,cn(e,t,.8)}}else{var o=e.originDomain,c=o.xDomain,l=o.yDomain,s=o.yDomains;switch(a){case Pa.TOP_1D:var u=t.tabActiveSpectrum[t.activeTab.split(",")[0]].id;t.xDomain=c,t.yDomains[u]=s[u];break;case Pa.LEFT_1D:var d=t.tabActiveSpectrum[t.activeTab.split(",")[1]].id;t.yDomain=l,t.yDomains[d]=s[d];break;case Pa.CENTER_2D:t.xDomain=c,t.yDomain=l;break;default:t.xDomain=c,t.yDomain=l,t.yDomains=s}}}))}(e,t);case"SHIFT_SPECTRUM":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeSpectrum.id,r=xc.getDatum(a);r.applyFilter([{name:Re.shiftX.id,options:t}]),zc(n,r,a),Pc(n)}))}(e,t.shiftValue);case"APPLY_ZERO_FILLING_FILTER":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeSpectrum.id,r=xc.getDatum(a);r.applyFilter([{name:Re.zeroFilling.id,options:t.zeroFillingSize},{name:Re.lineBroadening.id,options:t.lineBroadeningValue}]),zc(n,r,a),Pc(n),Tc(n)}))}(e,t.value);case"APPLY_FFT_FILTER":return function(e){return Object(un.a)(e,(function(t){var n=e.activeSpectrum.id,a=xc.getDatum(n);a.applyFilter([{name:Re.fft.id,options:{}}]),zc(t,a,n),Nc([{info:a.getInfo()}],t,e.height),Pc(t),Tc(t)}))}(e);case"APPLY_MANUAL_PHASE_CORRECTION_FILTER":return function(e,t){return Object(un.a)(e,(function(n){var a=n.activeSpectrum,r=a.id,i=a.index,o=t.ph0,c=t.ph1,l=xc.getDatum(r),s=Ac(n.data[i].x,e.pivot);o-=c*n.data[i].x.indexOf(s)/n.data[i].y.length,l.applyFilter([{name:Re.phaseCorrection.id,options:{ph0:o,ph1:c}}]),zc(n,l,r),n.dataSnapshot=null,n.tempData=null,Pc(n)}))}(e,t.value);case"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER":return function(e,t){return Object(un.a)(e,(function(n){var a=e.tempData,r=e.activeSpectrum.index,i=a[r],o=i.x,c=i.y,l=i.im,s=i.info,u=t.ph0,d=t.ph1,f=Ac(a[r].x,e.pivot),p={data:{x:o,re:c,im:l},info:s};je(p,{ph0:u-=d*a[r].x.indexOf(f)/c.length,ph1:d});var b=p.data,m=b.im,g=b.re;n.tempData[r].im=m,n.tempData[r].y=g}))}(e,t.value);case"ENABLE_FILTER":return function(e,t,n){return Object(un.a)(e,(function(a){var r=e.activeSpectrum.id,i=xc.getDatum(r);i.enableFilter(t,n);var o=i.getReal(),c=e.data.findIndex((function(e){return e.id===r}));a.data[c].x=o.x,a.data[c].y=o.y,a.data[c].filters=i.getFilters(),a.data[c].info.isFid=i.info.isFid,Pc(a),Tc(a)}))}(e,t.id,t.checked);case"DELETE_FILTER":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeSpectrum.id,r=xc.getDatum(a);r.deleteFilter(t);var i=r.getReal(),o=e.data.findIndex((function(e){return e.id===a}));n.data[o].x=i.x,n.data[o].y=i.y,n.data[o].filters=r.getFilters(),n.data[o].info.isFid=r.info.isFid,Pc(n),Tc(n)}))}(e,t.id);case"CHANGE_VISIBILITY":return function(e,t){return Object(un.a)(e,(function(e){var n,a=Object(E.a)(e.data);try{var r=function(){var e=n.value;t.some((function(t){return t.id===e.id}))?e.display.isVisible=!0:e.display.isVisible=!1};for(a.s();!(n=a.n()).done;)r()}catch(i){a.e(i)}finally{a.f()}}))}(e,t.data);case"CHANGE_PEAKS_MARKERS_VISIBILITY":return function(e,t){return Object(un.a)(e,(function(e){var n,a=Object(E.a)(e.data);try{var r=function(){var e=n.value,a=xc.getDatum(e.id);t.some((function(t){return t.id===e.id}))?(a.setDisplay({isPeaksMarkersVisible:!0}),e.display.isPeaksMarkersVisible=!0):(a.setDisplay({isPeaksMarkersVisible:!1}),e.display.isPeaksMarkersVisible=!1)};for(a.s();!(n=a.n()).done;)r()}catch(i){a.e(i)}finally{a.f()}}))}(e,t.data);case"CHANGE_ACTIVE_SPECTRUM":return function(e,t){return Object(un.a)(e,(function(e){var n=!1;if(t){xc.getDatum(t.id).setDisplay({isVisible:!0});var a=e.data.findIndex((function(e){return e.id===t.id})),r=e.data.findIndex((function(t){var n;return t.id===(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)}));-1!==a&&(e.data[a].display.isVisible=!0),n=-1!==r?e.data[r].info.isFid!==e.data[a].info.isFid:e.data[a].info.isFid,t=Object(f.a)({},t,{index:a}),e.activeSpectrum=t,e.tabActiveSpectrum[e.activeTab]=t}else e.activeSpectrum=null,e.tabActiveSpectrum[e.activeTab]=null,n=!1;n&&(Pc(e),delete e.tabActiveSpectrum[e.activeTab],Tc(e))}))}(e,t.data);case"CHANGE_SPECTRUM_COLOR":return function(e,t){var n=t.id,a=t.color,r=t.key;return Object(un.a)(e,(function(e){var t=e.data.findIndex((function(e){return e.id===n}));-1!==t&&(e.data[t].display[r]=a,xc.getDatum(n).setDisplay(Object(N.a)({},r,a)))}))}(e,t.data);case"TOGGLE_REAL_IMAGINARY_VISIBILITY":return function(e){return Object(un.a)(e,(function(t){if(null!==e.activeSpectrum){var n=e.activeSpectrum.id,a=xc.getDatum(n);if(a){var r=a.getReal().y,i=a.getImaginary().y,o=e.data.findIndex((function(e){return e.id===n}));if(a.setIsRealSpectrumVisible(!t.data[o]),t.data[o].display.isRealSpectrumVisible=!t.data[o].display.isRealSpectrumVisible,a.setIsRealSpectrumVisible(),t.data[o].display.isRealSpectrumVisible){if(null!==r&&void 0!==r){t.data[o].y=r;var c=Dc(t.data);t.xDomain=c.xDomain,t.yDomain=c.yDomain,t.xDomains=c.xDomains,t.yDomains=c.yDomains}}else if(null!==i&&void 0!==i){t.data[o].y=i;var l=Dc(t.data);t.xDomain=l.xDomain,t.yDomain=l.yDomain,t.xDomains=l.xDomains,t.yDomains=l.yDomains}}}}))}(e);case"SET_ZOOM_FACTOR":return function(e,t){return Object(un.a)(e,(function(n){var a=t.deltaY,r=t.deltaMode,i=t.trackID;if(tn.wheel(a,r),i)switch(i){case Pa.TOP_1D:ln(n,tn.getScale(),e.margin.top,10,0);break;case Pa.LEFT_1D:ln(n,tn.getScale(),e.margin.left,10,1);break;default:return e}else cn(e,n,tn.getScale())}))}(e,t);case"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE":return function(e,t){var n=t.flag;return Object(un.a)(e,(function(t){var a=e.activeSpectrum,r=e.data,i=e.height,o=20;a&&(r[a.index].isFid&&(o=i/2));t.verticalAlign.flag=n,t.verticalAlign.stacked=n,t.verticalAlign.value=n?Math.floor(i/(e.data.length+2)):o}))}(e,t);case"ADD_MOLECULE":return function(e,t){return xc.addMolfile(t),Object(un.a)(e,(function(e){e.molecules=xc.getMolecules()}))}(e,t.molfile);case"SET_MOLECULE":return function(e,t,n){return Object(un.a)(e,(function(e){e.molecules=xc.setMolfile(t,n)}))}(e,t.molfile,t.key);case"DELETE_MOLECULE":return function(e,t){return Object(un.a)(e,(function(e){xc.removeMolecule(t),e.molecules=xc.getMolecules()}))}(e,t.key);case"DELETE_SPECTRA":return function(e,t){return Object(un.a)(e,(function(e){var n=e.activeSpectrum;if(n&&n.id)xc.deleteDatumByIDs([n.id]),e.activeSpectrum=null,e.data=xc.getSpectraData(),Pc(e),Tc(e);else{var a=t.IDs;xc.deleteDatumByIDs(a),e.data=xc.getSpectraData()}}))}(e,t);case"SET_INTEGRAL_Y_DOMAIN":return function(e,t){return Object(un.a)(e,(function(e){var n=e.activeSpectrum;n&&(e.integralsYDomains[n.id]=t)}))}(e,t.yDomain);case"CHANGE_INTEGRAL_ZOOM":return function(e,t){return Object(un.a)(e,(function(n){var a=t.deltaY,r=t.deltaMode;nn.wheel(a,r),sn(e,nn.getScale(),n)}))}(e,t);case"CHANGE_INTEGRAL_SUM":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.changeIntegralSum(t),n.data[i].integrals=o.getIntegrals(),e.data.integralsYDomain||(n.integralsYDomains[r]=n.yDomains[r])}}))}(e,t.value);case"BRUSH_END":return function(e,t){return Object(un.a)(e,(function(n){var a=n.displayerMode===kc.DM_2D,r=dn(null,e),i=a?Aa(e):fn(null,e),o=r.invert(t.startX),c=r.invert(t.endX),l=i.invert(t.startY),s=i.invert(t.endY),u=o>c?[c,o]:[o,c],d=l>s?[s,l]:[l,s];if(n.displayerMode===kc.DM_2D)switch(t.trackID){case Pa.CENTER_2D:n.xDomain=u,n.yDomain=d;break;case Pa.TOP_1D:n.xDomain=u;break;case Pa.LEFT_1D:n.yDomain=d}else Fc.getInstance().push(e.xDomain),n.xDomain=u}))}(e,t);case"SET_VERTICAL_INDICATOR_X_POSITION":return function(e,t){return Object(un.a)(e,(function(n){var a=dn(null,e);n.pivot=a.invert(t)}))}(e,t.position);case"SET_SPECTRUMS_VERTICAL_AlIGN":return function(e,t){return Object(un.a)(e,(function(n){Lc(e,n,{center:t})}))}(e,t.flag);case"AUTO_PEAK_PICKING":return function(e,t){return Object(un.a)(e,(function(n){n.selectedTool=mn.zoom.id,n.selectedOptionPanel=null;var a=e.activeSpectrum.id,r=xc.getDatum(a).applyAutoPeakPicking(t),i=e.data.findIndex((function(e){return e.id===a}));-1!==i&&(n.data[i].peaks=r)}))}(e,t.options);case"AUTO_RANGES_DETECTION":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index;n.selectedTool=mn.zoom.id,n.selectedOptionPanel=null;var o=xc.getDatum(r).detectRanges(t);n.data[i].ranges=o}}))}(e,t.options);case"ADD_RANGE":return function(e,t){return Object(un.a)(e,(function(n){var a=dn(null,e),r=a.invert(t.startX),i=a.invert(t.endX),o=[];if(o=r>i?[i,r]:[r,i],n.activeSpectrum){var c=e.activeSpectrum,l=c.id,s=c.index,u=xc.getDatum(l);u.addRange(o[0],o[1]),n.data[s].ranges=u.getRanges()}}))}(e,t);case"DELETE_RANGE":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.deleteRange(t),n.data[i].ranges=o.getRanges()}))}(e,t.rangeID);case"CHANGE_RANGE_DATA":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.setRange(t.data),n.data[i].ranges=o.getRanges()}}))}(e,t);case"RESIZE_RANGE":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.changeRange(t.data),n.data[i].ranges=o.getRanges()}}))}(e,t);case"CHANGE_RANGE_SUM":return function(e,t){return Object(un.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=xc.getDatum(r);o.changeRangesSum(t),n.data[i].ranges=o.getRanges()}}))}(e,t.value);case"SET_PREFERENCES":return function(e,t){var n=t.type,a=t.values;return Object(un.a)(e,(function(e){var t=xc.getPreferences(),r=t&&Object.prototype.hasOwnProperty.call(t,"panels")?t.panels:{};xc.setPreferences({panels:Object(f.a)({},r,Object(N.a)({},n,a))}),e.preferences=xc.getPreferences()}))}(e,t.data);case"SET_ACTIVE_TAB":return Mc(e,t.tab);case"ADD_BASE_LINE_ZONE":return function(e,t){var n=t.from,a=t.to,r=dn(null,e);return Object(un.a)(e,(function(t){var i=r.invert(n),o=r.invert(a),c=[];c=i>o?[o,i]:[i,o];var l=e.baseLineZones.slice();l.push({id:H(),from:c[0],to:c[1]}),t.baseLineZones=l}))}(e,t.zone);case"DELETE_BASE_LINE_ZONE":return function(e,t){return Object(un.a)(e,(function(n){n.baseLineZones=e.baseLineZones.filter((function(e){return e.id!==t}))}))}(e,t.id);case"APPLY_BASE_LINE_CORRECTION_FILTER":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeSpectrum.id,r=xc.getDatum(a);r.applyFilter([{name:Re.baselineCorrection.id,options:Object(f.a)({zones:e.baseLineZones},t.options)}]),n.baseLineZones=[];var i=n.xDomain.slice();zc(n,r,a),Pc(n),n.xDomain=i}))}(e,t);case"SET_KEY_PREFERENCES":return function(e,t){return Object(un.a)(e,(function(n){var a=e.activeTab,r=e.data,i=e.activeSpectrum,o=e.zoomFactor,c=e.xDomain,l=e.xDomains,s=e.yDomain,u=e.yDomains,d=e.margin,f=e.displayerMode,p=e.tabActiveSpectrum;if(a){var b=po("nucleus")(r),m=f===kc.DM_2D?b[a].reduce((function(e,t){return e[t.id]=xc.getDatum(t.id).getProcessingController().getLevel(),e}),{}):null;n.keysPreferences[t]={activeTab:a,activeSpectrum:i,displayerMode:f,tabActiveSpectrum:p,zoomFactor:o,xDomain:c,xDomains:l,yDomain:s,yDomains:u,level:m,margin:d,data:b[a].reduce((function(e,t){return e[t.id]={color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible},e}),{})}}}))}(e,t.keyCode);case"APPLY_KEY_PREFERENCES":return function(e,t){return Object(un.a)(e,(function(n){var a=e.keysPreferences[t];if(a)if(n.activeTab=a.activeTab,n.data=e.data.map((function(e){return Object(f.a)({},e,{},e.info.nucleus===a.activeTab?a.data[e.id]:{display:e.display})})),n.displayerMode=a.displayerMode,n.tabActiveSpectrum=a.tabActiveSpectrum,n.activeSpectrum=a.activeSpectrum,n.margin=a.margin,Pc(n),n.xDomain=a.xDomain,n.xDomains=a.xDomains,n.yDomain=a.yDomain,n.yDomains=a.yDomains,n.displayerMode===kc.DM_2D)for(var r=0,i=Object.keys(a.level);r<i.length;r++){var o=i[r],c=a.level[o],l=c.levelPositive,s=c.levelNegative,u=xc.getDatum(o).getProcessingController();u.setLevel(l,s),n.contours[o]=u.drawContours()}else tn.setScale(a.zoomFactor.scale),cn(e,n,a.zoomFactor.scale)}))}(e,t.keyCode);case"SET_2D_LEVEL":return function(e,t){var n=t.deltaY,a=t.shiftKey;try{if(e.activeSpectrum){var r=e.activeSpectrum.id,i=xc.getDatum(r);if(i instanceof Ue){var o=i.getProcessingController();return a?o.shiftWheel(n):o.wheel(n),Object(un.a)(e,(function(e){var t=o.drawContours();e.contours[r]=t}))}return e}return e}catch(c){return e}}(e,t);case"RESET_X_DOMAIN":return function(e){return Object(un.a)(e,(function(t){var n=e.originDomain,a=n.xDomain,r=n.yDomain,i=n.xDomains,o=n.yDomains;t.xDomain=a,t.yDomain=r,t.xDomains=i,t.yDomains=o}))}(e);case"undo":return function(e){var t=e.history,n=t.past,a=t.present,r=t.future,i=n[n.length-1],o=n.slice(0,n.length-1),c=[a].concat(Object(Kn.a)(r)),l=0!==c.length,s=0!==n.length;xc.undoFilter(n);var u=xc.getSpectraData(),d=Dc(u),p={past:o,present:i,future:c,hasRedo:l,hasUndo:s};return Object(f.a)({},e,{data:u,xDomain:d.xDomain,yDomain:d.yDomain,originDomain:d,history:p})}(e);case"redo":return function(e){return Object(un.a)(e,(function(e){var t=e.history,n=t.future[0],a=t.future.shift();t.past.push(t.present),t.present=a,t.hasUndo=!0,t.hasRedo=t.future.length>0,xc.redoFilter(n),e.data=xc.getSpectraData(),Pc(e)}))}(e);case"reset":return function(e,t){return Object(un.a)(e,(function(e){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}))}(e,t);default:return e}}function Uc(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return Uc=function(){return e},e}var Gc=Object(b.b)(Uc()),Wc=["dx","jdx"],Zc=function(e){var t=e.onLoadClick,n=e.onClose,a=e.startLoading,r=Object(m.useRef)(),i=Object(m.useCallback)((function(){var e=r.current.value,n=function(e){var t=e.replace(/^.*[\\\/]/,"").split(".");return{name:t[0].toLowerCase(),extension:t[1].toLowerCase()}}(e);Wc.includes(n.extension)?(a(),function(e){return ti.apply(this,arguments)}(e).then((function(a){var r={binary:a,name:n.name,jcampURL:e};t(r)}))):t(null)}),[t,a]);return Object(b.c)("div",{css:Gc},Object(b.c)("div",{className:"header"},Object(b.c)("span",null,"Load JCAMP Dialog"),Object(b.c)("button",{onClick:n,type:"button"},Object(b.c)(Xt.v,null))),Object(b.c)("div",{className:"container"},Object(b.c)("input",{ref:r,type:"text",placeholder:"Enter JCAMP file relative path ex: ./path/file.dx"}),Object(b.c)("button",{type:"button",onClick:i},"Load")))};Zc.defaultProps={onLoadButtonClick:function(){return null},onClose:function(){return null},startLoading:function(){return null}};var Kc=Zc;function Jc(){var e=Object(d.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return Jc=function(){return e},e}function qc(){var e=Object(d.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n"]);return qc=function(){return e},e}var $c=Object(b.b)(qc()),Qc=Object(b.b)(Jc()),el=function(e){var t=e.isViewButtonVisible,n=void 0===t||t,a=e.preferences,r=yt(),i=ht(),o=i.data,c=i.activeSpectrum,l=i.verticalAlign,s=Object(m.useState)(!1),u=Object(p.a)(s,2),d=u[0],f=u[1],g=Object(m.useState)(0),v=Object(p.a)(g,2),O=v[0],y=v[1],x=Object(m.useState)(),j=Object(p.a)(x,2),k=j[0],E=j[1],C=Object(m.useState)(!1),w=Object(p.a)(C,2),D=w[0],S=w[1],P=Object(h.d)(),T=_t(),I=Object(m.useCallback)((function(){r({type:"EXPORT_DATA",exportType:"svg"})}),[r]),A=Object(m.useCallback)((function(){return r({type:"EXPORT_DATA",exportType:"png"})}),[r]),F=Object(m.useCallback)((function(){r({type:"EXPORT_DATA",exportType:"copy"}),P.show("Spectrum copied to clipboard")}),[P,r]),L=Object(m.useCallback)((function(){return r({type:"EXPORT_DATA",exportType:"json"})}),[r]),R=Object(m.useCallback)((function(){var e=!D;S(e),r({type:"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",flag:e})}),[r,D]),N=Object(m.useCallback)((function(){r({type:"TOGGLE_REAL_IMAGINARY_VISIBILITY",isRealSpectrumVisible:!d}),f(!d)}),[r,d]),_=Object(m.useCallback)((function(){r({type:"SET_SPECTRUMS_VERTICAL_AlIGN",flag:!l.flag})}),[r,l.flag]),M=Object(m.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"c":_();break;case"s":R()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":F(),e.preventDefault();break;case"s":L(),e.preventDefault()}}),[_,R,L,F]),z=Object(m.useCallback)((function(e){e?(r({type:"LOAD_JCAMP_FILE",files:[e]}),T.close()):P.error("you file must be one of those extensions [ .jdx, dx ] ")}),[P,r,T]),Y=Object(m.useCallback)((function(){T.close(),r({type:"SET_LOADING_FLAG",isLoading:!0})}),[r,T]),V=Object(m.useCallback)((function(){T.show(Object(b.c)(Kc,{onLoadClick:z,onClose:function(){return T.close()},startLoading:Y}),{})}),[z,T,Y]);Object(m.useEffect)((function(){return document.addEventListener("keydown",M,!1),function(){document.removeEventListener("keydown",M,!1)}}),[M]),Object(m.useEffect)((function(){if(o)if(y(o.length),c){var e=o.find((function(e){return e.id===c.id})).info;E(e)}else E({isComplex:!1,isFid:!1})}),[c,o]);var B=Object(m.useCallback)((function(e){return!ct.a.get(a,"toolsBarButtons.".concat(e))}),[a]);return Object(b.c)(m.Fragment,null,B("hideImport")&&Object(b.c)(Io,{style:$c,component:Object(b.c)(Xt.m,null),toolTip:"Import"},Object(b.c)("button",{type:"button",css:Qc,onClick:V},Object(b.c)(Xt.i,null),Object(b.c)("span",null,"Add jcamp from URL"))),B("hideExportAs")&&Object(b.c)(Io,{style:$c,component:Object(b.c)(Xt.k,null),toolTip:"Export As"},Object(b.c)("button",{type:"button",css:Qc,onClick:I},Object(b.c)(Xt.e,null),Object(b.c)("span",null,"Export as SVG")),Object(b.c)("button",{type:"button",css:Qc,onClick:A},Object(b.c)(Xt.l,null),Object(b.c)("span",null,"Export as PNG")),Object(b.c)("button",{type:"button",css:Qc,onClick:L},Object(b.c)(Xt.j,null),Object(b.c)("span",null,"Save data ( Press Ctrl + S )")),Object(b.c)("button",{type:"button",css:Qc,onClick:F},Object(b.c)(Xt.d,null),Object(b.c)("span",null,"Copy image to Clipboard ( Press Ctrl + C )"))),B("hideSpectraStackAlignments")&&n&&O>1&&Object(b.c)("button",{type:"button",css:[$c,{display:"block"}],onClick:R,className:D?"ci-icon-nmr-overlay3":"ci-icon-nmr-overlay3-aligned"},Object(b.c)(lr,{title:"Spectra alignment",popupPlacement:"right"},Object(b.c)("div",null))),B("hideRealImaginary")&&k&&k.isComplex&&Object(b.c)("button",{css:$c,type:"button",onClick:N,className:"ci-icon-nmr-real-imag"},Object(b.c)(lr,{title:d?"Real Spectrum":"Imaginary Spectrum",popupPlacement:"right"})),B("hideSpectraCenterAlignments")&&Object(b.c)("button",{css:$c,type:"button",onClick:_},Object(b.c)(lr,{title:l.flag?"Bottom Align":"Align Center",popupPlacement:"right"},l.flag?"BA":"CA")))};function tl(){var e=Object(d.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"]);return tl=function(){return e},e}function nl(){var e=Object(d.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]);return nl=function(){return e},e}var al=Object(b.b)(nl()),rl=Object(b.b)(tl()),il=function(e){var t=e.children,n=e.value,a=e.disabled,r=e.isActive,i=e.onChange,o=e.className,c=e.style,l=e.isVisible,s=Object(m.useState)(r),u=Object(p.a)(s,2),d=u[0],f=u[1],g=Object(m.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=!d;f(t),i(t?n:null)}),[d,i,n]);return Object(m.useEffect)((function(){f(r)}),[r]),l?Object(b.c)("button",{type:"button",onClick:g,css:[al,d&&rl],style:c,className:" ".concat(o,d?"  active":" "),disabled:a},Object(m.cloneElement)(t,{style:{fontSize:"10px"}})):null};il.displayName="ToggleButton",il.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function(){return null},onValueReady:function(){return null}};var ol=il,cl={display:"flex",flexDirection:"column"},ll=function(e){var t=e.children,n=e.value,a=e.onChange,r=Object(m.useState)([]),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Object(m.useCallback)((function(e){var t=Object(Kn.a)(o).map((function(t){return{value:t.value,isActive:t.value===e}}));c(t),a(e)}),[a,o]),s=Object(m.useMemo)((function(){var e=0;return g.a.Children.map(t,(function(t){if(t){if("ToggleButton"===t.type.displayName){var n=g.a.cloneElement(t,{onChange:l,isActive:o[e]&&o[e].isActive&&o[e].isActive,index:e});return e++,n}return g.a.cloneElement(t)}}))}),[t,l,o]);return Object(m.useEffect)((function(){var e=g.a.Children.map(t,(function(e){if(e&&"ToggleButton"===e.type.displayName)return{value:e.props.value,isActive:e.props.value===n}}));c(e)}),[t,n]),g.a.createElement("div",{style:cl}," ",s," ")};ll.defaultProps={onChange:function(){return null}};var sl=ll,ul={icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},button:{backgroundColor:"transparent",border:"none",width:"35px",height:"35px",outline:"outline"},faIcon:{display:"flex",justifyContent:"center"}},dl=[],fl=function(e){var t=e.defaultValue,n=e.preferences,a=Object(m.useState)(),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(m.useState)(),l=Object(p.a)(c,2),s=l[0],u=l[1],d=Object(h.d)(),b=yt(),v=Object(m.useCallback)((function(e){[mn.peakPicking.id,mn.integral.id].includes(e)&&d.show("Press Shift + Left Mouse button to select zone for integral and peak picking"),b({type:"SET_SELECTED_TOOL",selectedTool:e})}),[d,b]),O=ht(),y=O.activeSpectrum,x=O.data,j=Object(m.useCallback)((function(e){o(e),v(e)}),[v]),k=Object(m.useCallback)((function(){0===dl.length&&b({type:"FULL_ZOOM_OUT",zoomType:an});var e=ct.a.debounce((function(){dl=[]}),500);dl.push(e),e(),dl.length>1&&(ct.a.map(dl,(function(e){return e.cancel()})),dl=[],b({type:"FULL_ZOOM_OUT"}))}),[b]),E=Object(m.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey)switch(e.key){case"f":k();break;case"z":case"Escape":o(mn.zoom.id),v(mn.zoom.id);break;case"r":o(mn.rangesPicking.id),v(mn.rangesPicking.id);break;case"p":o(mn.peakPicking.id),v(mn.peakPicking.id);break;case"i":o(mn.integral.id),v(mn.integral.id)}}),[v,k]);Object(m.useEffect)((function(){return o(t),document.addEventListener("keydown",E,!1),function(){document.removeEventListener("keydown",E,!1)}}),[t,E]),Object(m.useEffect)((function(){if(x&&y){var e=x.find((function(e){return e.id===y.id})).info;u({info:e})}else u({info:{isComplex:!1,isFid:!1}})}),[y,x]);var C=Object(m.useCallback)((function(){b({type:"APPLY_FFT_FILTER",value:""}),b({type:"SET_SELECTED_FILTER",selectedFilter:null})}),[b]),w=Object(m.useCallback)((function(e){return!ct.a.get(n,"toolsBarButtons.".concat(e))}),[n]);return g.a.createElement(g.a.Fragment,null,g.a.createElement(sl,{value:i,onChange:j},w("hideZoomTool")&&g.a.createElement(ol,{key:mn.zoom.id,value:mn.zoom.id},g.a.createElement(lr,{title:"".concat(mn.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0}},g.a.createElement(Xt.u,null))),w("hideZoomOutTool")&&g.a.createElement("button",{type:"button",style:Object(f.a)({},ul.button,{},ul.faIcon),onClick:k},g.a.createElement(lr,{title:"Horizontal zoom out ( Press f ), Horizontal and Vertical zoom out, double click ( Press ff )",popupPlacement:"right"},g.a.createElement(Xt.f,null))),w("hidePeakTool")&&g.a.createElement(ol,{key:mn.peakPicking.id,value:mn.peakPicking.id,className:"ci-icon-nmr-peak-picking",style:ul.icon,isVisible:y&&s&&!s.info.isFid},g.a.createElement(lr,{title:"".concat(mn.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0}})),w("hideIntegralTool")&&g.a.createElement(ol,{key:mn.integral.id,value:mn.integral.id,className:"ci-icon-nmr-integrate",style:ul.icon,isVisible:y&&s&&!s.info.isFid},g.a.createElement(lr,{title:"".concat(mn.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0}})),w("hideAutoRangesTool")&&g.a.createElement(ol,{key:mn.rangesPicking.id,value:mn.rangesPicking.id,className:"ci-icon-nmr-range-picking",style:ul.icon,isVisible:y&&s&&!s.info.isFid},g.a.createElement(lr,{title:mn.rangesPicking.label,popupPlacement:"right",offset:{x:10,y:0}})),w("hideZeroFillingTool")&&g.a.createElement(ol,{key:mn.zeroFilling.id,value:mn.zeroFilling.id,className:"ci-icon-nmr-zero-filling",style:ul.icon,isVisible:s&&Re.zeroFilling.isApplicable(s)},g.a.createElement(lr,{title:mn.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0}})),w("hidePhaseCorrectionTool")&&g.a.createElement(ol,{key:mn.phaseCorrection.id,value:mn.phaseCorrection.id,className:"ci-icon-nmr-phase-correction",style:ul.icon,isVisible:y&&s&&Re.phaseCorrection.isApplicable(s)},g.a.createElement(lr,{title:mn.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0}})),w("hideBaseLineCorrectionTool")&&g.a.createElement(ol,{key:mn.baseLineCorrection.id,value:mn.baseLineCorrection.id,className:"ci-icon-nmr-base-line-correction",style:ul.icon,isVisible:y&&s&&Re.baselineCorrection.isApplicable(s)},g.a.createElement(lr,{title:mn.baseLineCorrection.label,popupPlacement:"right",offset:{x:10,y:0}},"BLC"))),w("hideFFTTool")&&s&&Re.fft.isApplicable(s)&&g.a.createElement("button",{className:"ci-icon-nmr-fourier-transform",style:Object(f.a)({},ul.icon,{},ul.button),type:"button",onClick:C},g.a.createElement(lr,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0}})))},pl=Object(m.memo)(fl);fl.defaultProps={defaultValue:mn.zoom.id};var bl={display:"flex",flexDirection:"column",alignItems:"start",borderRight:"0.55px solid #f7f7f7",paddingRight:"1px"},ml=function(e){var t=e.preferences,n=ht().selectedTool;return g.a.createElement("div",{style:bl},g.a.createElement(pl,{defaultValue:n,preferences:t}),g.a.createElement(el,{preferences:t}))};function gl(){var e=Object(d.a)(["\n                    background-color: white;\n                    height: 100%;\n                    display: flex;\n                    flex-direction: column;\n                    div:focus {\n                      outline: none !important;\n                    }\n                    button:active,\n                    button:hover,\n                    button:focus,\n                    [type='button']:focus,\n                    button {\n                      outline: none !important;\n                    }\n                  "]);return gl=function(){return e},e}var hl={position:h.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:h.c.SCALE,containerStyle:{fontSize:"18px",zIndex:999999}},vl={container:{position:"relative",height:"none"},pane1:{maxWidth:"80%",minWidth:"50%"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},Ol=Object(m.memo)((function(e){var t=e.data,n=e.preferences,a=Object(m.useRef)(),r=Object(y.a)(!1),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Object(x.a)(a,o,{onClose:function(){c(!1)}}),s=Object(m.useState)(!1),u=Object(p.a)(s,2),d=u[0],g=u[1],j=Object(m.useReducer)(Xc,Bc),k=Object(p.a)(j,2),E=k[0],C=k[1],w=E.selectedTool,D=E.displayerMode;Object(m.useEffect)((function(){C({type:"SET_LOADING_FLAG",isLoading:!0}),at.build(t||{}).then((function(e){C({type:"INITIATE",data:{AnalysisObj:e}})}))}),[t]);var S=Object(m.useCallback)((function(e){g(!1),C({type:"SET_WIDTH",width:e})}),[]),P=Object(m.useMemo)((function(){return Hc(C)}),[C]);return Object(b.c)(rr,null,Object(b.c)(Nt,null,Object(b.c)(h.a,Object.assign({template:v.a},hl),Object(b.c)(Ot,{value:P},Object(b.c)(gt,{value:Object(f.a)({},E,{isResizeEventStart:d})},Object(b.c)(or,{parentRef:a}),Object(b.c)(In.a,null,Object(b.c)("div",{ref:a,css:Object(b.b)(gl())},Object(b.c)(Qr,{isFullscreen:l,onMaximize:c}),Object(b.c)("div",{style:{flex:1}},Object(b.c)(si,null,Object(b.c)(ml,{preferences:n}),Object(b.c)(O.a,{style:vl.container,paneStyle:vl.pane,resizerStyle:vl.resizer,pane1Style:vl.pane1,split:"vertical",defaultSize:"80%",minSize:"80%",onDragFinished:S,onDragStarted:function(){g(!0)}},D===kc.DM_1D?Object(b.c)(Sa,null):Object(b.c)(er,null),Object(b.c)(yc,{preferences:n,selectedTool:w})))))))))))}));Ol.defaultProps={height:600,width:800,preferences:{panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1}}};t.a=Ol}}]);
//# sourceMappingURL=2.526c1bc3.chunk.js.map